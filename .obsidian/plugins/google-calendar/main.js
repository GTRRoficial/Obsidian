/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var Tx=Object.create;var cs=Object.defineProperty,Sx=Object.defineProperties,Dx=Object.getOwnPropertyDescriptor,Mx=Object.getOwnPropertyDescriptors,Ox=Object.getOwnPropertyNames,Xp=Object.getOwnPropertySymbols,Ax=Object.getPrototypeOf,Qp=Object.prototype.hasOwnProperty,Lx=Object.prototype.propertyIsEnumerable;var Jp=(t,e,n)=>e in t?cs(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xr=(t,e)=>{for(var n in e||(e={}))Qp.call(e,n)&&Jp(t,n,e[n]);if(Xp)for(var n of Xp(e))Lx.call(e,n)&&Jp(t,n,e[n]);return t},ja=(t,e)=>Sx(t,Mx(e)),$p=t=>cs(t,"__esModule",{value:!0});var ZD=typeof require!="undefined"?require:t=>{throw new Error('Dynamic require of "'+t+'" is not supported')};var Ci=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Nx=(t,e)=>{$p(t);for(var n in e)cs(t,n,{get:e[n],enumerable:!0})},Px=(t,e,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of Ox(e))!Qp.call(t,r)&&r!=="default"&&cs(t,r,{get:()=>e[r],enumerable:!(n=Dx(e,r))||n.enumerable});return t},ye=t=>Px($p(cs(t!=null?Tx(Ax(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var G=(t,e,n)=>new Promise((r,o)=>{var a=f=>{try{c(n.next(f))}catch(d){o(d)}},l=f=>{try{c(n.throw(f))}catch(d){o(d)}},c=f=>f.done?r(f.value):Promise.resolve(f.value).then(a,l);c((n=n.apply(t,e)).next())});var el=Ci(De=>{"use strict";Object.defineProperty(De,"__esModule",{value:!0});var st=require("obsidian"),Mc="YYYY-MM-DD",Oc="gggg-[W]ww",Nh="YYYY-MM",Ph="YYYY-[Q]Q",Ih="YYYY";function ks(t){var n,r;let e=window.app.plugins.getPlugin("periodic-notes");return e&&((r=(n=e.settings)==null?void 0:n[t])==null?void 0:r.enabled)}function Es(){var t,e,n,r;try{let{internalPlugins:o,plugins:a}=window.app;if(ks("daily")){let{format:d,folder:h,template:m}=((e=(t=a.getPlugin("periodic-notes"))==null?void 0:t.settings)==null?void 0:e.daily)||{};return{format:d||Mc,folder:(h==null?void 0:h.trim())||"",template:(m==null?void 0:m.trim())||""}}let{folder:l,format:c,template:f}=((r=(n=o.getPluginById("daily-notes"))==null?void 0:n.instance)==null?void 0:r.options)||{};return{format:c||Mc,folder:(l==null?void 0:l.trim())||"",template:(f==null?void 0:f.trim())||""}}catch(o){console.info("No custom daily note settings found!",o)}}function xs(){var t,e,n,r,o,a,l;try{let c=window.app.plugins,f=(t=c.getPlugin("calendar"))==null?void 0:t.options,d=(n=(e=c.getPlugin("periodic-notes"))==null?void 0:e.settings)==null?void 0:n.weekly;if(ks("weekly"))return{format:d.format||Oc,folder:((r=d.folder)==null?void 0:r.trim())||"",template:((o=d.template)==null?void 0:o.trim())||""};let h=f||{};return{format:h.weeklyNoteFormat||Oc,folder:((a=h.weeklyNoteFolder)==null?void 0:a.trim())||"",template:((l=h.weeklyNoteTemplate)==null?void 0:l.trim())||""}}catch(c){console.info("No custom weekly note settings found!",c)}}function Cs(){var e,n,r,o;let t=window.app.plugins;try{let a=ks("monthly")&&((n=(e=t.getPlugin("periodic-notes"))==null?void 0:e.settings)==null?void 0:n.monthly)||{};return{format:a.format||Nh,folder:((r=a.folder)==null?void 0:r.trim())||"",template:((o=a.template)==null?void 0:o.trim())||""}}catch(a){console.info("No custom monthly note settings found!",a)}}function Ts(){var e,n,r,o;let t=window.app.plugins;try{let a=ks("quarterly")&&((n=(e=t.getPlugin("periodic-notes"))==null?void 0:e.settings)==null?void 0:n.quarterly)||{};return{format:a.format||Ph,folder:((r=a.folder)==null?void 0:r.trim())||"",template:((o=a.template)==null?void 0:o.trim())||""}}catch(a){console.info("No custom quarterly note settings found!",a)}}function Ss(){var e,n,r,o;let t=window.app.plugins;try{let a=ks("yearly")&&((n=(e=t.getPlugin("periodic-notes"))==null?void 0:e.settings)==null?void 0:n.yearly)||{};return{format:a.format||Ih,folder:((r=a.folder)==null?void 0:r.trim())||"",template:((o=a.template)==null?void 0:o.trim())||""}}catch(a){console.info("No custom yearly note settings found!",a)}}function Rh(...t){let e=[];for(let r=0,o=t.length;r<o;r++)e=e.concat(t[r].split("/"));let n=[];for(let r=0,o=e.length;r<o;r++){let a=e[r];!a||a==="."||n.push(a)}return e[0]===""&&n.unshift(""),n.join("/")}function bC(t){let e=t.substring(t.lastIndexOf("/")+1);return e.lastIndexOf(".")!=-1&&(e=e.substring(0,e.lastIndexOf("."))),e}function kC(t){return G(this,null,function*(){let e=t.replace(/\\/g,"/").split("/");if(e.pop(),e.length){let n=Rh(...e);window.app.vault.getAbstractFileByPath(n)||(yield window.app.vault.createFolder(n))}})}function Ds(t,e){return G(this,null,function*(){e.endsWith(".md")||(e+=".md");let n=st.normalizePath(Rh(t,e));return yield kC(n),n})}function bo(t){return G(this,null,function*(){let{metadataCache:e,vault:n}=window.app,r=st.normalizePath(t);if(r==="/")return Promise.resolve(["",null]);try{let o=e.getFirstLinkpathDest(r,""),a=yield n.cachedRead(o),l=window.app.foldManager.load(o);return[a,l]}catch(o){return console.error(`Failed to read the daily note template '${r}'`,o),new st.Notice("Failed to read the daily note template"),["",null]}})}function Zn(t,e="day"){let n=t.clone().startOf(e).format();return`${e}-${n}`}function Fh(t){return t.replace(/\[[^\]]*\]/g,"")}function EC(t,e){if(e==="week"){let n=Fh(t);return/w{1,2}/i.test(n)&&(/M{1,4}/.test(n)||/D{1,4}/.test(n))}return!1}function ko(t,e){return Yh(t.basename,e)}function xC(t,e){return Yh(bC(t),e)}function Yh(t,e){let r={day:Es,week:xs,month:Cs,quarter:Ts,year:Ss}[e]().format.split("/").pop(),o=window.moment(t,r,!0);if(!o.isValid())return null;if(EC(r,e)&&e==="week"){let a=Fh(r);if(/w{1,2}/i.test(a))return window.moment(t,r.replace(/M{1,4}/g,"").replace(/D{1,4}/g,""),!1)}return o}var Gh=class extends Error{};function Wh(t){return G(this,null,function*(){let e=window.app,{vault:n}=e,r=window.moment,{template:o,format:a,folder:l}=Es(),[c,f]=yield bo(o),d=t.format(a),h=yield Ds(l,d);try{let m=yield n.create(h,c.replace(/{{\s*date\s*}}/gi,d).replace(/{{\s*time\s*}}/gi,r().format("HH:mm")).replace(/{{\s*title\s*}}/gi,d).replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(g,y,_,x,k,E)=>{let T=r(),D=t.clone().set({hour:T.get("hour"),minute:T.get("minute"),second:T.get("second")});return _&&D.add(parseInt(x,10),k),E?D.format(E.substring(1).trim()):D.format(a)}).replace(/{{\s*yesterday\s*}}/gi,t.clone().subtract(1,"day").format(a)).replace(/{{\s*tomorrow\s*}}/gi,t.clone().add(1,"d").format(a)));return e.foldManager.save(m,f),m}catch(m){console.error(`Failed to create file: '${h}'`,m),new st.Notice("Unable to create new file.")}})}function CC(t,e){var n;return(n=e[Zn(t,"day")])!=null?n:null}function TC(){let{vault:t}=window.app,{folder:e}=Es(),n=t.getAbstractFileByPath(st.normalizePath(e));if(!n)throw new Gh("Failed to find daily notes folder");let r={};return st.Vault.recurseChildren(n,o=>{if(o instanceof st.TFile){let a=ko(o,"day");if(a){let l=Zn(a,"day");r[l]=o}}}),r}var Uh=class extends Error{};function SC(){let{moment:t}=window,e=t.localeData()._week.dow,n=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];for(;e;)n.push(n.shift()),e--;return n}function DC(t){return SC().indexOf(t.toLowerCase())}function Bh(t){return G(this,null,function*(){let{vault:e}=window.app,{template:n,format:r,folder:o}=xs(),[a,l]=yield bo(n),c=t.format(r),f=yield Ds(o,c);try{let d=yield e.create(f,a.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(h,m,g,y,_,x)=>{let k=window.moment(),E=t.clone().set({hour:k.get("hour"),minute:k.get("minute"),second:k.get("second")});return g&&E.add(parseInt(y,10),_),x?E.format(x.substring(1).trim()):E.format(r)}).replace(/{{\s*title\s*}}/gi,c).replace(/{{\s*time\s*}}/gi,window.moment().format("HH:mm")).replace(/{{\s*(sunday|monday|tuesday|wednesday|thursday|friday|saturday)\s*:(.*?)}}/gi,(h,m,g)=>{let y=DC(m);return t.weekday(y).format(g.trim())}));return window.app.foldManager.save(d,l),d}catch(d){console.error(`Failed to create file: '${f}'`,d),new st.Notice("Unable to create new file.")}})}function MC(t,e){var n;return(n=e[Zn(t,"week")])!=null?n:null}function OC(){let t={};if(!Vh())return t;let{vault:e}=window.app,{folder:n}=xs(),r=e.getAbstractFileByPath(st.normalizePath(n));if(!r)throw new Uh("Failed to find weekly notes folder");return st.Vault.recurseChildren(r,o=>{if(o instanceof st.TFile){let a=ko(o,"week");if(a){let l=Zn(a,"week");t[l]=o}}}),t}var jh=class extends Error{};function Hh(t){return G(this,null,function*(){let{vault:e}=window.app,{template:n,format:r,folder:o}=Cs(),[a,l]=yield bo(n),c=t.format(r),f=yield Ds(o,c);try{let d=yield e.create(f,a.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(h,m,g,y,_,x)=>{let k=window.moment(),E=t.clone().set({hour:k.get("hour"),minute:k.get("minute"),second:k.get("second")});return g&&E.add(parseInt(y,10),_),x?E.format(x.substring(1).trim()):E.format(r)}).replace(/{{\s*date\s*}}/gi,c).replace(/{{\s*time\s*}}/gi,window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi,c));return window.app.foldManager.save(d,l),d}catch(d){console.error(`Failed to create file: '${f}'`,d),new st.Notice("Unable to create new file.")}})}function AC(t,e){var n;return(n=e[Zn(t,"month")])!=null?n:null}function LC(){let t={};if(!Kh())return t;let{vault:e}=window.app,{folder:n}=Cs(),r=e.getAbstractFileByPath(st.normalizePath(n));if(!r)throw new jh("Failed to find monthly notes folder");return st.Vault.recurseChildren(r,o=>{if(o instanceof st.TFile){let a=ko(o,"month");if(a){let l=Zn(a,"month");t[l]=o}}}),t}var zh=class extends Error{};function NC(t){return G(this,null,function*(){let{vault:e}=window.app,{template:n,format:r,folder:o}=Ts(),[a,l]=yield bo(n),c=t.format(r),f=yield Ds(o,c);try{let d=yield e.create(f,a.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(h,m,g,y,_,x)=>{let k=window.moment(),E=t.clone().set({hour:k.get("hour"),minute:k.get("minute"),second:k.get("second")});return g&&E.add(parseInt(y,10),_),x?E.format(x.substring(1).trim()):E.format(r)}).replace(/{{\s*date\s*}}/gi,c).replace(/{{\s*time\s*}}/gi,window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi,c));return window.app.foldManager.save(d,l),d}catch(d){console.error(`Failed to create file: '${f}'`,d),new st.Notice("Unable to create new file.")}})}function PC(t,e){var n;return(n=e[Zn(t,"quarter")])!=null?n:null}function IC(){let t={};if(!Zh())return t;let{vault:e}=window.app,{folder:n}=Ts(),r=e.getAbstractFileByPath(st.normalizePath(n));if(!r)throw new zh("Failed to find quarterly notes folder");return st.Vault.recurseChildren(r,o=>{if(o instanceof st.TFile){let a=ko(o,"quarter");if(a){let l=Zn(a,"quarter");t[l]=o}}}),t}var qh=class extends Error{};function RC(t){return G(this,null,function*(){let{vault:e}=window.app,{template:n,format:r,folder:o}=Ss(),[a,l]=yield bo(n),c=t.format(r),f=yield Ds(o,c);try{let d=yield e.create(f,a.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(h,m,g,y,_,x)=>{let k=window.moment(),E=t.clone().set({hour:k.get("hour"),minute:k.get("minute"),second:k.get("second")});return g&&E.add(parseInt(y,10),_),x?E.format(x.substring(1).trim()):E.format(r)}).replace(/{{\s*date\s*}}/gi,c).replace(/{{\s*time\s*}}/gi,window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi,c));return window.app.foldManager.save(d,l),d}catch(d){console.error(`Failed to create file: '${f}'`,d),new st.Notice("Unable to create new file.")}})}function FC(t,e){var n;return(n=e[Zn(t,"year")])!=null?n:null}function YC(){let t={};if(!Xh())return t;let{vault:e}=window.app,{folder:n}=Ss(),r=e.getAbstractFileByPath(st.normalizePath(n));if(!r)throw new qh("Failed to find yearly notes folder");return st.Vault.recurseChildren(r,o=>{if(o instanceof st.TFile){let a=ko(o,"year");if(a){let l=Zn(a,"year");t[l]=o}}}),t}function GC(){var r,o;let{app:t}=window,e=t.internalPlugins.plugins["daily-notes"];if(e&&e.enabled)return!0;let n=t.plugins.getPlugin("periodic-notes");return n&&((o=(r=n.settings)==null?void 0:r.daily)==null?void 0:o.enabled)}function Vh(){var n,r;let{app:t}=window;if(t.plugins.getPlugin("calendar"))return!0;let e=t.plugins.getPlugin("periodic-notes");return e&&((r=(n=e.settings)==null?void 0:n.weekly)==null?void 0:r.enabled)}function Kh(){var n,r;let{app:t}=window,e=t.plugins.getPlugin("periodic-notes");return e&&((r=(n=e.settings)==null?void 0:n.monthly)==null?void 0:r.enabled)}function Zh(){var n,r;let{app:t}=window,e=t.plugins.getPlugin("periodic-notes");return e&&((r=(n=e.settings)==null?void 0:n.quarterly)==null?void 0:r.enabled)}function Xh(){var n,r;let{app:t}=window,e=t.plugins.getPlugin("periodic-notes");return e&&((r=(n=e.settings)==null?void 0:n.yearly)==null?void 0:r.enabled)}function WC(t){return{day:Es,week:xs,month:Cs,quarter:Ts,year:Ss}[t]()}function UC(t,e){return{day:Wh,month:Hh,week:Bh}[t](e)}De.DEFAULT_DAILY_NOTE_FORMAT=Mc;De.DEFAULT_MONTHLY_NOTE_FORMAT=Nh;De.DEFAULT_QUARTERLY_NOTE_FORMAT=Ph;De.DEFAULT_WEEKLY_NOTE_FORMAT=Oc;De.DEFAULT_YEARLY_NOTE_FORMAT=Ih;De.appHasDailyNotesPluginLoaded=GC;De.appHasMonthlyNotesPluginLoaded=Kh;De.appHasQuarterlyNotesPluginLoaded=Zh;De.appHasWeeklyNotesPluginLoaded=Vh;De.appHasYearlyNotesPluginLoaded=Xh;De.createDailyNote=Wh;De.createMonthlyNote=Hh;De.createPeriodicNote=UC;De.createQuarterlyNote=NC;De.createWeeklyNote=Bh;De.createYearlyNote=RC;De.getAllDailyNotes=TC;De.getAllMonthlyNotes=LC;De.getAllQuarterlyNotes=IC;De.getAllWeeklyNotes=OC;De.getAllYearlyNotes=YC;De.getDailyNote=CC;De.getDailyNoteSettings=Es;De.getDateFromFile=ko;De.getDateFromPath=xC;De.getDateUID=Zn;De.getMonthlyNote=AC;De.getMonthlyNoteSettings=Cs;De.getPeriodicNoteSettings=WC;De.getQuarterlyNote=PC;De.getQuarterlyNoteSettings=Ts;De.getTemplateInfo=bo;De.getWeeklyNote=MC;De.getWeeklyNoteSettings=xs;De.getYearlyNote=FC;De.getYearlyNoteSettings=Ss});var Mr=Ci((Eo,Ms)=>{(function(){var t,e="4.17.21",n=200,r="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",c=500,f="__lodash_placeholder__",d=1,h=2,m=4,g=1,y=2,_=1,x=2,k=4,E=8,T=16,D=32,P=64,M=128,R=256,Q=512,L=30,j="...",ee=800,K=16,ae=1,xe=2,J=3,ie=1/0,Z=9007199254740991,z=17976931348623157e292,X=0/0,_e=4294967295,tt=_e-1,Fe=_e>>>1,at=[["ary",M],["bind",_],["bindKey",x],["curry",E],["curryRight",T],["flip",Q],["partial",D],["partialRight",P],["rearg",R]],ze="[object Arguments]",rn="[object Array]",Zt="[object AsyncFunction]",lt="[object Boolean]",pn="[object Date]",on="[object DOMException]",_t="[object Error]",ft="[object Function]",Be="[object GeneratorFunction]",Xe="[object Map]",Wr="[object Number]",Bl="[object Null]",Wn="[object Object]",Vo="[object Promise]",$s="[object Proxy]",mi="[object RegExp]",hn="[object Set]",mn="[object String]",pr="[object Symbol]",ea="[object Undefined]",Ur="[object WeakMap]",Ko="[object WeakSet]",Br="[object ArrayBuffer]",hr="[object DataView]",eo="[object Float32Array]",to="[object Float64Array]",jl="[object Int8Array]",Hl="[object Int16Array]",zl="[object Int32Array]",ql="[object Uint8Array]",Vl="[object Uint8ClampedArray]",Kl="[object Uint16Array]",Zl="[object Uint32Array]",Vy=/\b__p \+= '';/g,Ky=/\b(__p \+=) '' \+/g,Zy=/(__e\(.*?\)|\b__t\)) \+\n'';/g,bf=/&(?:amp|lt|gt|quot|#39);/g,kf=/[&<>"']/g,Xy=RegExp(bf.source),Qy=RegExp(kf.source),Jy=/<%-([\s\S]+?)%>/g,$y=/<%([\s\S]+?)%>/g,Ef=/<%=([\s\S]+?)%>/g,e_=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,t_=/^\w*$/,n_=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Xl=/[\\^$.*+?()[\]{}|]/g,r_=RegExp(Xl.source),Ql=/^\s+/,i_=/\s/,o_=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,s_=/\{\n\/\* \[wrapped with (.+)\] \*/,a_=/,? & /,l_=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,u_=/[()=,{}\[\]\/\s]/,c_=/\\(\\)?/g,f_=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,xf=/\w*$/,d_=/^[-+]0x[0-9a-f]+$/i,p_=/^0b[01]+$/i,h_=/^\[object .+?Constructor\]$/,m_=/^0o[0-7]+$/i,g_=/^(?:0|[1-9]\d*)$/,v_=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ta=/($^)/,y_=/['\n\r\u2028\u2029\\]/g,na="\\ud800-\\udfff",__="\\u0300-\\u036f",w_="\\ufe20-\\ufe2f",b_="\\u20d0-\\u20ff",Cf=__+w_+b_,Tf="\\u2700-\\u27bf",Sf="a-z\\xdf-\\xf6\\xf8-\\xff",k_="\\xac\\xb1\\xd7\\xf7",E_="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",x_="\\u2000-\\u206f",C_=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Df="A-Z\\xc0-\\xd6\\xd8-\\xde",Mf="\\ufe0e\\ufe0f",Of=k_+E_+x_+C_,Jl="['\u2019]",T_="["+na+"]",Af="["+Of+"]",ra="["+Cf+"]",Lf="\\d+",S_="["+Tf+"]",Nf="["+Sf+"]",Pf="[^"+na+Of+Lf+Tf+Sf+Df+"]",$l="\\ud83c[\\udffb-\\udfff]",D_="(?:"+ra+"|"+$l+")",If="[^"+na+"]",eu="(?:\\ud83c[\\udde6-\\uddff]){2}",tu="[\\ud800-\\udbff][\\udc00-\\udfff]",no="["+Df+"]",Rf="\\u200d",Ff="(?:"+Nf+"|"+Pf+")",M_="(?:"+no+"|"+Pf+")",Yf="(?:"+Jl+"(?:d|ll|m|re|s|t|ve))?",Gf="(?:"+Jl+"(?:D|LL|M|RE|S|T|VE))?",Wf=D_+"?",Uf="["+Mf+"]?",O_="(?:"+Rf+"(?:"+[If,eu,tu].join("|")+")"+Uf+Wf+")*",A_="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",L_="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Bf=Uf+Wf+O_,N_="(?:"+[S_,eu,tu].join("|")+")"+Bf,P_="(?:"+[If+ra+"?",ra,eu,tu,T_].join("|")+")",I_=RegExp(Jl,"g"),R_=RegExp(ra,"g"),nu=RegExp($l+"(?="+$l+")|"+P_+Bf,"g"),F_=RegExp([no+"?"+Nf+"+"+Yf+"(?="+[Af,no,"$"].join("|")+")",M_+"+"+Gf+"(?="+[Af,no+Ff,"$"].join("|")+")",no+"?"+Ff+"+"+Yf,no+"+"+Gf,L_,A_,Lf,N_].join("|"),"g"),Y_=RegExp("["+Rf+na+Cf+Mf+"]"),G_=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,W_=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],U_=-1,$e={};$e[eo]=$e[to]=$e[jl]=$e[Hl]=$e[zl]=$e[ql]=$e[Vl]=$e[Kl]=$e[Zl]=!0,$e[ze]=$e[rn]=$e[Br]=$e[lt]=$e[hr]=$e[pn]=$e[_t]=$e[ft]=$e[Xe]=$e[Wr]=$e[Wn]=$e[mi]=$e[hn]=$e[mn]=$e[Ur]=!1;var Qe={};Qe[ze]=Qe[rn]=Qe[Br]=Qe[hr]=Qe[lt]=Qe[pn]=Qe[eo]=Qe[to]=Qe[jl]=Qe[Hl]=Qe[zl]=Qe[Xe]=Qe[Wr]=Qe[Wn]=Qe[mi]=Qe[hn]=Qe[mn]=Qe[pr]=Qe[ql]=Qe[Vl]=Qe[Kl]=Qe[Zl]=!0,Qe[_t]=Qe[ft]=Qe[Ur]=!1;var B_={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},j_={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},H_={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},z_={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},q_=parseFloat,V_=parseInt,jf=typeof global=="object"&&global&&global.Object===Object&&global,K_=typeof self=="object"&&self&&self.Object===Object&&self,St=jf||K_||Function("return this")(),ru=typeof Eo=="object"&&Eo&&!Eo.nodeType&&Eo,gi=ru&&typeof Ms=="object"&&Ms&&!Ms.nodeType&&Ms,Hf=gi&&gi.exports===ru,iu=Hf&&jf.process,Tn=function(){try{var O=gi&&gi.require&&gi.require("util").types;return O||iu&&iu.binding&&iu.binding("util")}catch(W){}}(),zf=Tn&&Tn.isArrayBuffer,qf=Tn&&Tn.isDate,Vf=Tn&&Tn.isMap,Kf=Tn&&Tn.isRegExp,Zf=Tn&&Tn.isSet,Xf=Tn&&Tn.isTypedArray;function gn(O,W,F){switch(F.length){case 0:return O.call(W);case 1:return O.call(W,F[0]);case 2:return O.call(W,F[0],F[1]);case 3:return O.call(W,F[0],F[1],F[2])}return O.apply(W,F)}function Z_(O,W,F,ne){for(var ve=-1,Ye=O==null?0:O.length;++ve<Ye;){var wt=O[ve];W(ne,wt,F(wt),O)}return ne}function Sn(O,W){for(var F=-1,ne=O==null?0:O.length;++F<ne&&W(O[F],F,O)!==!1;);return O}function X_(O,W){for(var F=O==null?0:O.length;F--&&W(O[F],F,O)!==!1;);return O}function Qf(O,W){for(var F=-1,ne=O==null?0:O.length;++F<ne;)if(!W(O[F],F,O))return!1;return!0}function jr(O,W){for(var F=-1,ne=O==null?0:O.length,ve=0,Ye=[];++F<ne;){var wt=O[F];W(wt,F,O)&&(Ye[ve++]=wt)}return Ye}function ia(O,W){var F=O==null?0:O.length;return!!F&&ro(O,W,0)>-1}function ou(O,W,F){for(var ne=-1,ve=O==null?0:O.length;++ne<ve;)if(F(W,O[ne]))return!0;return!1}function nt(O,W){for(var F=-1,ne=O==null?0:O.length,ve=Array(ne);++F<ne;)ve[F]=W(O[F],F,O);return ve}function Hr(O,W){for(var F=-1,ne=W.length,ve=O.length;++F<ne;)O[ve+F]=W[F];return O}function su(O,W,F,ne){var ve=-1,Ye=O==null?0:O.length;for(ne&&Ye&&(F=O[++ve]);++ve<Ye;)F=W(F,O[ve],ve,O);return F}function Q_(O,W,F,ne){var ve=O==null?0:O.length;for(ne&&ve&&(F=O[--ve]);ve--;)F=W(F,O[ve],ve,O);return F}function au(O,W){for(var F=-1,ne=O==null?0:O.length;++F<ne;)if(W(O[F],F,O))return!0;return!1}var J_=lu("length");function $_(O){return O.split("")}function ew(O){return O.match(l_)||[]}function Jf(O,W,F){var ne;return F(O,function(ve,Ye,wt){if(W(ve,Ye,wt))return ne=Ye,!1}),ne}function oa(O,W,F,ne){for(var ve=O.length,Ye=F+(ne?1:-1);ne?Ye--:++Ye<ve;)if(W(O[Ye],Ye,O))return Ye;return-1}function ro(O,W,F){return W===W?dw(O,W,F):oa(O,$f,F)}function tw(O,W,F,ne){for(var ve=F-1,Ye=O.length;++ve<Ye;)if(ne(O[ve],W))return ve;return-1}function $f(O){return O!==O}function ed(O,W){var F=O==null?0:O.length;return F?cu(O,W)/F:X}function lu(O){return function(W){return W==null?t:W[O]}}function uu(O){return function(W){return O==null?t:O[W]}}function td(O,W,F,ne,ve){return ve(O,function(Ye,wt,qe){F=ne?(ne=!1,Ye):W(F,Ye,wt,qe)}),F}function nw(O,W){var F=O.length;for(O.sort(W);F--;)O[F]=O[F].value;return O}function cu(O,W){for(var F,ne=-1,ve=O.length;++ne<ve;){var Ye=W(O[ne]);Ye!==t&&(F=F===t?Ye:F+Ye)}return F}function fu(O,W){for(var F=-1,ne=Array(O);++F<O;)ne[F]=W(F);return ne}function rw(O,W){return nt(W,function(F){return[F,O[F]]})}function nd(O){return O&&O.slice(0,sd(O)+1).replace(Ql,"")}function vn(O){return function(W){return O(W)}}function du(O,W){return nt(W,function(F){return O[F]})}function Zo(O,W){return O.has(W)}function rd(O,W){for(var F=-1,ne=O.length;++F<ne&&ro(W,O[F],0)>-1;);return F}function id(O,W){for(var F=O.length;F--&&ro(W,O[F],0)>-1;);return F}function iw(O,W){for(var F=O.length,ne=0;F--;)O[F]===W&&++ne;return ne}var ow=uu(B_),sw=uu(j_);function aw(O){return"\\"+z_[O]}function lw(O,W){return O==null?t:O[W]}function io(O){return Y_.test(O)}function uw(O){return G_.test(O)}function cw(O){for(var W,F=[];!(W=O.next()).done;)F.push(W.value);return F}function pu(O){var W=-1,F=Array(O.size);return O.forEach(function(ne,ve){F[++W]=[ve,ne]}),F}function od(O,W){return function(F){return O(W(F))}}function zr(O,W){for(var F=-1,ne=O.length,ve=0,Ye=[];++F<ne;){var wt=O[F];(wt===W||wt===f)&&(O[F]=f,Ye[ve++]=F)}return Ye}function sa(O){var W=-1,F=Array(O.size);return O.forEach(function(ne){F[++W]=ne}),F}function fw(O){var W=-1,F=Array(O.size);return O.forEach(function(ne){F[++W]=[ne,ne]}),F}function dw(O,W,F){for(var ne=F-1,ve=O.length;++ne<ve;)if(O[ne]===W)return ne;return-1}function pw(O,W,F){for(var ne=F+1;ne--;)if(O[ne]===W)return ne;return ne}function oo(O){return io(O)?mw(O):J_(O)}function Un(O){return io(O)?gw(O):$_(O)}function sd(O){for(var W=O.length;W--&&i_.test(O.charAt(W)););return W}var hw=uu(H_);function mw(O){for(var W=nu.lastIndex=0;nu.test(O);)++W;return W}function gw(O){return O.match(nu)||[]}function vw(O){return O.match(F_)||[]}var yw=function O(W){W=W==null?St:qr.defaults(St.Object(),W,qr.pick(St,W_));var F=W.Array,ne=W.Date,ve=W.Error,Ye=W.Function,wt=W.Math,qe=W.Object,hu=W.RegExp,_w=W.String,Dn=W.TypeError,aa=F.prototype,ww=Ye.prototype,so=qe.prototype,la=W["__core-js_shared__"],ua=ww.toString,je=so.hasOwnProperty,bw=0,ad=function(){var i=/[^.]+$/.exec(la&&la.keys&&la.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}(),ca=so.toString,kw=ua.call(qe),Ew=St._,xw=hu("^"+ua.call(je).replace(Xl,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),fa=Hf?W.Buffer:t,Vr=W.Symbol,da=W.Uint8Array,ld=fa?fa.allocUnsafe:t,pa=od(qe.getPrototypeOf,qe),ud=qe.create,cd=so.propertyIsEnumerable,ha=aa.splice,fd=Vr?Vr.isConcatSpreadable:t,Xo=Vr?Vr.iterator:t,vi=Vr?Vr.toStringTag:t,ma=function(){try{var i=ki(qe,"defineProperty");return i({},"",{}),i}catch(s){}}(),Cw=W.clearTimeout!==St.clearTimeout&&W.clearTimeout,Tw=ne&&ne.now!==St.Date.now&&ne.now,Sw=W.setTimeout!==St.setTimeout&&W.setTimeout,ga=wt.ceil,va=wt.floor,mu=qe.getOwnPropertySymbols,Dw=fa?fa.isBuffer:t,dd=W.isFinite,Mw=aa.join,Ow=od(qe.keys,qe),bt=wt.max,Bt=wt.min,Aw=ne.now,Lw=W.parseInt,pd=wt.random,Nw=aa.reverse,gu=ki(W,"DataView"),Qo=ki(W,"Map"),vu=ki(W,"Promise"),ao=ki(W,"Set"),Jo=ki(W,"WeakMap"),$o=ki(qe,"create"),ya=Jo&&new Jo,lo={},Pw=Ei(gu),Iw=Ei(Qo),Rw=Ei(vu),Fw=Ei(ao),Yw=Ei(Jo),_a=Vr?Vr.prototype:t,es=_a?_a.valueOf:t,hd=_a?_a.toString:t;function w(i){if(ut(i)&&!we(i)&&!(i instanceof Ne)){if(i instanceof Mn)return i;if(je.call(i,"__wrapped__"))return mp(i)}return new Mn(i)}var uo=function(){function i(){}return function(s){if(!it(s))return{};if(ud)return ud(s);i.prototype=s;var u=new i;return i.prototype=t,u}}();function wa(){}function Mn(i,s){this.__wrapped__=i,this.__actions__=[],this.__chain__=!!s,this.__index__=0,this.__values__=t}w.templateSettings={escape:Jy,evaluate:$y,interpolate:Ef,variable:"",imports:{_:w}},w.prototype=wa.prototype,w.prototype.constructor=w,Mn.prototype=uo(wa.prototype),Mn.prototype.constructor=Mn;function Ne(i){this.__wrapped__=i,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=_e,this.__views__=[]}function Gw(){var i=new Ne(this.__wrapped__);return i.__actions__=sn(this.__actions__),i.__dir__=this.__dir__,i.__filtered__=this.__filtered__,i.__iteratees__=sn(this.__iteratees__),i.__takeCount__=this.__takeCount__,i.__views__=sn(this.__views__),i}function Ww(){if(this.__filtered__){var i=new Ne(this);i.__dir__=-1,i.__filtered__=!0}else i=this.clone(),i.__dir__*=-1;return i}function Uw(){var i=this.__wrapped__.value(),s=this.__dir__,u=we(i),p=s<0,v=u?i.length:0,b=$0(0,v,this.__views__),C=b.start,S=b.end,A=S-C,U=p?S:C-1,B=this.__iteratees__,H=B.length,$=0,oe=Bt(A,this.__takeCount__);if(!u||!p&&v==A&&oe==A)return Yd(i,this.__actions__);var he=[];e:for(;A--&&$<oe;){U+=s;for(var Ce=-1,me=i[U];++Ce<H;){var Ae=B[Ce],Ie=Ae.iteratee,wn=Ae.type,Jt=Ie(me);if(wn==xe)me=Jt;else if(!Jt){if(wn==ae)continue e;break e}}he[$++]=me}return he}Ne.prototype=uo(wa.prototype),Ne.prototype.constructor=Ne;function yi(i){var s=-1,u=i==null?0:i.length;for(this.clear();++s<u;){var p=i[s];this.set(p[0],p[1])}}function Bw(){this.__data__=$o?$o(null):{},this.size=0}function jw(i){var s=this.has(i)&&delete this.__data__[i];return this.size-=s?1:0,s}function Hw(i){var s=this.__data__;if($o){var u=s[i];return u===l?t:u}return je.call(s,i)?s[i]:t}function zw(i){var s=this.__data__;return $o?s[i]!==t:je.call(s,i)}function qw(i,s){var u=this.__data__;return this.size+=this.has(i)?0:1,u[i]=$o&&s===t?l:s,this}yi.prototype.clear=Bw,yi.prototype.delete=jw,yi.prototype.get=Hw,yi.prototype.has=zw,yi.prototype.set=qw;function mr(i){var s=-1,u=i==null?0:i.length;for(this.clear();++s<u;){var p=i[s];this.set(p[0],p[1])}}function Vw(){this.__data__=[],this.size=0}function Kw(i){var s=this.__data__,u=ba(s,i);if(u<0)return!1;var p=s.length-1;return u==p?s.pop():ha.call(s,u,1),--this.size,!0}function Zw(i){var s=this.__data__,u=ba(s,i);return u<0?t:s[u][1]}function Xw(i){return ba(this.__data__,i)>-1}function Qw(i,s){var u=this.__data__,p=ba(u,i);return p<0?(++this.size,u.push([i,s])):u[p][1]=s,this}mr.prototype.clear=Vw,mr.prototype.delete=Kw,mr.prototype.get=Zw,mr.prototype.has=Xw,mr.prototype.set=Qw;function gr(i){var s=-1,u=i==null?0:i.length;for(this.clear();++s<u;){var p=i[s];this.set(p[0],p[1])}}function Jw(){this.size=0,this.__data__={hash:new yi,map:new(Qo||mr),string:new yi}}function $w(i){var s=Na(this,i).delete(i);return this.size-=s?1:0,s}function e0(i){return Na(this,i).get(i)}function t0(i){return Na(this,i).has(i)}function n0(i,s){var u=Na(this,i),p=u.size;return u.set(i,s),this.size+=u.size==p?0:1,this}gr.prototype.clear=Jw,gr.prototype.delete=$w,gr.prototype.get=e0,gr.prototype.has=t0,gr.prototype.set=n0;function _i(i){var s=-1,u=i==null?0:i.length;for(this.__data__=new gr;++s<u;)this.add(i[s])}function r0(i){return this.__data__.set(i,l),this}function i0(i){return this.__data__.has(i)}_i.prototype.add=_i.prototype.push=r0,_i.prototype.has=i0;function Bn(i){var s=this.__data__=new mr(i);this.size=s.size}function o0(){this.__data__=new mr,this.size=0}function s0(i){var s=this.__data__,u=s.delete(i);return this.size=s.size,u}function a0(i){return this.__data__.get(i)}function l0(i){return this.__data__.has(i)}function u0(i,s){var u=this.__data__;if(u instanceof mr){var p=u.__data__;if(!Qo||p.length<n-1)return p.push([i,s]),this.size=++u.size,this;u=this.__data__=new gr(p)}return u.set(i,s),this.size=u.size,this}Bn.prototype.clear=o0,Bn.prototype.delete=s0,Bn.prototype.get=a0,Bn.prototype.has=l0,Bn.prototype.set=u0;function md(i,s){var u=we(i),p=!u&&xi(i),v=!u&&!p&&Jr(i),b=!u&&!p&&!v&&ho(i),C=u||p||v||b,S=C?fu(i.length,_w):[],A=S.length;for(var U in i)(s||je.call(i,U))&&!(C&&(U=="length"||v&&(U=="offset"||U=="parent")||b&&(U=="buffer"||U=="byteLength"||U=="byteOffset")||wr(U,A)))&&S.push(U);return S}function gd(i){var s=i.length;return s?i[Du(0,s-1)]:t}function c0(i,s){return Pa(sn(i),wi(s,0,i.length))}function f0(i){return Pa(sn(i))}function yu(i,s,u){(u!==t&&!jn(i[s],u)||u===t&&!(s in i))&&vr(i,s,u)}function ts(i,s,u){var p=i[s];(!(je.call(i,s)&&jn(p,u))||u===t&&!(s in i))&&vr(i,s,u)}function ba(i,s){for(var u=i.length;u--;)if(jn(i[u][0],s))return u;return-1}function d0(i,s,u,p){return Kr(i,function(v,b,C){s(p,v,u(v),C)}),p}function vd(i,s){return i&&tr(s,Dt(s),i)}function p0(i,s){return i&&tr(s,ln(s),i)}function vr(i,s,u){s=="__proto__"&&ma?ma(i,s,{configurable:!0,enumerable:!0,value:u,writable:!0}):i[s]=u}function _u(i,s){for(var u=-1,p=s.length,v=F(p),b=i==null;++u<p;)v[u]=b?t:$u(i,s[u]);return v}function wi(i,s,u){return i===i&&(u!==t&&(i=i<=u?i:u),s!==t&&(i=i>=s?i:s)),i}function On(i,s,u,p,v,b){var C,S=s&d,A=s&h,U=s&m;if(u&&(C=v?u(i,p,v,b):u(i)),C!==t)return C;if(!it(i))return i;var B=we(i);if(B){if(C=tb(i),!S)return sn(i,C)}else{var H=jt(i),$=H==ft||H==Be;if(Jr(i))return Ud(i,S);if(H==Wn||H==ze||$&&!v){if(C=A||$?{}:sp(i),!S)return A?H0(i,p0(C,i)):j0(i,vd(C,i))}else{if(!Qe[H])return v?i:{};C=nb(i,H,S)}}b||(b=new Bn);var oe=b.get(i);if(oe)return oe;b.set(i,C),Ip(i)?i.forEach(function(me){C.add(On(me,s,u,me,i,b))}):Np(i)&&i.forEach(function(me,Ae){C.set(Ae,On(me,s,u,Ae,i,b))});var he=U?A?Gu:Yu:A?ln:Dt,Ce=B?t:he(i);return Sn(Ce||i,function(me,Ae){Ce&&(Ae=me,me=i[Ae]),ts(C,Ae,On(me,s,u,Ae,i,b))}),C}function h0(i){var s=Dt(i);return function(u){return yd(u,i,s)}}function yd(i,s,u){var p=u.length;if(i==null)return!p;for(i=qe(i);p--;){var v=u[p],b=s[v],C=i[v];if(C===t&&!(v in i)||!b(C))return!1}return!0}function _d(i,s,u){if(typeof i!="function")throw new Dn(o);return ls(function(){i.apply(t,u)},s)}function ns(i,s,u,p){var v=-1,b=ia,C=!0,S=i.length,A=[],U=s.length;if(!S)return A;u&&(s=nt(s,vn(u))),p?(b=ou,C=!1):s.length>=n&&(b=Zo,C=!1,s=new _i(s));e:for(;++v<S;){var B=i[v],H=u==null?B:u(B);if(B=p||B!==0?B:0,C&&H===H){for(var $=U;$--;)if(s[$]===H)continue e;A.push(B)}else b(s,H,p)||A.push(B)}return A}var Kr=qd(er),wd=qd(bu,!0);function m0(i,s){var u=!0;return Kr(i,function(p,v,b){return u=!!s(p,v,b),u}),u}function ka(i,s,u){for(var p=-1,v=i.length;++p<v;){var b=i[p],C=s(b);if(C!=null&&(S===t?C===C&&!_n(C):u(C,S)))var S=C,A=b}return A}function g0(i,s,u,p){var v=i.length;for(u=ke(u),u<0&&(u=-u>v?0:v+u),p=p===t||p>v?v:ke(p),p<0&&(p+=v),p=u>p?0:Fp(p);u<p;)i[u++]=s;return i}function bd(i,s){var u=[];return Kr(i,function(p,v,b){s(p,v,b)&&u.push(p)}),u}function Pt(i,s,u,p,v){var b=-1,C=i.length;for(u||(u=ib),v||(v=[]);++b<C;){var S=i[b];s>0&&u(S)?s>1?Pt(S,s-1,u,p,v):Hr(v,S):p||(v[v.length]=S)}return v}var wu=Vd(),kd=Vd(!0);function er(i,s){return i&&wu(i,s,Dt)}function bu(i,s){return i&&kd(i,s,Dt)}function Ea(i,s){return jr(s,function(u){return br(i[u])})}function bi(i,s){s=Xr(s,i);for(var u=0,p=s.length;i!=null&&u<p;)i=i[nr(s[u++])];return u&&u==p?i:t}function Ed(i,s,u){var p=s(i);return we(i)?p:Hr(p,u(i))}function Xt(i){return i==null?i===t?ea:Bl:vi&&vi in qe(i)?J0(i):fb(i)}function ku(i,s){return i>s}function v0(i,s){return i!=null&&je.call(i,s)}function y0(i,s){return i!=null&&s in qe(i)}function _0(i,s,u){return i>=Bt(s,u)&&i<bt(s,u)}function Eu(i,s,u){for(var p=u?ou:ia,v=i[0].length,b=i.length,C=b,S=F(b),A=1/0,U=[];C--;){var B=i[C];C&&s&&(B=nt(B,vn(s))),A=Bt(B.length,A),S[C]=!u&&(s||v>=120&&B.length>=120)?new _i(C&&B):t}B=i[0];var H=-1,$=S[0];e:for(;++H<v&&U.length<A;){var oe=B[H],he=s?s(oe):oe;if(oe=u||oe!==0?oe:0,!($?Zo($,he):p(U,he,u))){for(C=b;--C;){var Ce=S[C];if(!(Ce?Zo(Ce,he):p(i[C],he,u)))continue e}$&&$.push(he),U.push(oe)}}return U}function w0(i,s,u,p){return er(i,function(v,b,C){s(p,u(v),b,C)}),p}function rs(i,s,u){s=Xr(s,i),i=cp(i,s);var p=i==null?i:i[nr(Ln(s))];return p==null?t:gn(p,i,u)}function xd(i){return ut(i)&&Xt(i)==ze}function b0(i){return ut(i)&&Xt(i)==Br}function k0(i){return ut(i)&&Xt(i)==pn}function is(i,s,u,p,v){return i===s?!0:i==null||s==null||!ut(i)&&!ut(s)?i!==i&&s!==s:E0(i,s,u,p,is,v)}function E0(i,s,u,p,v,b){var C=we(i),S=we(s),A=C?rn:jt(i),U=S?rn:jt(s);A=A==ze?Wn:A,U=U==ze?Wn:U;var B=A==Wn,H=U==Wn,$=A==U;if($&&Jr(i)){if(!Jr(s))return!1;C=!0,B=!1}if($&&!B)return b||(b=new Bn),C||ho(i)?rp(i,s,u,p,v,b):X0(i,s,A,u,p,v,b);if(!(u&g)){var oe=B&&je.call(i,"__wrapped__"),he=H&&je.call(s,"__wrapped__");if(oe||he){var Ce=oe?i.value():i,me=he?s.value():s;return b||(b=new Bn),v(Ce,me,u,p,b)}}return $?(b||(b=new Bn),Q0(i,s,u,p,v,b)):!1}function x0(i){return ut(i)&&jt(i)==Xe}function xu(i,s,u,p){var v=u.length,b=v,C=!p;if(i==null)return!b;for(i=qe(i);v--;){var S=u[v];if(C&&S[2]?S[1]!==i[S[0]]:!(S[0]in i))return!1}for(;++v<b;){S=u[v];var A=S[0],U=i[A],B=S[1];if(C&&S[2]){if(U===t&&!(A in i))return!1}else{var H=new Bn;if(p)var $=p(U,B,A,i,s,H);if(!($===t?is(B,U,g|y,p,H):$))return!1}}return!0}function Cd(i){if(!it(i)||sb(i))return!1;var s=br(i)?xw:h_;return s.test(Ei(i))}function C0(i){return ut(i)&&Xt(i)==mi}function T0(i){return ut(i)&&jt(i)==hn}function S0(i){return ut(i)&&Wa(i.length)&&!!$e[Xt(i)]}function Td(i){return typeof i=="function"?i:i==null?un:typeof i=="object"?we(i)?Md(i[0],i[1]):Dd(i):Kp(i)}function Cu(i){if(!as(i))return Ow(i);var s=[];for(var u in qe(i))je.call(i,u)&&u!="constructor"&&s.push(u);return s}function D0(i){if(!it(i))return cb(i);var s=as(i),u=[];for(var p in i)p=="constructor"&&(s||!je.call(i,p))||u.push(p);return u}function Tu(i,s){return i<s}function Sd(i,s){var u=-1,p=an(i)?F(i.length):[];return Kr(i,function(v,b,C){p[++u]=s(v,b,C)}),p}function Dd(i){var s=Uu(i);return s.length==1&&s[0][2]?lp(s[0][0],s[0][1]):function(u){return u===i||xu(u,i,s)}}function Md(i,s){return ju(i)&&ap(s)?lp(nr(i),s):function(u){var p=$u(u,i);return p===t&&p===s?ec(u,i):is(s,p,g|y)}}function xa(i,s,u,p,v){i!==s&&wu(s,function(b,C){if(v||(v=new Bn),it(b))M0(i,s,C,u,xa,p,v);else{var S=p?p(zu(i,C),b,C+"",i,s,v):t;S===t&&(S=b),yu(i,C,S)}},ln)}function M0(i,s,u,p,v,b,C){var S=zu(i,u),A=zu(s,u),U=C.get(A);if(U){yu(i,u,U);return}var B=b?b(S,A,u+"",i,s,C):t,H=B===t;if(H){var $=we(A),oe=!$&&Jr(A),he=!$&&!oe&&ho(A);B=A,$||oe||he?we(S)?B=S:dt(S)?B=sn(S):oe?(H=!1,B=Ud(A,!0)):he?(H=!1,B=Bd(A,!0)):B=[]:us(A)||xi(A)?(B=S,xi(S)?B=Yp(S):(!it(S)||br(S))&&(B=sp(A))):H=!1}H&&(C.set(A,B),v(B,A,p,b,C),C.delete(A)),yu(i,u,B)}function Od(i,s){var u=i.length;if(!!u)return s+=s<0?u:0,wr(s,u)?i[s]:t}function Ad(i,s,u){s.length?s=nt(s,function(b){return we(b)?function(C){return bi(C,b.length===1?b[0]:b)}:b}):s=[un];var p=-1;s=nt(s,vn(ue()));var v=Sd(i,function(b,C,S){var A=nt(s,function(U){return U(b)});return{criteria:A,index:++p,value:b}});return nw(v,function(b,C){return B0(b,C,u)})}function O0(i,s){return Ld(i,s,function(u,p){return ec(i,p)})}function Ld(i,s,u){for(var p=-1,v=s.length,b={};++p<v;){var C=s[p],S=bi(i,C);u(S,C)&&os(b,Xr(C,i),S)}return b}function A0(i){return function(s){return bi(s,i)}}function Su(i,s,u,p){var v=p?tw:ro,b=-1,C=s.length,S=i;for(i===s&&(s=sn(s)),u&&(S=nt(i,vn(u)));++b<C;)for(var A=0,U=s[b],B=u?u(U):U;(A=v(S,B,A,p))>-1;)S!==i&&ha.call(S,A,1),ha.call(i,A,1);return i}function Nd(i,s){for(var u=i?s.length:0,p=u-1;u--;){var v=s[u];if(u==p||v!==b){var b=v;wr(v)?ha.call(i,v,1):Au(i,v)}}return i}function Du(i,s){return i+va(pd()*(s-i+1))}function L0(i,s,u,p){for(var v=-1,b=bt(ga((s-i)/(u||1)),0),C=F(b);b--;)C[p?b:++v]=i,i+=u;return C}function Mu(i,s){var u="";if(!i||s<1||s>Z)return u;do s%2&&(u+=i),s=va(s/2),s&&(i+=i);while(s);return u}function Se(i,s){return qu(up(i,s,un),i+"")}function N0(i){return gd(mo(i))}function P0(i,s){var u=mo(i);return Pa(u,wi(s,0,u.length))}function os(i,s,u,p){if(!it(i))return i;s=Xr(s,i);for(var v=-1,b=s.length,C=b-1,S=i;S!=null&&++v<b;){var A=nr(s[v]),U=u;if(A==="__proto__"||A==="constructor"||A==="prototype")return i;if(v!=C){var B=S[A];U=p?p(B,A,S):t,U===t&&(U=it(B)?B:wr(s[v+1])?[]:{})}ts(S,A,U),S=S[A]}return i}var Pd=ya?function(i,s){return ya.set(i,s),i}:un,I0=ma?function(i,s){return ma(i,"toString",{configurable:!0,enumerable:!1,value:nc(s),writable:!0})}:un;function R0(i){return Pa(mo(i))}function An(i,s,u){var p=-1,v=i.length;s<0&&(s=-s>v?0:v+s),u=u>v?v:u,u<0&&(u+=v),v=s>u?0:u-s>>>0,s>>>=0;for(var b=F(v);++p<v;)b[p]=i[p+s];return b}function F0(i,s){var u;return Kr(i,function(p,v,b){return u=s(p,v,b),!u}),!!u}function Ca(i,s,u){var p=0,v=i==null?p:i.length;if(typeof s=="number"&&s===s&&v<=Fe){for(;p<v;){var b=p+v>>>1,C=i[b];C!==null&&!_n(C)&&(u?C<=s:C<s)?p=b+1:v=b}return v}return Ou(i,s,un,u)}function Ou(i,s,u,p){var v=0,b=i==null?0:i.length;if(b===0)return 0;s=u(s);for(var C=s!==s,S=s===null,A=_n(s),U=s===t;v<b;){var B=va((v+b)/2),H=u(i[B]),$=H!==t,oe=H===null,he=H===H,Ce=_n(H);if(C)var me=p||he;else U?me=he&&(p||$):S?me=he&&$&&(p||!oe):A?me=he&&$&&!oe&&(p||!Ce):oe||Ce?me=!1:me=p?H<=s:H<s;me?v=B+1:b=B}return Bt(b,tt)}function Id(i,s){for(var u=-1,p=i.length,v=0,b=[];++u<p;){var C=i[u],S=s?s(C):C;if(!u||!jn(S,A)){var A=S;b[v++]=C===0?0:C}}return b}function Rd(i){return typeof i=="number"?i:_n(i)?X:+i}function yn(i){if(typeof i=="string")return i;if(we(i))return nt(i,yn)+"";if(_n(i))return hd?hd.call(i):"";var s=i+"";return s=="0"&&1/i==-ie?"-0":s}function Zr(i,s,u){var p=-1,v=ia,b=i.length,C=!0,S=[],A=S;if(u)C=!1,v=ou;else if(b>=n){var U=s?null:K0(i);if(U)return sa(U);C=!1,v=Zo,A=new _i}else A=s?[]:S;e:for(;++p<b;){var B=i[p],H=s?s(B):B;if(B=u||B!==0?B:0,C&&H===H){for(var $=A.length;$--;)if(A[$]===H)continue e;s&&A.push(H),S.push(B)}else v(A,H,u)||(A!==S&&A.push(H),S.push(B))}return S}function Au(i,s){return s=Xr(s,i),i=cp(i,s),i==null||delete i[nr(Ln(s))]}function Fd(i,s,u,p){return os(i,s,u(bi(i,s)),p)}function Ta(i,s,u,p){for(var v=i.length,b=p?v:-1;(p?b--:++b<v)&&s(i[b],b,i););return u?An(i,p?0:b,p?b+1:v):An(i,p?b+1:0,p?v:b)}function Yd(i,s){var u=i;return u instanceof Ne&&(u=u.value()),su(s,function(p,v){return v.func.apply(v.thisArg,Hr([p],v.args))},u)}function Lu(i,s,u){var p=i.length;if(p<2)return p?Zr(i[0]):[];for(var v=-1,b=F(p);++v<p;)for(var C=i[v],S=-1;++S<p;)S!=v&&(b[v]=ns(b[v]||C,i[S],s,u));return Zr(Pt(b,1),s,u)}function Gd(i,s,u){for(var p=-1,v=i.length,b=s.length,C={};++p<v;){var S=p<b?s[p]:t;u(C,i[p],S)}return C}function Nu(i){return dt(i)?i:[]}function Pu(i){return typeof i=="function"?i:un}function Xr(i,s){return we(i)?i:ju(i,s)?[i]:hp(Ge(i))}var Y0=Se;function Qr(i,s,u){var p=i.length;return u=u===t?p:u,!s&&u>=p?i:An(i,s,u)}var Wd=Cw||function(i){return St.clearTimeout(i)};function Ud(i,s){if(s)return i.slice();var u=i.length,p=ld?ld(u):new i.constructor(u);return i.copy(p),p}function Iu(i){var s=new i.constructor(i.byteLength);return new da(s).set(new da(i)),s}function G0(i,s){var u=s?Iu(i.buffer):i.buffer;return new i.constructor(u,i.byteOffset,i.byteLength)}function W0(i){var s=new i.constructor(i.source,xf.exec(i));return s.lastIndex=i.lastIndex,s}function U0(i){return es?qe(es.call(i)):{}}function Bd(i,s){var u=s?Iu(i.buffer):i.buffer;return new i.constructor(u,i.byteOffset,i.length)}function jd(i,s){if(i!==s){var u=i!==t,p=i===null,v=i===i,b=_n(i),C=s!==t,S=s===null,A=s===s,U=_n(s);if(!S&&!U&&!b&&i>s||b&&C&&A&&!S&&!U||p&&C&&A||!u&&A||!v)return 1;if(!p&&!b&&!U&&i<s||U&&u&&v&&!p&&!b||S&&u&&v||!C&&v||!A)return-1}return 0}function B0(i,s,u){for(var p=-1,v=i.criteria,b=s.criteria,C=v.length,S=u.length;++p<C;){var A=jd(v[p],b[p]);if(A){if(p>=S)return A;var U=u[p];return A*(U=="desc"?-1:1)}}return i.index-s.index}function Hd(i,s,u,p){for(var v=-1,b=i.length,C=u.length,S=-1,A=s.length,U=bt(b-C,0),B=F(A+U),H=!p;++S<A;)B[S]=s[S];for(;++v<C;)(H||v<b)&&(B[u[v]]=i[v]);for(;U--;)B[S++]=i[v++];return B}function zd(i,s,u,p){for(var v=-1,b=i.length,C=-1,S=u.length,A=-1,U=s.length,B=bt(b-S,0),H=F(B+U),$=!p;++v<B;)H[v]=i[v];for(var oe=v;++A<U;)H[oe+A]=s[A];for(;++C<S;)($||v<b)&&(H[oe+u[C]]=i[v++]);return H}function sn(i,s){var u=-1,p=i.length;for(s||(s=F(p));++u<p;)s[u]=i[u];return s}function tr(i,s,u,p){var v=!u;u||(u={});for(var b=-1,C=s.length;++b<C;){var S=s[b],A=p?p(u[S],i[S],S,u,i):t;A===t&&(A=i[S]),v?vr(u,S,A):ts(u,S,A)}return u}function j0(i,s){return tr(i,Bu(i),s)}function H0(i,s){return tr(i,ip(i),s)}function Sa(i,s){return function(u,p){var v=we(u)?Z_:d0,b=s?s():{};return v(u,i,ue(p,2),b)}}function co(i){return Se(function(s,u){var p=-1,v=u.length,b=v>1?u[v-1]:t,C=v>2?u[2]:t;for(b=i.length>3&&typeof b=="function"?(v--,b):t,C&&Qt(u[0],u[1],C)&&(b=v<3?t:b,v=1),s=qe(s);++p<v;){var S=u[p];S&&i(s,S,p,b)}return s})}function qd(i,s){return function(u,p){if(u==null)return u;if(!an(u))return i(u,p);for(var v=u.length,b=s?v:-1,C=qe(u);(s?b--:++b<v)&&p(C[b],b,C)!==!1;);return u}}function Vd(i){return function(s,u,p){for(var v=-1,b=qe(s),C=p(s),S=C.length;S--;){var A=C[i?S:++v];if(u(b[A],A,b)===!1)break}return s}}function z0(i,s,u){var p=s&_,v=ss(i);function b(){var C=this&&this!==St&&this instanceof b?v:i;return C.apply(p?u:this,arguments)}return b}function Kd(i){return function(s){s=Ge(s);var u=io(s)?Un(s):t,p=u?u[0]:s.charAt(0),v=u?Qr(u,1).join(""):s.slice(1);return p[i]()+v}}function fo(i){return function(s){return su(qp(zp(s).replace(I_,"")),i,"")}}function ss(i){return function(){var s=arguments;switch(s.length){case 0:return new i;case 1:return new i(s[0]);case 2:return new i(s[0],s[1]);case 3:return new i(s[0],s[1],s[2]);case 4:return new i(s[0],s[1],s[2],s[3]);case 5:return new i(s[0],s[1],s[2],s[3],s[4]);case 6:return new i(s[0],s[1],s[2],s[3],s[4],s[5]);case 7:return new i(s[0],s[1],s[2],s[3],s[4],s[5],s[6])}var u=uo(i.prototype),p=i.apply(u,s);return it(p)?p:u}}function q0(i,s,u){var p=ss(i);function v(){for(var b=arguments.length,C=F(b),S=b,A=po(v);S--;)C[S]=arguments[S];var U=b<3&&C[0]!==A&&C[b-1]!==A?[]:zr(C,A);if(b-=U.length,b<u)return $d(i,s,Da,v.placeholder,t,C,U,t,t,u-b);var B=this&&this!==St&&this instanceof v?p:i;return gn(B,this,C)}return v}function Zd(i){return function(s,u,p){var v=qe(s);if(!an(s)){var b=ue(u,3);s=Dt(s),u=function(S){return b(v[S],S,v)}}var C=i(s,u,p);return C>-1?v[b?s[C]:C]:t}}function Xd(i){return _r(function(s){var u=s.length,p=u,v=Mn.prototype.thru;for(i&&s.reverse();p--;){var b=s[p];if(typeof b!="function")throw new Dn(o);if(v&&!C&&La(b)=="wrapper")var C=new Mn([],!0)}for(p=C?p:u;++p<u;){b=s[p];var S=La(b),A=S=="wrapper"?Wu(b):t;A&&Hu(A[0])&&A[1]==(M|E|D|R)&&!A[4].length&&A[9]==1?C=C[La(A[0])].apply(C,A[3]):C=b.length==1&&Hu(b)?C[S]():C.thru(b)}return function(){var U=arguments,B=U[0];if(C&&U.length==1&&we(B))return C.plant(B).value();for(var H=0,$=u?s[H].apply(this,U):B;++H<u;)$=s[H].call(this,$);return $}})}function Da(i,s,u,p,v,b,C,S,A,U){var B=s&M,H=s&_,$=s&x,oe=s&(E|T),he=s&Q,Ce=$?t:ss(i);function me(){for(var Ae=arguments.length,Ie=F(Ae),wn=Ae;wn--;)Ie[wn]=arguments[wn];if(oe)var Jt=po(me),bn=iw(Ie,Jt);if(p&&(Ie=Hd(Ie,p,v,oe)),b&&(Ie=zd(Ie,b,C,oe)),Ae-=bn,oe&&Ae<U){var pt=zr(Ie,Jt);return $d(i,s,Da,me.placeholder,u,Ie,pt,S,A,U-Ae)}var Hn=H?u:this,Er=$?Hn[i]:i;return Ae=Ie.length,S?Ie=db(Ie,S):he&&Ae>1&&Ie.reverse(),B&&A<Ae&&(Ie.length=A),this&&this!==St&&this instanceof me&&(Er=Ce||ss(Er)),Er.apply(Hn,Ie)}return me}function Qd(i,s){return function(u,p){return w0(u,i,s(p),{})}}function Ma(i,s){return function(u,p){var v;if(u===t&&p===t)return s;if(u!==t&&(v=u),p!==t){if(v===t)return p;typeof u=="string"||typeof p=="string"?(u=yn(u),p=yn(p)):(u=Rd(u),p=Rd(p)),v=i(u,p)}return v}}function Ru(i){return _r(function(s){return s=nt(s,vn(ue())),Se(function(u){var p=this;return i(s,function(v){return gn(v,p,u)})})})}function Oa(i,s){s=s===t?" ":yn(s);var u=s.length;if(u<2)return u?Mu(s,i):s;var p=Mu(s,ga(i/oo(s)));return io(s)?Qr(Un(p),0,i).join(""):p.slice(0,i)}function V0(i,s,u,p){var v=s&_,b=ss(i);function C(){for(var S=-1,A=arguments.length,U=-1,B=p.length,H=F(B+A),$=this&&this!==St&&this instanceof C?b:i;++U<B;)H[U]=p[U];for(;A--;)H[U++]=arguments[++S];return gn($,v?u:this,H)}return C}function Jd(i){return function(s,u,p){return p&&typeof p!="number"&&Qt(s,u,p)&&(u=p=t),s=kr(s),u===t?(u=s,s=0):u=kr(u),p=p===t?s<u?1:-1:kr(p),L0(s,u,p,i)}}function Aa(i){return function(s,u){return typeof s=="string"&&typeof u=="string"||(s=Nn(s),u=Nn(u)),i(s,u)}}function $d(i,s,u,p,v,b,C,S,A,U){var B=s&E,H=B?C:t,$=B?t:C,oe=B?b:t,he=B?t:b;s|=B?D:P,s&=~(B?P:D),s&k||(s&=~(_|x));var Ce=[i,s,v,oe,H,he,$,S,A,U],me=u.apply(t,Ce);return Hu(i)&&fp(me,Ce),me.placeholder=p,dp(me,i,s)}function Fu(i){var s=wt[i];return function(u,p){if(u=Nn(u),p=p==null?0:Bt(ke(p),292),p&&dd(u)){var v=(Ge(u)+"e").split("e"),b=s(v[0]+"e"+(+v[1]+p));return v=(Ge(b)+"e").split("e"),+(v[0]+"e"+(+v[1]-p))}return s(u)}}var K0=ao&&1/sa(new ao([,-0]))[1]==ie?function(i){return new ao(i)}:oc;function ep(i){return function(s){var u=jt(s);return u==Xe?pu(s):u==hn?fw(s):rw(s,i(s))}}function yr(i,s,u,p,v,b,C,S){var A=s&x;if(!A&&typeof i!="function")throw new Dn(o);var U=p?p.length:0;if(U||(s&=~(D|P),p=v=t),C=C===t?C:bt(ke(C),0),S=S===t?S:ke(S),U-=v?v.length:0,s&P){var B=p,H=v;p=v=t}var $=A?t:Wu(i),oe=[i,s,u,p,v,B,H,b,C,S];if($&&ub(oe,$),i=oe[0],s=oe[1],u=oe[2],p=oe[3],v=oe[4],S=oe[9]=oe[9]===t?A?0:i.length:bt(oe[9]-U,0),!S&&s&(E|T)&&(s&=~(E|T)),!s||s==_)var he=z0(i,s,u);else s==E||s==T?he=q0(i,s,S):(s==D||s==(_|D))&&!v.length?he=V0(i,s,u,p):he=Da.apply(t,oe);var Ce=$?Pd:fp;return dp(Ce(he,oe),i,s)}function tp(i,s,u,p){return i===t||jn(i,so[u])&&!je.call(p,u)?s:i}function np(i,s,u,p,v,b){return it(i)&&it(s)&&(b.set(s,i),xa(i,s,t,np,b),b.delete(s)),i}function Z0(i){return us(i)?t:i}function rp(i,s,u,p,v,b){var C=u&g,S=i.length,A=s.length;if(S!=A&&!(C&&A>S))return!1;var U=b.get(i),B=b.get(s);if(U&&B)return U==s&&B==i;var H=-1,$=!0,oe=u&y?new _i:t;for(b.set(i,s),b.set(s,i);++H<S;){var he=i[H],Ce=s[H];if(p)var me=C?p(Ce,he,H,s,i,b):p(he,Ce,H,i,s,b);if(me!==t){if(me)continue;$=!1;break}if(oe){if(!au(s,function(Ae,Ie){if(!Zo(oe,Ie)&&(he===Ae||v(he,Ae,u,p,b)))return oe.push(Ie)})){$=!1;break}}else if(!(he===Ce||v(he,Ce,u,p,b))){$=!1;break}}return b.delete(i),b.delete(s),$}function X0(i,s,u,p,v,b,C){switch(u){case hr:if(i.byteLength!=s.byteLength||i.byteOffset!=s.byteOffset)return!1;i=i.buffer,s=s.buffer;case Br:return!(i.byteLength!=s.byteLength||!b(new da(i),new da(s)));case lt:case pn:case Wr:return jn(+i,+s);case _t:return i.name==s.name&&i.message==s.message;case mi:case mn:return i==s+"";case Xe:var S=pu;case hn:var A=p&g;if(S||(S=sa),i.size!=s.size&&!A)return!1;var U=C.get(i);if(U)return U==s;p|=y,C.set(i,s);var B=rp(S(i),S(s),p,v,b,C);return C.delete(i),B;case pr:if(es)return es.call(i)==es.call(s)}return!1}function Q0(i,s,u,p,v,b){var C=u&g,S=Yu(i),A=S.length,U=Yu(s),B=U.length;if(A!=B&&!C)return!1;for(var H=A;H--;){var $=S[H];if(!(C?$ in s:je.call(s,$)))return!1}var oe=b.get(i),he=b.get(s);if(oe&&he)return oe==s&&he==i;var Ce=!0;b.set(i,s),b.set(s,i);for(var me=C;++H<A;){$=S[H];var Ae=i[$],Ie=s[$];if(p)var wn=C?p(Ie,Ae,$,s,i,b):p(Ae,Ie,$,i,s,b);if(!(wn===t?Ae===Ie||v(Ae,Ie,u,p,b):wn)){Ce=!1;break}me||(me=$=="constructor")}if(Ce&&!me){var Jt=i.constructor,bn=s.constructor;Jt!=bn&&"constructor"in i&&"constructor"in s&&!(typeof Jt=="function"&&Jt instanceof Jt&&typeof bn=="function"&&bn instanceof bn)&&(Ce=!1)}return b.delete(i),b.delete(s),Ce}function _r(i){return qu(up(i,t,yp),i+"")}function Yu(i){return Ed(i,Dt,Bu)}function Gu(i){return Ed(i,ln,ip)}var Wu=ya?function(i){return ya.get(i)}:oc;function La(i){for(var s=i.name+"",u=lo[s],p=je.call(lo,s)?u.length:0;p--;){var v=u[p],b=v.func;if(b==null||b==i)return v.name}return s}function po(i){var s=je.call(w,"placeholder")?w:i;return s.placeholder}function ue(){var i=w.iteratee||rc;return i=i===rc?Td:i,arguments.length?i(arguments[0],arguments[1]):i}function Na(i,s){var u=i.__data__;return ob(s)?u[typeof s=="string"?"string":"hash"]:u.map}function Uu(i){for(var s=Dt(i),u=s.length;u--;){var p=s[u],v=i[p];s[u]=[p,v,ap(v)]}return s}function ki(i,s){var u=lw(i,s);return Cd(u)?u:t}function J0(i){var s=je.call(i,vi),u=i[vi];try{i[vi]=t;var p=!0}catch(b){}var v=ca.call(i);return p&&(s?i[vi]=u:delete i[vi]),v}var Bu=mu?function(i){return i==null?[]:(i=qe(i),jr(mu(i),function(s){return cd.call(i,s)}))}:sc,ip=mu?function(i){for(var s=[];i;)Hr(s,Bu(i)),i=pa(i);return s}:sc,jt=Xt;(gu&&jt(new gu(new ArrayBuffer(1)))!=hr||Qo&&jt(new Qo)!=Xe||vu&&jt(vu.resolve())!=Vo||ao&&jt(new ao)!=hn||Jo&&jt(new Jo)!=Ur)&&(jt=function(i){var s=Xt(i),u=s==Wn?i.constructor:t,p=u?Ei(u):"";if(p)switch(p){case Pw:return hr;case Iw:return Xe;case Rw:return Vo;case Fw:return hn;case Yw:return Ur}return s});function $0(i,s,u){for(var p=-1,v=u.length;++p<v;){var b=u[p],C=b.size;switch(b.type){case"drop":i+=C;break;case"dropRight":s-=C;break;case"take":s=Bt(s,i+C);break;case"takeRight":i=bt(i,s-C);break}}return{start:i,end:s}}function eb(i){var s=i.match(s_);return s?s[1].split(a_):[]}function op(i,s,u){s=Xr(s,i);for(var p=-1,v=s.length,b=!1;++p<v;){var C=nr(s[p]);if(!(b=i!=null&&u(i,C)))break;i=i[C]}return b||++p!=v?b:(v=i==null?0:i.length,!!v&&Wa(v)&&wr(C,v)&&(we(i)||xi(i)))}function tb(i){var s=i.length,u=new i.constructor(s);return s&&typeof i[0]=="string"&&je.call(i,"index")&&(u.index=i.index,u.input=i.input),u}function sp(i){return typeof i.constructor=="function"&&!as(i)?uo(pa(i)):{}}function nb(i,s,u){var p=i.constructor;switch(s){case Br:return Iu(i);case lt:case pn:return new p(+i);case hr:return G0(i,u);case eo:case to:case jl:case Hl:case zl:case ql:case Vl:case Kl:case Zl:return Bd(i,u);case Xe:return new p;case Wr:case mn:return new p(i);case mi:return W0(i);case hn:return new p;case pr:return U0(i)}}function rb(i,s){var u=s.length;if(!u)return i;var p=u-1;return s[p]=(u>1?"& ":"")+s[p],s=s.join(u>2?", ":" "),i.replace(o_,`{
/* [wrapped with `+s+`] */
`)}function ib(i){return we(i)||xi(i)||!!(fd&&i&&i[fd])}function wr(i,s){var u=typeof i;return s=s==null?Z:s,!!s&&(u=="number"||u!="symbol"&&g_.test(i))&&i>-1&&i%1==0&&i<s}function Qt(i,s,u){if(!it(u))return!1;var p=typeof s;return(p=="number"?an(u)&&wr(s,u.length):p=="string"&&s in u)?jn(u[s],i):!1}function ju(i,s){if(we(i))return!1;var u=typeof i;return u=="number"||u=="symbol"||u=="boolean"||i==null||_n(i)?!0:t_.test(i)||!e_.test(i)||s!=null&&i in qe(s)}function ob(i){var s=typeof i;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?i!=="__proto__":i===null}function Hu(i){var s=La(i),u=w[s];if(typeof u!="function"||!(s in Ne.prototype))return!1;if(i===u)return!0;var p=Wu(u);return!!p&&i===p[0]}function sb(i){return!!ad&&ad in i}var ab=la?br:ac;function as(i){var s=i&&i.constructor,u=typeof s=="function"&&s.prototype||so;return i===u}function ap(i){return i===i&&!it(i)}function lp(i,s){return function(u){return u==null?!1:u[i]===s&&(s!==t||i in qe(u))}}function lb(i){var s=Ya(i,function(p){return u.size===c&&u.clear(),p}),u=s.cache;return s}function ub(i,s){var u=i[1],p=s[1],v=u|p,b=v<(_|x|M),C=p==M&&u==E||p==M&&u==R&&i[7].length<=s[8]||p==(M|R)&&s[7].length<=s[8]&&u==E;if(!(b||C))return i;p&_&&(i[2]=s[2],v|=u&_?0:k);var S=s[3];if(S){var A=i[3];i[3]=A?Hd(A,S,s[4]):S,i[4]=A?zr(i[3],f):s[4]}return S=s[5],S&&(A=i[5],i[5]=A?zd(A,S,s[6]):S,i[6]=A?zr(i[5],f):s[6]),S=s[7],S&&(i[7]=S),p&M&&(i[8]=i[8]==null?s[8]:Bt(i[8],s[8])),i[9]==null&&(i[9]=s[9]),i[0]=s[0],i[1]=v,i}function cb(i){var s=[];if(i!=null)for(var u in qe(i))s.push(u);return s}function fb(i){return ca.call(i)}function up(i,s,u){return s=bt(s===t?i.length-1:s,0),function(){for(var p=arguments,v=-1,b=bt(p.length-s,0),C=F(b);++v<b;)C[v]=p[s+v];v=-1;for(var S=F(s+1);++v<s;)S[v]=p[v];return S[s]=u(C),gn(i,this,S)}}function cp(i,s){return s.length<2?i:bi(i,An(s,0,-1))}function db(i,s){for(var u=i.length,p=Bt(s.length,u),v=sn(i);p--;){var b=s[p];i[p]=wr(b,u)?v[b]:t}return i}function zu(i,s){if(!(s==="constructor"&&typeof i[s]=="function")&&s!="__proto__")return i[s]}var fp=pp(Pd),ls=Sw||function(i,s){return St.setTimeout(i,s)},qu=pp(I0);function dp(i,s,u){var p=s+"";return qu(i,rb(p,pb(eb(p),u)))}function pp(i){var s=0,u=0;return function(){var p=Aw(),v=K-(p-u);if(u=p,v>0){if(++s>=ee)return arguments[0]}else s=0;return i.apply(t,arguments)}}function Pa(i,s){var u=-1,p=i.length,v=p-1;for(s=s===t?p:s;++u<s;){var b=Du(u,v),C=i[b];i[b]=i[u],i[u]=C}return i.length=s,i}var hp=lb(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(n_,function(u,p,v,b){s.push(v?b.replace(c_,"$1"):p||u)}),s});function nr(i){if(typeof i=="string"||_n(i))return i;var s=i+"";return s=="0"&&1/i==-ie?"-0":s}function Ei(i){if(i!=null){try{return ua.call(i)}catch(s){}try{return i+""}catch(s){}}return""}function pb(i,s){return Sn(at,function(u){var p="_."+u[0];s&u[1]&&!ia(i,p)&&i.push(p)}),i.sort()}function mp(i){if(i instanceof Ne)return i.clone();var s=new Mn(i.__wrapped__,i.__chain__);return s.__actions__=sn(i.__actions__),s.__index__=i.__index__,s.__values__=i.__values__,s}function hb(i,s,u){(u?Qt(i,s,u):s===t)?s=1:s=bt(ke(s),0);var p=i==null?0:i.length;if(!p||s<1)return[];for(var v=0,b=0,C=F(ga(p/s));v<p;)C[b++]=An(i,v,v+=s);return C}function mb(i){for(var s=-1,u=i==null?0:i.length,p=0,v=[];++s<u;){var b=i[s];b&&(v[p++]=b)}return v}function gb(){var i=arguments.length;if(!i)return[];for(var s=F(i-1),u=arguments[0],p=i;p--;)s[p-1]=arguments[p];return Hr(we(u)?sn(u):[u],Pt(s,1))}var vb=Se(function(i,s){return dt(i)?ns(i,Pt(s,1,dt,!0)):[]}),yb=Se(function(i,s){var u=Ln(s);return dt(u)&&(u=t),dt(i)?ns(i,Pt(s,1,dt,!0),ue(u,2)):[]}),_b=Se(function(i,s){var u=Ln(s);return dt(u)&&(u=t),dt(i)?ns(i,Pt(s,1,dt,!0),t,u):[]});function wb(i,s,u){var p=i==null?0:i.length;return p?(s=u||s===t?1:ke(s),An(i,s<0?0:s,p)):[]}function bb(i,s,u){var p=i==null?0:i.length;return p?(s=u||s===t?1:ke(s),s=p-s,An(i,0,s<0?0:s)):[]}function kb(i,s){return i&&i.length?Ta(i,ue(s,3),!0,!0):[]}function Eb(i,s){return i&&i.length?Ta(i,ue(s,3),!0):[]}function xb(i,s,u,p){var v=i==null?0:i.length;return v?(u&&typeof u!="number"&&Qt(i,s,u)&&(u=0,p=v),g0(i,s,u,p)):[]}function gp(i,s,u){var p=i==null?0:i.length;if(!p)return-1;var v=u==null?0:ke(u);return v<0&&(v=bt(p+v,0)),oa(i,ue(s,3),v)}function vp(i,s,u){var p=i==null?0:i.length;if(!p)return-1;var v=p-1;return u!==t&&(v=ke(u),v=u<0?bt(p+v,0):Bt(v,p-1)),oa(i,ue(s,3),v,!0)}function yp(i){var s=i==null?0:i.length;return s?Pt(i,1):[]}function Cb(i){var s=i==null?0:i.length;return s?Pt(i,ie):[]}function Tb(i,s){var u=i==null?0:i.length;return u?(s=s===t?1:ke(s),Pt(i,s)):[]}function Sb(i){for(var s=-1,u=i==null?0:i.length,p={};++s<u;){var v=i[s];p[v[0]]=v[1]}return p}function _p(i){return i&&i.length?i[0]:t}function Db(i,s,u){var p=i==null?0:i.length;if(!p)return-1;var v=u==null?0:ke(u);return v<0&&(v=bt(p+v,0)),ro(i,s,v)}function Mb(i){var s=i==null?0:i.length;return s?An(i,0,-1):[]}var Ob=Se(function(i){var s=nt(i,Nu);return s.length&&s[0]===i[0]?Eu(s):[]}),Ab=Se(function(i){var s=Ln(i),u=nt(i,Nu);return s===Ln(u)?s=t:u.pop(),u.length&&u[0]===i[0]?Eu(u,ue(s,2)):[]}),Lb=Se(function(i){var s=Ln(i),u=nt(i,Nu);return s=typeof s=="function"?s:t,s&&u.pop(),u.length&&u[0]===i[0]?Eu(u,t,s):[]});function Nb(i,s){return i==null?"":Mw.call(i,s)}function Ln(i){var s=i==null?0:i.length;return s?i[s-1]:t}function Pb(i,s,u){var p=i==null?0:i.length;if(!p)return-1;var v=p;return u!==t&&(v=ke(u),v=v<0?bt(p+v,0):Bt(v,p-1)),s===s?pw(i,s,v):oa(i,$f,v,!0)}function Ib(i,s){return i&&i.length?Od(i,ke(s)):t}var Rb=Se(wp);function wp(i,s){return i&&i.length&&s&&s.length?Su(i,s):i}function Fb(i,s,u){return i&&i.length&&s&&s.length?Su(i,s,ue(u,2)):i}function Yb(i,s,u){return i&&i.length&&s&&s.length?Su(i,s,t,u):i}var Gb=_r(function(i,s){var u=i==null?0:i.length,p=_u(i,s);return Nd(i,nt(s,function(v){return wr(v,u)?+v:v}).sort(jd)),p});function Wb(i,s){var u=[];if(!(i&&i.length))return u;var p=-1,v=[],b=i.length;for(s=ue(s,3);++p<b;){var C=i[p];s(C,p,i)&&(u.push(C),v.push(p))}return Nd(i,v),u}function Vu(i){return i==null?i:Nw.call(i)}function Ub(i,s,u){var p=i==null?0:i.length;return p?(u&&typeof u!="number"&&Qt(i,s,u)?(s=0,u=p):(s=s==null?0:ke(s),u=u===t?p:ke(u)),An(i,s,u)):[]}function Bb(i,s){return Ca(i,s)}function jb(i,s,u){return Ou(i,s,ue(u,2))}function Hb(i,s){var u=i==null?0:i.length;if(u){var p=Ca(i,s);if(p<u&&jn(i[p],s))return p}return-1}function zb(i,s){return Ca(i,s,!0)}function qb(i,s,u){return Ou(i,s,ue(u,2),!0)}function Vb(i,s){var u=i==null?0:i.length;if(u){var p=Ca(i,s,!0)-1;if(jn(i[p],s))return p}return-1}function Kb(i){return i&&i.length?Id(i):[]}function Zb(i,s){return i&&i.length?Id(i,ue(s,2)):[]}function Xb(i){var s=i==null?0:i.length;return s?An(i,1,s):[]}function Qb(i,s,u){return i&&i.length?(s=u||s===t?1:ke(s),An(i,0,s<0?0:s)):[]}function Jb(i,s,u){var p=i==null?0:i.length;return p?(s=u||s===t?1:ke(s),s=p-s,An(i,s<0?0:s,p)):[]}function $b(i,s){return i&&i.length?Ta(i,ue(s,3),!1,!0):[]}function e1(i,s){return i&&i.length?Ta(i,ue(s,3)):[]}var t1=Se(function(i){return Zr(Pt(i,1,dt,!0))}),n1=Se(function(i){var s=Ln(i);return dt(s)&&(s=t),Zr(Pt(i,1,dt,!0),ue(s,2))}),r1=Se(function(i){var s=Ln(i);return s=typeof s=="function"?s:t,Zr(Pt(i,1,dt,!0),t,s)});function i1(i){return i&&i.length?Zr(i):[]}function o1(i,s){return i&&i.length?Zr(i,ue(s,2)):[]}function s1(i,s){return s=typeof s=="function"?s:t,i&&i.length?Zr(i,t,s):[]}function Ku(i){if(!(i&&i.length))return[];var s=0;return i=jr(i,function(u){if(dt(u))return s=bt(u.length,s),!0}),fu(s,function(u){return nt(i,lu(u))})}function bp(i,s){if(!(i&&i.length))return[];var u=Ku(i);return s==null?u:nt(u,function(p){return gn(s,t,p)})}var a1=Se(function(i,s){return dt(i)?ns(i,s):[]}),l1=Se(function(i){return Lu(jr(i,dt))}),u1=Se(function(i){var s=Ln(i);return dt(s)&&(s=t),Lu(jr(i,dt),ue(s,2))}),c1=Se(function(i){var s=Ln(i);return s=typeof s=="function"?s:t,Lu(jr(i,dt),t,s)}),f1=Se(Ku);function d1(i,s){return Gd(i||[],s||[],ts)}function p1(i,s){return Gd(i||[],s||[],os)}var h1=Se(function(i){var s=i.length,u=s>1?i[s-1]:t;return u=typeof u=="function"?(i.pop(),u):t,bp(i,u)});function kp(i){var s=w(i);return s.__chain__=!0,s}function m1(i,s){return s(i),i}function Ia(i,s){return s(i)}var g1=_r(function(i){var s=i.length,u=s?i[0]:0,p=this.__wrapped__,v=function(b){return _u(b,i)};return s>1||this.__actions__.length||!(p instanceof Ne)||!wr(u)?this.thru(v):(p=p.slice(u,+u+(s?1:0)),p.__actions__.push({func:Ia,args:[v],thisArg:t}),new Mn(p,this.__chain__).thru(function(b){return s&&!b.length&&b.push(t),b}))});function v1(){return kp(this)}function y1(){return new Mn(this.value(),this.__chain__)}function _1(){this.__values__===t&&(this.__values__=Rp(this.value()));var i=this.__index__>=this.__values__.length,s=i?t:this.__values__[this.__index__++];return{done:i,value:s}}function w1(){return this}function b1(i){for(var s,u=this;u instanceof wa;){var p=mp(u);p.__index__=0,p.__values__=t,s?v.__wrapped__=p:s=p;var v=p;u=u.__wrapped__}return v.__wrapped__=i,s}function k1(){var i=this.__wrapped__;if(i instanceof Ne){var s=i;return this.__actions__.length&&(s=new Ne(this)),s=s.reverse(),s.__actions__.push({func:Ia,args:[Vu],thisArg:t}),new Mn(s,this.__chain__)}return this.thru(Vu)}function E1(){return Yd(this.__wrapped__,this.__actions__)}var x1=Sa(function(i,s,u){je.call(i,u)?++i[u]:vr(i,u,1)});function C1(i,s,u){var p=we(i)?Qf:m0;return u&&Qt(i,s,u)&&(s=t),p(i,ue(s,3))}function T1(i,s){var u=we(i)?jr:bd;return u(i,ue(s,3))}var S1=Zd(gp),D1=Zd(vp);function M1(i,s){return Pt(Ra(i,s),1)}function O1(i,s){return Pt(Ra(i,s),ie)}function A1(i,s,u){return u=u===t?1:ke(u),Pt(Ra(i,s),u)}function Ep(i,s){var u=we(i)?Sn:Kr;return u(i,ue(s,3))}function xp(i,s){var u=we(i)?X_:wd;return u(i,ue(s,3))}var L1=Sa(function(i,s,u){je.call(i,u)?i[u].push(s):vr(i,u,[s])});function N1(i,s,u,p){i=an(i)?i:mo(i),u=u&&!p?ke(u):0;var v=i.length;return u<0&&(u=bt(v+u,0)),Ua(i)?u<=v&&i.indexOf(s,u)>-1:!!v&&ro(i,s,u)>-1}var P1=Se(function(i,s,u){var p=-1,v=typeof s=="function",b=an(i)?F(i.length):[];return Kr(i,function(C){b[++p]=v?gn(s,C,u):rs(C,s,u)}),b}),I1=Sa(function(i,s,u){vr(i,u,s)});function Ra(i,s){var u=we(i)?nt:Sd;return u(i,ue(s,3))}function R1(i,s,u,p){return i==null?[]:(we(s)||(s=s==null?[]:[s]),u=p?t:u,we(u)||(u=u==null?[]:[u]),Ad(i,s,u))}var F1=Sa(function(i,s,u){i[u?0:1].push(s)},function(){return[[],[]]});function Y1(i,s,u){var p=we(i)?su:td,v=arguments.length<3;return p(i,ue(s,4),u,v,Kr)}function G1(i,s,u){var p=we(i)?Q_:td,v=arguments.length<3;return p(i,ue(s,4),u,v,wd)}function W1(i,s){var u=we(i)?jr:bd;return u(i,Ga(ue(s,3)))}function U1(i){var s=we(i)?gd:N0;return s(i)}function B1(i,s,u){(u?Qt(i,s,u):s===t)?s=1:s=ke(s);var p=we(i)?c0:P0;return p(i,s)}function j1(i){var s=we(i)?f0:R0;return s(i)}function H1(i){if(i==null)return 0;if(an(i))return Ua(i)?oo(i):i.length;var s=jt(i);return s==Xe||s==hn?i.size:Cu(i).length}function z1(i,s,u){var p=we(i)?au:F0;return u&&Qt(i,s,u)&&(s=t),p(i,ue(s,3))}var q1=Se(function(i,s){if(i==null)return[];var u=s.length;return u>1&&Qt(i,s[0],s[1])?s=[]:u>2&&Qt(s[0],s[1],s[2])&&(s=[s[0]]),Ad(i,Pt(s,1),[])}),Fa=Tw||function(){return St.Date.now()};function V1(i,s){if(typeof s!="function")throw new Dn(o);return i=ke(i),function(){if(--i<1)return s.apply(this,arguments)}}function Cp(i,s,u){return s=u?t:s,s=i&&s==null?i.length:s,yr(i,M,t,t,t,t,s)}function Tp(i,s){var u;if(typeof s!="function")throw new Dn(o);return i=ke(i),function(){return--i>0&&(u=s.apply(this,arguments)),i<=1&&(s=t),u}}var Zu=Se(function(i,s,u){var p=_;if(u.length){var v=zr(u,po(Zu));p|=D}return yr(i,p,s,u,v)}),Sp=Se(function(i,s,u){var p=_|x;if(u.length){var v=zr(u,po(Sp));p|=D}return yr(s,p,i,u,v)});function Dp(i,s,u){s=u?t:s;var p=yr(i,E,t,t,t,t,t,s);return p.placeholder=Dp.placeholder,p}function Mp(i,s,u){s=u?t:s;var p=yr(i,T,t,t,t,t,t,s);return p.placeholder=Mp.placeholder,p}function Op(i,s,u){var p,v,b,C,S,A,U=0,B=!1,H=!1,$=!0;if(typeof i!="function")throw new Dn(o);s=Nn(s)||0,it(u)&&(B=!!u.leading,H="maxWait"in u,b=H?bt(Nn(u.maxWait)||0,s):b,$="trailing"in u?!!u.trailing:$);function oe(pt){var Hn=p,Er=v;return p=v=t,U=pt,C=i.apply(Er,Hn),C}function he(pt){return U=pt,S=ls(Ae,s),B?oe(pt):C}function Ce(pt){var Hn=pt-A,Er=pt-U,Zp=s-Hn;return H?Bt(Zp,b-Er):Zp}function me(pt){var Hn=pt-A,Er=pt-U;return A===t||Hn>=s||Hn<0||H&&Er>=b}function Ae(){var pt=Fa();if(me(pt))return Ie(pt);S=ls(Ae,Ce(pt))}function Ie(pt){return S=t,$&&p?oe(pt):(p=v=t,C)}function wn(){S!==t&&Wd(S),U=0,p=A=v=S=t}function Jt(){return S===t?C:Ie(Fa())}function bn(){var pt=Fa(),Hn=me(pt);if(p=arguments,v=this,A=pt,Hn){if(S===t)return he(A);if(H)return Wd(S),S=ls(Ae,s),oe(A)}return S===t&&(S=ls(Ae,s)),C}return bn.cancel=wn,bn.flush=Jt,bn}var K1=Se(function(i,s){return _d(i,1,s)}),Z1=Se(function(i,s,u){return _d(i,Nn(s)||0,u)});function X1(i){return yr(i,Q)}function Ya(i,s){if(typeof i!="function"||s!=null&&typeof s!="function")throw new Dn(o);var u=function(){var p=arguments,v=s?s.apply(this,p):p[0],b=u.cache;if(b.has(v))return b.get(v);var C=i.apply(this,p);return u.cache=b.set(v,C)||b,C};return u.cache=new(Ya.Cache||gr),u}Ya.Cache=gr;function Ga(i){if(typeof i!="function")throw new Dn(o);return function(){var s=arguments;switch(s.length){case 0:return!i.call(this);case 1:return!i.call(this,s[0]);case 2:return!i.call(this,s[0],s[1]);case 3:return!i.call(this,s[0],s[1],s[2])}return!i.apply(this,s)}}function Q1(i){return Tp(2,i)}var J1=Y0(function(i,s){s=s.length==1&&we(s[0])?nt(s[0],vn(ue())):nt(Pt(s,1),vn(ue()));var u=s.length;return Se(function(p){for(var v=-1,b=Bt(p.length,u);++v<b;)p[v]=s[v].call(this,p[v]);return gn(i,this,p)})}),Xu=Se(function(i,s){var u=zr(s,po(Xu));return yr(i,D,t,s,u)}),Ap=Se(function(i,s){var u=zr(s,po(Ap));return yr(i,P,t,s,u)}),$1=_r(function(i,s){return yr(i,R,t,t,t,s)});function ek(i,s){if(typeof i!="function")throw new Dn(o);return s=s===t?s:ke(s),Se(i,s)}function tk(i,s){if(typeof i!="function")throw new Dn(o);return s=s==null?0:bt(ke(s),0),Se(function(u){var p=u[s],v=Qr(u,0,s);return p&&Hr(v,p),gn(i,this,v)})}function nk(i,s,u){var p=!0,v=!0;if(typeof i!="function")throw new Dn(o);return it(u)&&(p="leading"in u?!!u.leading:p,v="trailing"in u?!!u.trailing:v),Op(i,s,{leading:p,maxWait:s,trailing:v})}function rk(i){return Cp(i,1)}function ik(i,s){return Xu(Pu(s),i)}function ok(){if(!arguments.length)return[];var i=arguments[0];return we(i)?i:[i]}function sk(i){return On(i,m)}function ak(i,s){return s=typeof s=="function"?s:t,On(i,m,s)}function lk(i){return On(i,d|m)}function uk(i,s){return s=typeof s=="function"?s:t,On(i,d|m,s)}function ck(i,s){return s==null||yd(i,s,Dt(s))}function jn(i,s){return i===s||i!==i&&s!==s}var fk=Aa(ku),dk=Aa(function(i,s){return i>=s}),xi=xd(function(){return arguments}())?xd:function(i){return ut(i)&&je.call(i,"callee")&&!cd.call(i,"callee")},we=F.isArray,pk=zf?vn(zf):b0;function an(i){return i!=null&&Wa(i.length)&&!br(i)}function dt(i){return ut(i)&&an(i)}function hk(i){return i===!0||i===!1||ut(i)&&Xt(i)==lt}var Jr=Dw||ac,mk=qf?vn(qf):k0;function gk(i){return ut(i)&&i.nodeType===1&&!us(i)}function vk(i){if(i==null)return!0;if(an(i)&&(we(i)||typeof i=="string"||typeof i.splice=="function"||Jr(i)||ho(i)||xi(i)))return!i.length;var s=jt(i);if(s==Xe||s==hn)return!i.size;if(as(i))return!Cu(i).length;for(var u in i)if(je.call(i,u))return!1;return!0}function yk(i,s){return is(i,s)}function _k(i,s,u){u=typeof u=="function"?u:t;var p=u?u(i,s):t;return p===t?is(i,s,t,u):!!p}function Qu(i){if(!ut(i))return!1;var s=Xt(i);return s==_t||s==on||typeof i.message=="string"&&typeof i.name=="string"&&!us(i)}function wk(i){return typeof i=="number"&&dd(i)}function br(i){if(!it(i))return!1;var s=Xt(i);return s==ft||s==Be||s==Zt||s==$s}function Lp(i){return typeof i=="number"&&i==ke(i)}function Wa(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=Z}function it(i){var s=typeof i;return i!=null&&(s=="object"||s=="function")}function ut(i){return i!=null&&typeof i=="object"}var Np=Vf?vn(Vf):x0;function bk(i,s){return i===s||xu(i,s,Uu(s))}function kk(i,s,u){return u=typeof u=="function"?u:t,xu(i,s,Uu(s),u)}function Ek(i){return Pp(i)&&i!=+i}function xk(i){if(ab(i))throw new ve(r);return Cd(i)}function Ck(i){return i===null}function Tk(i){return i==null}function Pp(i){return typeof i=="number"||ut(i)&&Xt(i)==Wr}function us(i){if(!ut(i)||Xt(i)!=Wn)return!1;var s=pa(i);if(s===null)return!0;var u=je.call(s,"constructor")&&s.constructor;return typeof u=="function"&&u instanceof u&&ua.call(u)==kw}var Ju=Kf?vn(Kf):C0;function Sk(i){return Lp(i)&&i>=-Z&&i<=Z}var Ip=Zf?vn(Zf):T0;function Ua(i){return typeof i=="string"||!we(i)&&ut(i)&&Xt(i)==mn}function _n(i){return typeof i=="symbol"||ut(i)&&Xt(i)==pr}var ho=Xf?vn(Xf):S0;function Dk(i){return i===t}function Mk(i){return ut(i)&&jt(i)==Ur}function Ok(i){return ut(i)&&Xt(i)==Ko}var Ak=Aa(Tu),Lk=Aa(function(i,s){return i<=s});function Rp(i){if(!i)return[];if(an(i))return Ua(i)?Un(i):sn(i);if(Xo&&i[Xo])return cw(i[Xo]());var s=jt(i),u=s==Xe?pu:s==hn?sa:mo;return u(i)}function kr(i){if(!i)return i===0?i:0;if(i=Nn(i),i===ie||i===-ie){var s=i<0?-1:1;return s*z}return i===i?i:0}function ke(i){var s=kr(i),u=s%1;return s===s?u?s-u:s:0}function Fp(i){return i?wi(ke(i),0,_e):0}function Nn(i){if(typeof i=="number")return i;if(_n(i))return X;if(it(i)){var s=typeof i.valueOf=="function"?i.valueOf():i;i=it(s)?s+"":s}if(typeof i!="string")return i===0?i:+i;i=nd(i);var u=p_.test(i);return u||m_.test(i)?V_(i.slice(2),u?2:8):d_.test(i)?X:+i}function Yp(i){return tr(i,ln(i))}function Nk(i){return i?wi(ke(i),-Z,Z):i===0?i:0}function Ge(i){return i==null?"":yn(i)}var Pk=co(function(i,s){if(as(s)||an(s)){tr(s,Dt(s),i);return}for(var u in s)je.call(s,u)&&ts(i,u,s[u])}),Gp=co(function(i,s){tr(s,ln(s),i)}),Ba=co(function(i,s,u,p){tr(s,ln(s),i,p)}),Ik=co(function(i,s,u,p){tr(s,Dt(s),i,p)}),Rk=_r(_u);function Fk(i,s){var u=uo(i);return s==null?u:vd(u,s)}var Yk=Se(function(i,s){i=qe(i);var u=-1,p=s.length,v=p>2?s[2]:t;for(v&&Qt(s[0],s[1],v)&&(p=1);++u<p;)for(var b=s[u],C=ln(b),S=-1,A=C.length;++S<A;){var U=C[S],B=i[U];(B===t||jn(B,so[U])&&!je.call(i,U))&&(i[U]=b[U])}return i}),Gk=Se(function(i){return i.push(t,np),gn(Wp,t,i)});function Wk(i,s){return Jf(i,ue(s,3),er)}function Uk(i,s){return Jf(i,ue(s,3),bu)}function Bk(i,s){return i==null?i:wu(i,ue(s,3),ln)}function jk(i,s){return i==null?i:kd(i,ue(s,3),ln)}function Hk(i,s){return i&&er(i,ue(s,3))}function zk(i,s){return i&&bu(i,ue(s,3))}function qk(i){return i==null?[]:Ea(i,Dt(i))}function Vk(i){return i==null?[]:Ea(i,ln(i))}function $u(i,s,u){var p=i==null?t:bi(i,s);return p===t?u:p}function Kk(i,s){return i!=null&&op(i,s,v0)}function ec(i,s){return i!=null&&op(i,s,y0)}var Zk=Qd(function(i,s,u){s!=null&&typeof s.toString!="function"&&(s=ca.call(s)),i[s]=u},nc(un)),Xk=Qd(function(i,s,u){s!=null&&typeof s.toString!="function"&&(s=ca.call(s)),je.call(i,s)?i[s].push(u):i[s]=[u]},ue),Qk=Se(rs);function Dt(i){return an(i)?md(i):Cu(i)}function ln(i){return an(i)?md(i,!0):D0(i)}function Jk(i,s){var u={};return s=ue(s,3),er(i,function(p,v,b){vr(u,s(p,v,b),p)}),u}function $k(i,s){var u={};return s=ue(s,3),er(i,function(p,v,b){vr(u,v,s(p,v,b))}),u}var eE=co(function(i,s,u){xa(i,s,u)}),Wp=co(function(i,s,u,p){xa(i,s,u,p)}),tE=_r(function(i,s){var u={};if(i==null)return u;var p=!1;s=nt(s,function(b){return b=Xr(b,i),p||(p=b.length>1),b}),tr(i,Gu(i),u),p&&(u=On(u,d|h|m,Z0));for(var v=s.length;v--;)Au(u,s[v]);return u});function nE(i,s){return Up(i,Ga(ue(s)))}var rE=_r(function(i,s){return i==null?{}:O0(i,s)});function Up(i,s){if(i==null)return{};var u=nt(Gu(i),function(p){return[p]});return s=ue(s),Ld(i,u,function(p,v){return s(p,v[0])})}function iE(i,s,u){s=Xr(s,i);var p=-1,v=s.length;for(v||(v=1,i=t);++p<v;){var b=i==null?t:i[nr(s[p])];b===t&&(p=v,b=u),i=br(b)?b.call(i):b}return i}function oE(i,s,u){return i==null?i:os(i,s,u)}function sE(i,s,u,p){return p=typeof p=="function"?p:t,i==null?i:os(i,s,u,p)}var Bp=ep(Dt),jp=ep(ln);function aE(i,s,u){var p=we(i),v=p||Jr(i)||ho(i);if(s=ue(s,4),u==null){var b=i&&i.constructor;v?u=p?new b:[]:it(i)?u=br(b)?uo(pa(i)):{}:u={}}return(v?Sn:er)(i,function(C,S,A){return s(u,C,S,A)}),u}function lE(i,s){return i==null?!0:Au(i,s)}function uE(i,s,u){return i==null?i:Fd(i,s,Pu(u))}function cE(i,s,u,p){return p=typeof p=="function"?p:t,i==null?i:Fd(i,s,Pu(u),p)}function mo(i){return i==null?[]:du(i,Dt(i))}function fE(i){return i==null?[]:du(i,ln(i))}function dE(i,s,u){return u===t&&(u=s,s=t),u!==t&&(u=Nn(u),u=u===u?u:0),s!==t&&(s=Nn(s),s=s===s?s:0),wi(Nn(i),s,u)}function pE(i,s,u){return s=kr(s),u===t?(u=s,s=0):u=kr(u),i=Nn(i),_0(i,s,u)}function hE(i,s,u){if(u&&typeof u!="boolean"&&Qt(i,s,u)&&(s=u=t),u===t&&(typeof s=="boolean"?(u=s,s=t):typeof i=="boolean"&&(u=i,i=t)),i===t&&s===t?(i=0,s=1):(i=kr(i),s===t?(s=i,i=0):s=kr(s)),i>s){var p=i;i=s,s=p}if(u||i%1||s%1){var v=pd();return Bt(i+v*(s-i+q_("1e-"+((v+"").length-1))),s)}return Du(i,s)}var mE=fo(function(i,s,u){return s=s.toLowerCase(),i+(u?Hp(s):s)});function Hp(i){return tc(Ge(i).toLowerCase())}function zp(i){return i=Ge(i),i&&i.replace(v_,ow).replace(R_,"")}function gE(i,s,u){i=Ge(i),s=yn(s);var p=i.length;u=u===t?p:wi(ke(u),0,p);var v=u;return u-=s.length,u>=0&&i.slice(u,v)==s}function vE(i){return i=Ge(i),i&&Qy.test(i)?i.replace(kf,sw):i}function yE(i){return i=Ge(i),i&&r_.test(i)?i.replace(Xl,"\\$&"):i}var _E=fo(function(i,s,u){return i+(u?"-":"")+s.toLowerCase()}),wE=fo(function(i,s,u){return i+(u?" ":"")+s.toLowerCase()}),bE=Kd("toLowerCase");function kE(i,s,u){i=Ge(i),s=ke(s);var p=s?oo(i):0;if(!s||p>=s)return i;var v=(s-p)/2;return Oa(va(v),u)+i+Oa(ga(v),u)}function EE(i,s,u){i=Ge(i),s=ke(s);var p=s?oo(i):0;return s&&p<s?i+Oa(s-p,u):i}function xE(i,s,u){i=Ge(i),s=ke(s);var p=s?oo(i):0;return s&&p<s?Oa(s-p,u)+i:i}function CE(i,s,u){return u||s==null?s=0:s&&(s=+s),Lw(Ge(i).replace(Ql,""),s||0)}function TE(i,s,u){return(u?Qt(i,s,u):s===t)?s=1:s=ke(s),Mu(Ge(i),s)}function SE(){var i=arguments,s=Ge(i[0]);return i.length<3?s:s.replace(i[1],i[2])}var DE=fo(function(i,s,u){return i+(u?"_":"")+s.toLowerCase()});function ME(i,s,u){return u&&typeof u!="number"&&Qt(i,s,u)&&(s=u=t),u=u===t?_e:u>>>0,u?(i=Ge(i),i&&(typeof s=="string"||s!=null&&!Ju(s))&&(s=yn(s),!s&&io(i))?Qr(Un(i),0,u):i.split(s,u)):[]}var OE=fo(function(i,s,u){return i+(u?" ":"")+tc(s)});function AE(i,s,u){return i=Ge(i),u=u==null?0:wi(ke(u),0,i.length),s=yn(s),i.slice(u,u+s.length)==s}function LE(i,s,u){var p=w.templateSettings;u&&Qt(i,s,u)&&(s=t),i=Ge(i),s=Ba({},s,p,tp);var v=Ba({},s.imports,p.imports,tp),b=Dt(v),C=du(v,b),S,A,U=0,B=s.interpolate||ta,H="__p += '",$=hu((s.escape||ta).source+"|"+B.source+"|"+(B===Ef?f_:ta).source+"|"+(s.evaluate||ta).source+"|$","g"),oe="//# sourceURL="+(je.call(s,"sourceURL")?(s.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++U_+"]")+`
`;i.replace($,function(me,Ae,Ie,wn,Jt,bn){return Ie||(Ie=wn),H+=i.slice(U,bn).replace(y_,aw),Ae&&(S=!0,H+=`' +
__e(`+Ae+`) +
'`),Jt&&(A=!0,H+=`';
`+Jt+`;
__p += '`),Ie&&(H+=`' +
((__t = (`+Ie+`)) == null ? '' : __t) +
'`),U=bn+me.length,me}),H+=`';
`;var he=je.call(s,"variable")&&s.variable;if(!he)H=`with (obj) {
`+H+`
}
`;else if(u_.test(he))throw new ve(a);H=(A?H.replace(Vy,""):H).replace(Ky,"$1").replace(Zy,"$1;"),H="function("+(he||"obj")+`) {
`+(he?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(S?", __e = _.escape":"")+(A?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+H+`return __p
}`;var Ce=Vp(function(){return Ye(b,oe+"return "+H).apply(t,C)});if(Ce.source=H,Qu(Ce))throw Ce;return Ce}function NE(i){return Ge(i).toLowerCase()}function PE(i){return Ge(i).toUpperCase()}function IE(i,s,u){if(i=Ge(i),i&&(u||s===t))return nd(i);if(!i||!(s=yn(s)))return i;var p=Un(i),v=Un(s),b=rd(p,v),C=id(p,v)+1;return Qr(p,b,C).join("")}function RE(i,s,u){if(i=Ge(i),i&&(u||s===t))return i.slice(0,sd(i)+1);if(!i||!(s=yn(s)))return i;var p=Un(i),v=id(p,Un(s))+1;return Qr(p,0,v).join("")}function FE(i,s,u){if(i=Ge(i),i&&(u||s===t))return i.replace(Ql,"");if(!i||!(s=yn(s)))return i;var p=Un(i),v=rd(p,Un(s));return Qr(p,v).join("")}function YE(i,s){var u=L,p=j;if(it(s)){var v="separator"in s?s.separator:v;u="length"in s?ke(s.length):u,p="omission"in s?yn(s.omission):p}i=Ge(i);var b=i.length;if(io(i)){var C=Un(i);b=C.length}if(u>=b)return i;var S=u-oo(p);if(S<1)return p;var A=C?Qr(C,0,S).join(""):i.slice(0,S);if(v===t)return A+p;if(C&&(S+=A.length-S),Ju(v)){if(i.slice(S).search(v)){var U,B=A;for(v.global||(v=hu(v.source,Ge(xf.exec(v))+"g")),v.lastIndex=0;U=v.exec(B);)var H=U.index;A=A.slice(0,H===t?S:H)}}else if(i.indexOf(yn(v),S)!=S){var $=A.lastIndexOf(v);$>-1&&(A=A.slice(0,$))}return A+p}function GE(i){return i=Ge(i),i&&Xy.test(i)?i.replace(bf,hw):i}var WE=fo(function(i,s,u){return i+(u?" ":"")+s.toUpperCase()}),tc=Kd("toUpperCase");function qp(i,s,u){return i=Ge(i),s=u?t:s,s===t?uw(i)?vw(i):ew(i):i.match(s)||[]}var Vp=Se(function(i,s){try{return gn(i,t,s)}catch(u){return Qu(u)?u:new ve(u)}}),UE=_r(function(i,s){return Sn(s,function(u){u=nr(u),vr(i,u,Zu(i[u],i))}),i});function BE(i){var s=i==null?0:i.length,u=ue();return i=s?nt(i,function(p){if(typeof p[1]!="function")throw new Dn(o);return[u(p[0]),p[1]]}):[],Se(function(p){for(var v=-1;++v<s;){var b=i[v];if(gn(b[0],this,p))return gn(b[1],this,p)}})}function jE(i){return h0(On(i,d))}function nc(i){return function(){return i}}function HE(i,s){return i==null||i!==i?s:i}var zE=Xd(),qE=Xd(!0);function un(i){return i}function rc(i){return Td(typeof i=="function"?i:On(i,d))}function VE(i){return Dd(On(i,d))}function KE(i,s){return Md(i,On(s,d))}var ZE=Se(function(i,s){return function(u){return rs(u,i,s)}}),XE=Se(function(i,s){return function(u){return rs(i,u,s)}});function ic(i,s,u){var p=Dt(s),v=Ea(s,p);u==null&&!(it(s)&&(v.length||!p.length))&&(u=s,s=i,i=this,v=Ea(s,Dt(s)));var b=!(it(u)&&"chain"in u)||!!u.chain,C=br(i);return Sn(v,function(S){var A=s[S];i[S]=A,C&&(i.prototype[S]=function(){var U=this.__chain__;if(b||U){var B=i(this.__wrapped__),H=B.__actions__=sn(this.__actions__);return H.push({func:A,args:arguments,thisArg:i}),B.__chain__=U,B}return A.apply(i,Hr([this.value()],arguments))})}),i}function QE(){return St._===this&&(St._=Ew),this}function oc(){}function JE(i){return i=ke(i),Se(function(s){return Od(s,i)})}var $E=Ru(nt),ex=Ru(Qf),tx=Ru(au);function Kp(i){return ju(i)?lu(nr(i)):A0(i)}function nx(i){return function(s){return i==null?t:bi(i,s)}}var rx=Jd(),ix=Jd(!0);function sc(){return[]}function ac(){return!1}function ox(){return{}}function sx(){return""}function ax(){return!0}function lx(i,s){if(i=ke(i),i<1||i>Z)return[];var u=_e,p=Bt(i,_e);s=ue(s),i-=_e;for(var v=fu(p,s);++u<i;)s(u);return v}function ux(i){return we(i)?nt(i,nr):_n(i)?[i]:sn(hp(Ge(i)))}function cx(i){var s=++bw;return Ge(i)+s}var fx=Ma(function(i,s){return i+s},0),dx=Fu("ceil"),px=Ma(function(i,s){return i/s},1),hx=Fu("floor");function mx(i){return i&&i.length?ka(i,un,ku):t}function gx(i,s){return i&&i.length?ka(i,ue(s,2),ku):t}function vx(i){return ed(i,un)}function yx(i,s){return ed(i,ue(s,2))}function _x(i){return i&&i.length?ka(i,un,Tu):t}function wx(i,s){return i&&i.length?ka(i,ue(s,2),Tu):t}var bx=Ma(function(i,s){return i*s},1),kx=Fu("round"),Ex=Ma(function(i,s){return i-s},0);function xx(i){return i&&i.length?cu(i,un):0}function Cx(i,s){return i&&i.length?cu(i,ue(s,2)):0}return w.after=V1,w.ary=Cp,w.assign=Pk,w.assignIn=Gp,w.assignInWith=Ba,w.assignWith=Ik,w.at=Rk,w.before=Tp,w.bind=Zu,w.bindAll=UE,w.bindKey=Sp,w.castArray=ok,w.chain=kp,w.chunk=hb,w.compact=mb,w.concat=gb,w.cond=BE,w.conforms=jE,w.constant=nc,w.countBy=x1,w.create=Fk,w.curry=Dp,w.curryRight=Mp,w.debounce=Op,w.defaults=Yk,w.defaultsDeep=Gk,w.defer=K1,w.delay=Z1,w.difference=vb,w.differenceBy=yb,w.differenceWith=_b,w.drop=wb,w.dropRight=bb,w.dropRightWhile=kb,w.dropWhile=Eb,w.fill=xb,w.filter=T1,w.flatMap=M1,w.flatMapDeep=O1,w.flatMapDepth=A1,w.flatten=yp,w.flattenDeep=Cb,w.flattenDepth=Tb,w.flip=X1,w.flow=zE,w.flowRight=qE,w.fromPairs=Sb,w.functions=qk,w.functionsIn=Vk,w.groupBy=L1,w.initial=Mb,w.intersection=Ob,w.intersectionBy=Ab,w.intersectionWith=Lb,w.invert=Zk,w.invertBy=Xk,w.invokeMap=P1,w.iteratee=rc,w.keyBy=I1,w.keys=Dt,w.keysIn=ln,w.map=Ra,w.mapKeys=Jk,w.mapValues=$k,w.matches=VE,w.matchesProperty=KE,w.memoize=Ya,w.merge=eE,w.mergeWith=Wp,w.method=ZE,w.methodOf=XE,w.mixin=ic,w.negate=Ga,w.nthArg=JE,w.omit=tE,w.omitBy=nE,w.once=Q1,w.orderBy=R1,w.over=$E,w.overArgs=J1,w.overEvery=ex,w.overSome=tx,w.partial=Xu,w.partialRight=Ap,w.partition=F1,w.pick=rE,w.pickBy=Up,w.property=Kp,w.propertyOf=nx,w.pull=Rb,w.pullAll=wp,w.pullAllBy=Fb,w.pullAllWith=Yb,w.pullAt=Gb,w.range=rx,w.rangeRight=ix,w.rearg=$1,w.reject=W1,w.remove=Wb,w.rest=ek,w.reverse=Vu,w.sampleSize=B1,w.set=oE,w.setWith=sE,w.shuffle=j1,w.slice=Ub,w.sortBy=q1,w.sortedUniq=Kb,w.sortedUniqBy=Zb,w.split=ME,w.spread=tk,w.tail=Xb,w.take=Qb,w.takeRight=Jb,w.takeRightWhile=$b,w.takeWhile=e1,w.tap=m1,w.throttle=nk,w.thru=Ia,w.toArray=Rp,w.toPairs=Bp,w.toPairsIn=jp,w.toPath=ux,w.toPlainObject=Yp,w.transform=aE,w.unary=rk,w.union=t1,w.unionBy=n1,w.unionWith=r1,w.uniq=i1,w.uniqBy=o1,w.uniqWith=s1,w.unset=lE,w.unzip=Ku,w.unzipWith=bp,w.update=uE,w.updateWith=cE,w.values=mo,w.valuesIn=fE,w.without=a1,w.words=qp,w.wrap=ik,w.xor=l1,w.xorBy=u1,w.xorWith=c1,w.zip=f1,w.zipObject=d1,w.zipObjectDeep=p1,w.zipWith=h1,w.entries=Bp,w.entriesIn=jp,w.extend=Gp,w.extendWith=Ba,ic(w,w),w.add=fx,w.attempt=Vp,w.camelCase=mE,w.capitalize=Hp,w.ceil=dx,w.clamp=dE,w.clone=sk,w.cloneDeep=lk,w.cloneDeepWith=uk,w.cloneWith=ak,w.conformsTo=ck,w.deburr=zp,w.defaultTo=HE,w.divide=px,w.endsWith=gE,w.eq=jn,w.escape=vE,w.escapeRegExp=yE,w.every=C1,w.find=S1,w.findIndex=gp,w.findKey=Wk,w.findLast=D1,w.findLastIndex=vp,w.findLastKey=Uk,w.floor=hx,w.forEach=Ep,w.forEachRight=xp,w.forIn=Bk,w.forInRight=jk,w.forOwn=Hk,w.forOwnRight=zk,w.get=$u,w.gt=fk,w.gte=dk,w.has=Kk,w.hasIn=ec,w.head=_p,w.identity=un,w.includes=N1,w.indexOf=Db,w.inRange=pE,w.invoke=Qk,w.isArguments=xi,w.isArray=we,w.isArrayBuffer=pk,w.isArrayLike=an,w.isArrayLikeObject=dt,w.isBoolean=hk,w.isBuffer=Jr,w.isDate=mk,w.isElement=gk,w.isEmpty=vk,w.isEqual=yk,w.isEqualWith=_k,w.isError=Qu,w.isFinite=wk,w.isFunction=br,w.isInteger=Lp,w.isLength=Wa,w.isMap=Np,w.isMatch=bk,w.isMatchWith=kk,w.isNaN=Ek,w.isNative=xk,w.isNil=Tk,w.isNull=Ck,w.isNumber=Pp,w.isObject=it,w.isObjectLike=ut,w.isPlainObject=us,w.isRegExp=Ju,w.isSafeInteger=Sk,w.isSet=Ip,w.isString=Ua,w.isSymbol=_n,w.isTypedArray=ho,w.isUndefined=Dk,w.isWeakMap=Mk,w.isWeakSet=Ok,w.join=Nb,w.kebabCase=_E,w.last=Ln,w.lastIndexOf=Pb,w.lowerCase=wE,w.lowerFirst=bE,w.lt=Ak,w.lte=Lk,w.max=mx,w.maxBy=gx,w.mean=vx,w.meanBy=yx,w.min=_x,w.minBy=wx,w.stubArray=sc,w.stubFalse=ac,w.stubObject=ox,w.stubString=sx,w.stubTrue=ax,w.multiply=bx,w.nth=Ib,w.noConflict=QE,w.noop=oc,w.now=Fa,w.pad=kE,w.padEnd=EE,w.padStart=xE,w.parseInt=CE,w.random=hE,w.reduce=Y1,w.reduceRight=G1,w.repeat=TE,w.replace=SE,w.result=iE,w.round=kx,w.runInContext=O,w.sample=U1,w.size=H1,w.snakeCase=DE,w.some=z1,w.sortedIndex=Bb,w.sortedIndexBy=jb,w.sortedIndexOf=Hb,w.sortedLastIndex=zb,w.sortedLastIndexBy=qb,w.sortedLastIndexOf=Vb,w.startCase=OE,w.startsWith=AE,w.subtract=Ex,w.sum=xx,w.sumBy=Cx,w.template=LE,w.times=lx,w.toFinite=kr,w.toInteger=ke,w.toLength=Fp,w.toLower=NE,w.toNumber=Nn,w.toSafeInteger=Nk,w.toString=Ge,w.toUpper=PE,w.trim=IE,w.trimEnd=RE,w.trimStart=FE,w.truncate=YE,w.unescape=GE,w.uniqueId=cx,w.upperCase=WE,w.upperFirst=tc,w.each=Ep,w.eachRight=xp,w.first=_p,ic(w,function(){var i={};return er(w,function(s,u){je.call(w.prototype,u)||(i[u]=s)}),i}(),{chain:!1}),w.VERSION=e,Sn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(i){w[i].placeholder=w}),Sn(["drop","take"],function(i,s){Ne.prototype[i]=function(u){u=u===t?1:bt(ke(u),0);var p=this.__filtered__&&!s?new Ne(this):this.clone();return p.__filtered__?p.__takeCount__=Bt(u,p.__takeCount__):p.__views__.push({size:Bt(u,_e),type:i+(p.__dir__<0?"Right":"")}),p},Ne.prototype[i+"Right"]=function(u){return this.reverse()[i](u).reverse()}}),Sn(["filter","map","takeWhile"],function(i,s){var u=s+1,p=u==ae||u==J;Ne.prototype[i]=function(v){var b=this.clone();return b.__iteratees__.push({iteratee:ue(v,3),type:u}),b.__filtered__=b.__filtered__||p,b}}),Sn(["head","last"],function(i,s){var u="take"+(s?"Right":"");Ne.prototype[i]=function(){return this[u](1).value()[0]}}),Sn(["initial","tail"],function(i,s){var u="drop"+(s?"":"Right");Ne.prototype[i]=function(){return this.__filtered__?new Ne(this):this[u](1)}}),Ne.prototype.compact=function(){return this.filter(un)},Ne.prototype.find=function(i){return this.filter(i).head()},Ne.prototype.findLast=function(i){return this.reverse().find(i)},Ne.prototype.invokeMap=Se(function(i,s){return typeof i=="function"?new Ne(this):this.map(function(u){return rs(u,i,s)})}),Ne.prototype.reject=function(i){return this.filter(Ga(ue(i)))},Ne.prototype.slice=function(i,s){i=ke(i);var u=this;return u.__filtered__&&(i>0||s<0)?new Ne(u):(i<0?u=u.takeRight(-i):i&&(u=u.drop(i)),s!==t&&(s=ke(s),u=s<0?u.dropRight(-s):u.take(s-i)),u)},Ne.prototype.takeRightWhile=function(i){return this.reverse().takeWhile(i).reverse()},Ne.prototype.toArray=function(){return this.take(_e)},er(Ne.prototype,function(i,s){var u=/^(?:filter|find|map|reject)|While$/.test(s),p=/^(?:head|last)$/.test(s),v=w[p?"take"+(s=="last"?"Right":""):s],b=p||/^find/.test(s);!v||(w.prototype[s]=function(){var C=this.__wrapped__,S=p?[1]:arguments,A=C instanceof Ne,U=S[0],B=A||we(C),H=function(Ae){var Ie=v.apply(w,Hr([Ae],S));return p&&$?Ie[0]:Ie};B&&u&&typeof U=="function"&&U.length!=1&&(A=B=!1);var $=this.__chain__,oe=!!this.__actions__.length,he=b&&!$,Ce=A&&!oe;if(!b&&B){C=Ce?C:new Ne(this);var me=i.apply(C,S);return me.__actions__.push({func:Ia,args:[H],thisArg:t}),new Mn(me,$)}return he&&Ce?i.apply(this,S):(me=this.thru(H),he?p?me.value()[0]:me.value():me)})}),Sn(["pop","push","shift","sort","splice","unshift"],function(i){var s=aa[i],u=/^(?:push|sort|unshift)$/.test(i)?"tap":"thru",p=/^(?:pop|shift)$/.test(i);w.prototype[i]=function(){var v=arguments;if(p&&!this.__chain__){var b=this.value();return s.apply(we(b)?b:[],v)}return this[u](function(C){return s.apply(we(C)?C:[],v)})}}),er(Ne.prototype,function(i,s){var u=w[s];if(u){var p=u.name+"";je.call(lo,p)||(lo[p]=[]),lo[p].push({name:s,func:u})}}),lo[Da(t,x).name]=[{name:"wrapper",func:t}],Ne.prototype.clone=Gw,Ne.prototype.reverse=Ww,Ne.prototype.value=Uw,w.prototype.at=g1,w.prototype.chain=v1,w.prototype.commit=y1,w.prototype.next=_1,w.prototype.plant=b1,w.prototype.reverse=k1,w.prototype.toJSON=w.prototype.valueOf=w.prototype.value=E1,w.prototype.first=w.prototype.head,Xo&&(w.prototype[Xo]=w1),w},qr=yw();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(St._=qr,define(function(){return qr})):gi?((gi.exports=qr)._=qr,ru._=qr):St._=qr}).call(Eo)});var Bc=Ci((q2,cl)=>{var im,om,sm,am,lm,um,cm,fm,dm,ll,Uc,pm,hm,mm,Mo,gm,vm,ym,_m,wm,bm,km,Em,ul;(function(t){var e=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(r){t(n(e,n(r)))}):typeof cl=="object"&&typeof cl.exports=="object"?t(n(e,n(cl.exports))):t(n(e));function n(r,o){return r!==e&&(typeof Object.create=="function"?Object.defineProperty(r,"__esModule",{value:!0}):r.__esModule=!0),function(a,l){return r[a]=o?o(a,l):l}}})(function(t){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(r[a]=o[a])};im=function(r,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");e(r,o);function a(){this.constructor=r}r.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)},om=Object.assign||function(r){for(var o,a=1,l=arguments.length;a<l;a++){o=arguments[a];for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])}return r},sm=function(r,o){var a={};for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&o.indexOf(l)<0&&(a[l]=r[l]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,l=Object.getOwnPropertySymbols(r);c<l.length;c++)o.indexOf(l[c])<0&&Object.prototype.propertyIsEnumerable.call(r,l[c])&&(a[l[c]]=r[l[c]]);return a},am=function(r,o,a,l){var c=arguments.length,f=c<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,a):l,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(r,o,a,l);else for(var h=r.length-1;h>=0;h--)(d=r[h])&&(f=(c<3?d(f):c>3?d(o,a,f):d(o,a))||f);return c>3&&f&&Object.defineProperty(o,a,f),f},lm=function(r,o){return function(a,l){o(a,l,r)}},um=function(r,o){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,o)},cm=function(r,o,a,l){function c(f){return f instanceof a?f:new a(function(d){d(f)})}return new(a||(a=Promise))(function(f,d){function h(y){try{g(l.next(y))}catch(_){d(_)}}function m(y){try{g(l.throw(y))}catch(_){d(_)}}function g(y){y.done?f(y.value):c(y.value).then(h,m)}g((l=l.apply(r,o||[])).next())})},fm=function(r,o){var a={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},l,c,f,d;return d={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function h(g){return function(y){return m([g,y])}}function m(g){if(l)throw new TypeError("Generator is already executing.");for(;a;)try{if(l=1,c&&(f=g[0]&2?c.return:g[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,g[1])).done)return f;switch(c=0,f&&(g=[g[0]&2,f.value]),g[0]){case 0:case 1:f=g;break;case 4:return a.label++,{value:g[1],done:!1};case 5:a.label++,c=g[1],g=[0];continue;case 7:g=a.ops.pop(),a.trys.pop();continue;default:if(f=a.trys,!(f=f.length>0&&f[f.length-1])&&(g[0]===6||g[0]===2)){a=0;continue}if(g[0]===3&&(!f||g[1]>f[0]&&g[1]<f[3])){a.label=g[1];break}if(g[0]===6&&a.label<f[1]){a.label=f[1],f=g;break}if(f&&a.label<f[2]){a.label=f[2],a.ops.push(g);break}f[2]&&a.ops.pop(),a.trys.pop();continue}g=o.call(r,a)}catch(y){g=[6,y],c=0}finally{l=f=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},dm=function(r,o){for(var a in r)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&ul(o,r,a)},ul=Object.create?function(r,o,a,l){l===void 0&&(l=a),Object.defineProperty(r,l,{enumerable:!0,get:function(){return o[a]}})}:function(r,o,a,l){l===void 0&&(l=a),r[l]=o[a]},ll=function(r){var o=typeof Symbol=="function"&&Symbol.iterator,a=o&&r[o],l=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&l>=r.length&&(r=void 0),{value:r&&r[l++],done:!r}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")},Uc=function(r,o){var a=typeof Symbol=="function"&&r[Symbol.iterator];if(!a)return r;var l=a.call(r),c,f=[],d;try{for(;(o===void 0||o-- >0)&&!(c=l.next()).done;)f.push(c.value)}catch(h){d={error:h}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(d)throw d.error}}return f},pm=function(){for(var r=[],o=0;o<arguments.length;o++)r=r.concat(Uc(arguments[o]));return r},hm=function(){for(var r=0,o=0,a=arguments.length;o<a;o++)r+=arguments[o].length;for(var l=Array(r),c=0,o=0;o<a;o++)for(var f=arguments[o],d=0,h=f.length;d<h;d++,c++)l[c]=f[d];return l},mm=function(r,o){for(var a=0,l=o.length,c=r.length;a<l;a++,c++)r[c]=o[a];return r},Mo=function(r){return this instanceof Mo?(this.v=r,this):new Mo(r)},gm=function(r,o,a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l=a.apply(r,o||[]),c,f=[];return c={},d("next"),d("throw"),d("return"),c[Symbol.asyncIterator]=function(){return this},c;function d(x){l[x]&&(c[x]=function(k){return new Promise(function(E,T){f.push([x,k,E,T])>1||h(x,k)})})}function h(x,k){try{m(l[x](k))}catch(E){_(f[0][3],E)}}function m(x){x.value instanceof Mo?Promise.resolve(x.value.v).then(g,y):_(f[0][2],x)}function g(x){h("next",x)}function y(x){h("throw",x)}function _(x,k){x(k),f.shift(),f.length&&h(f[0][0],f[0][1])}},vm=function(r){var o,a;return o={},l("next"),l("throw",function(c){throw c}),l("return"),o[Symbol.iterator]=function(){return this},o;function l(c,f){o[c]=r[c]?function(d){return(a=!a)?{value:Mo(r[c](d)),done:c==="return"}:f?f(d):d}:f}},ym=function(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=r[Symbol.asyncIterator],a;return o?o.call(r):(r=typeof ll=="function"?ll(r):r[Symbol.iterator](),a={},l("next"),l("throw"),l("return"),a[Symbol.asyncIterator]=function(){return this},a);function l(f){a[f]=r[f]&&function(d){return new Promise(function(h,m){d=r[f](d),c(h,m,d.done,d.value)})}}function c(f,d,h,m){Promise.resolve(m).then(function(g){f({value:g,done:h})},d)}},_m=function(r,o){return Object.defineProperty?Object.defineProperty(r,"raw",{value:o}):r.raw=o,r};var n=Object.create?function(r,o){Object.defineProperty(r,"default",{enumerable:!0,value:o})}:function(r,o){r.default=o};wm=function(r){if(r&&r.__esModule)return r;var o={};if(r!=null)for(var a in r)a!=="default"&&Object.prototype.hasOwnProperty.call(r,a)&&ul(o,r,a);return n(o,r),o},bm=function(r){return r&&r.__esModule?r:{default:r}},km=function(r,o,a,l){if(a==="a"&&!l)throw new TypeError("Private accessor was defined without a getter");if(typeof o=="function"?r!==o||!l:!o.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return a==="m"?l:a==="a"?l.call(r):l?l.value:o.get(r)},Em=function(r,o,a,l,c){if(l==="m")throw new TypeError("Private method is not writable");if(l==="a"&&!c)throw new TypeError("Private accessor was defined without a setter");if(typeof o=="function"?r!==o||!c:!o.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return l==="a"?c.call(r,a):c?c.value=a:o.set(r,a),a},t("__extends",im),t("__assign",om),t("__rest",sm),t("__decorate",am),t("__param",lm),t("__metadata",um),t("__awaiter",cm),t("__generator",fm),t("__exportStar",dm),t("__createBinding",ul),t("__values",ll),t("__read",Uc),t("__spread",pm),t("__spreadArrays",hm),t("__spreadArray",mm),t("__await",Mo),t("__asyncGenerator",gm),t("__asyncDelegator",vm),t("__asyncValues",ym),t("__makeTemplateObject",_m),t("__importStar",wm),t("__importDefault",bm),t("__classPrivateFieldGet",km),t("__classPrivateFieldSet",Em)})});var Zm=Ci((tP,hl)=>{var Mm,Om,Am,Lm,Nm,Pm,Im,Rm,Fm,pl,Hc,Ym,Gm,No,Wm,Um,Bm,jm,Hm,zm,qm,Vm,Km;(function(t){var e=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(r){t(n(e,n(r)))}):typeof hl=="object"&&typeof hl.exports=="object"?t(n(e,n(hl.exports))):t(n(e));function n(r,o){return r!==e&&(typeof Object.create=="function"?Object.defineProperty(r,"__esModule",{value:!0}):r.__esModule=!0),function(a,l){return r[a]=o?o(a,l):l}}})(function(t){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)r.hasOwnProperty(o)&&(n[o]=r[o])};Mm=function(n,r){e(n,r);function o(){this.constructor=n}n.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)},Om=Object.assign||function(n){for(var r,o=1,a=arguments.length;o<a;o++){r=arguments[o];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(n[l]=r[l])}return n},Am=function(n,r){var o={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&r.indexOf(a)<0&&(o[a]=n[a]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(n);l<a.length;l++)r.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(n,a[l])&&(o[a[l]]=n[a[l]]);return o},Lm=function(n,r,o,a){var l=arguments.length,c=l<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,o):a,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(n,r,o,a);else for(var d=n.length-1;d>=0;d--)(f=n[d])&&(c=(l<3?f(c):l>3?f(r,o,c):f(r,o))||c);return l>3&&c&&Object.defineProperty(r,o,c),c},Nm=function(n,r){return function(o,a){r(o,a,n)}},Pm=function(n,r){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,r)},Im=function(n,r,o,a){function l(c){return c instanceof o?c:new o(function(f){f(c)})}return new(o||(o=Promise))(function(c,f){function d(g){try{m(a.next(g))}catch(y){f(y)}}function h(g){try{m(a.throw(g))}catch(y){f(y)}}function m(g){g.done?c(g.value):l(g.value).then(d,h)}m((a=a.apply(n,r||[])).next())})},Rm=function(n,r){var o={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},a,l,c,f;return f={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function d(m){return function(g){return h([m,g])}}function h(m){if(a)throw new TypeError("Generator is already executing.");for(;o;)try{if(a=1,l&&(c=m[0]&2?l.return:m[0]?l.throw||((c=l.return)&&c.call(l),0):l.next)&&!(c=c.call(l,m[1])).done)return c;switch(l=0,c&&(m=[m[0]&2,c.value]),m[0]){case 0:case 1:c=m;break;case 4:return o.label++,{value:m[1],done:!1};case 5:o.label++,l=m[1],m=[0];continue;case 7:m=o.ops.pop(),o.trys.pop();continue;default:if(c=o.trys,!(c=c.length>0&&c[c.length-1])&&(m[0]===6||m[0]===2)){o=0;continue}if(m[0]===3&&(!c||m[1]>c[0]&&m[1]<c[3])){o.label=m[1];break}if(m[0]===6&&o.label<c[1]){o.label=c[1],c=m;break}if(c&&o.label<c[2]){o.label=c[2],o.ops.push(m);break}c[2]&&o.ops.pop(),o.trys.pop();continue}m=r.call(n,o)}catch(g){m=[6,g],l=0}finally{a=c=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},Km=function(n,r,o,a){a===void 0&&(a=o),n[a]=r[o]},Fm=function(n,r){for(var o in n)o!=="default"&&!r.hasOwnProperty(o)&&(r[o]=n[o])},pl=function(n){var r=typeof Symbol=="function"&&Symbol.iterator,o=r&&n[r],a=0;if(o)return o.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&a>=n.length&&(n=void 0),{value:n&&n[a++],done:!n}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},Hc=function(n,r){var o=typeof Symbol=="function"&&n[Symbol.iterator];if(!o)return n;var a=o.call(n),l,c=[],f;try{for(;(r===void 0||r-- >0)&&!(l=a.next()).done;)c.push(l.value)}catch(d){f={error:d}}finally{try{l&&!l.done&&(o=a.return)&&o.call(a)}finally{if(f)throw f.error}}return c},Ym=function(){for(var n=[],r=0;r<arguments.length;r++)n=n.concat(Hc(arguments[r]));return n},Gm=function(){for(var n=0,r=0,o=arguments.length;r<o;r++)n+=arguments[r].length;for(var a=Array(n),l=0,r=0;r<o;r++)for(var c=arguments[r],f=0,d=c.length;f<d;f++,l++)a[l]=c[f];return a},No=function(n){return this instanceof No?(this.v=n,this):new No(n)},Wm=function(n,r,o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=o.apply(n,r||[]),l,c=[];return l={},f("next"),f("throw"),f("return"),l[Symbol.asyncIterator]=function(){return this},l;function f(_){a[_]&&(l[_]=function(x){return new Promise(function(k,E){c.push([_,x,k,E])>1||d(_,x)})})}function d(_,x){try{h(a[_](x))}catch(k){y(c[0][3],k)}}function h(_){_.value instanceof No?Promise.resolve(_.value.v).then(m,g):y(c[0][2],_)}function m(_){d("next",_)}function g(_){d("throw",_)}function y(_,x){_(x),c.shift(),c.length&&d(c[0][0],c[0][1])}},Um=function(n){var r,o;return r={},a("next"),a("throw",function(l){throw l}),a("return"),r[Symbol.iterator]=function(){return this},r;function a(l,c){r[l]=n[l]?function(f){return(o=!o)?{value:No(n[l](f)),done:l==="return"}:c?c(f):f}:c}},Bm=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n[Symbol.asyncIterator],o;return r?r.call(n):(n=typeof pl=="function"?pl(n):n[Symbol.iterator](),o={},a("next"),a("throw"),a("return"),o[Symbol.asyncIterator]=function(){return this},o);function a(c){o[c]=n[c]&&function(f){return new Promise(function(d,h){f=n[c](f),l(d,h,f.done,f.value)})}}function l(c,f,d,h){Promise.resolve(h).then(function(m){c({value:m,done:d})},f)}},jm=function(n,r){return Object.defineProperty?Object.defineProperty(n,"raw",{value:r}):n.raw=r,n},Hm=function(n){if(n&&n.__esModule)return n;var r={};if(n!=null)for(var o in n)Object.hasOwnProperty.call(n,o)&&(r[o]=n[o]);return r.default=n,r},zm=function(n){return n&&n.__esModule?n:{default:n}},qm=function(n,r){if(!r.has(n))throw new TypeError("attempted to get private field on non-instance");return r.get(n)},Vm=function(n,r,o){if(!r.has(n))throw new TypeError("attempted to set private field on non-instance");return r.set(n,o),o},t("__extends",Mm),t("__assign",Om),t("__rest",Am),t("__decorate",Lm),t("__param",Nm),t("__metadata",Pm),t("__awaiter",Im),t("__generator",Rm),t("__exportStar",Fm),t("__createBinding",Km),t("__values",pl),t("__read",Hc),t("__spread",Ym),t("__spreadArrays",Gm),t("__await",No),t("__asyncGenerator",Wm),t("__asyncDelegator",Um),t("__asyncValues",Bm),t("__makeTemplateObject",jm),t("__importStar",Hm),t("__importDefault",zm),t("__classPrivateFieldGet",qm),t("__classPrivateFieldSet",Vm)})});var Vg=Ci(ui=>{"use strict";Object.defineProperty(ui,"__esModule",{value:!0});ui.isDate=ui.isComparable=ui.isIterable=void 0;ui.isIterable=t=>!(t==null||t[Symbol.iterator]==null);ui.isComparable=t=>{let e=Object.prototype.toString,n=t;return n.compare!=null&&e.call(n.compare).endsWith("Function]")};ui.isDate=t=>Object.prototype.toString.call(t).endsWith("Date]")});var Zg=Ci(Kg=>{"use strict";Object.defineProperty(Kg,"__esModule",{value:!0})});var Xg=Ci(_l=>{"use strict";Object.defineProperty(_l,"__esModule",{value:!0});var KT=Bc(),$c=Vg(),ZT=(t,e)=>t-e,XT=(t,e)=>Number(t-e),QT=(t,e)=>t.localeCompare(e),JT=(t,e)=>t.getTime()-e.getTime(),Wo={number:ZT,string:QT,Date:JT,bigInt:XT,none:()=>0},$T=t=>{if(typeof t=="number")return Wo.number;if(typeof t=="string")return Wo.string;if(typeof t=="bigint")return Wo.bigInt;if($c.isDate(t))return Wo.Date;if($c.isComparable(t))return(e,n)=>e.compare(n);throw new Error("Cannot sort keys in this map. You have to specify compareFn if the type of key in this map is not number, string, or Date.")},qi=class extends Map{constructor(e,n){super();this.specifiedCompareFn=!1,this.isCompareFn=r=>typeof r=="function",this.compareFn=Wo.none,this.sortedKeys=[],$c.isIterable(e)&&this._constructor(e,n),this.isCompareFn(e)&&this._constructor(null,e),e==null&&this._constructor(null,n)}get comparator(){return this.compareFn}compare(e,n){return Math.sign(this.compareFn(e,n))}_constructor(e,n){if(this.compareFn=n==null?Wo.none:n,this.specifiedCompareFn=n!=null,e!=null)for(let r of e)this.set(...r)}static fromMap(e,n){let r=new qi(n);return r.setAll(e),r}duplicate(){return qi.fromMap(this,this.compareFn)}toMap(){let e=new Map,n=Array.from(super.entries());return n.sort((r,o)=>this.compareFn(r[0],o[0])),n.forEach(([r,o])=>{e.set(r,o)}),e}reverseKeys(){return[...this.sortedKeys].reverse().values()}get(e){let n=this.sortedKeys.find(r=>this.comparator(r,e)===0);if(n!=null)return super.get(n)}set(e,n){this.sortedKeys.length===0&&!this.specifiedCompareFn&&(this.compareFn=$T(e),this.specifiedCompareFn=!0);let r=this.sortedKeys.find(o=>this.compareFn(o,e)===0);return r==null?(this.sortedKeys.push(e),super.set(e,n)):super.set(r,n),this.sortedKeys.sort(this.compareFn),this}setAll(e){return e.forEach((n,r)=>{this.set(r,n)}),this}delete(e){return super.delete(e)?(this.sortedKeys=this.sortedKeys.filter(n=>this.compare(n,e)!==0),!0):!1}clear(){super.clear(),this.sortedKeys=[]}keys(){return this.sortedKeys.values()}values(){return this.sortedKeys.map(e=>super.get(e)).values()}entries(){return this.toMap().entries()}firstEntry(){let e=this.firstKey();if(e==null)return;let n=this.get(e);return n===void 0?void 0:[e,n]}firstKey(){return this.sortedKeys[0]}lastEntry(){let e=this.lastKey();if(e==null)return;let n=this.get(e);return n===void 0?void 0:[e,n]}lastKey(){return[...this.sortedKeys].reverse()[0]}shiftEntry(){let e=this.firstEntry();if(e!=null)return this.delete(e[0]),e}popEntry(){let e=this.lastEntry();if(e!=null)return this.delete(e[0]),e}floorEntry(e){let n=this.floorKey(e);if(n!=null){let r=this.get(n);return r===void 0?void 0:[n,r]}}floorKey(e){return this.sortedKeys.filter(r=>this.compare(r,e)<=0).reverse()[0]}ceilingEntry(e){let n=this.ceilingKey(e);if(n!=null){let r=this.get(n);return r===void 0?void 0:[n,r]}}ceilingKey(e){return this.sortedKeys.filter(r=>this.compare(r,e)>=0)[0]}lowerEntry(e){let n=this.lowerKey(e);if(n!=null){let r=this.get(n);return r===void 0?void 0:[n,r]}}lowerKey(e){return this.sortedKeys.filter(r=>this.compare(r,e)<0).reverse()[0]}higherEntry(e){let n=this.higherKey(e);if(n!=null){let r=this.get(n);return r===void 0?void 0:[n,r]}}higherKey(e){return this.sortedKeys.filter(r=>this.compare(r,e)>0)[0]}splitLower(e,n=!0){let r=Array.from(this.entries()).filter(o=>{let a=this.compare(o[0],e)<0;return n?a||this.compare(o[0],e)===0:a});return new qi(r,this.compareFn)}splitHigher(e,n=!0){let r=Array.from(this.entries()).filter(o=>{let a=this.compare(o[0],e)>0;return n?a||this.compare(o[0],e)===0:a});return new qi(r,this.compareFn)}forEach(e,n){Array.from(this.entries()).forEach(([r,o])=>{e(o,r,this)},n)}};_l.default=qi;KT.__exportStar(Zg(),_l)});Nx(exports,{default:()=>ce});var Gr=ye(require("obsidian"));var lc=ye(require("obsidian")),Ha=new Map;function Ee(t,e=!1){let n=window.moment();Ha.has(t)?(Ha.get(t).isBefore(n)||e)&&(new lc.Notice(t),Ha.set(t,n.add(1,"minute"))):(console.log(`[Google Calendar] ${t}`),new lc.Notice(t),Ha.set(t,n.add(0,"minute")))}var Me=ye(require("obsidian"));var za=()=>{var t;return(t=window.localStorage.getItem("googleCalendarAccessToken"))!=null?t:""},$r=()=>{var t;return(t=window.localStorage.getItem("googleCalendarRefreshToken"))!=null?t:""},qa=()=>{var e;let t=(e=window.localStorage.getItem("googleCalendarExpirationTime"))!=null?e:"0";return parseInt(t,10)},ei=t=>{window.localStorage.setItem("googleCalendarAccessToken",t)},Cr=t=>{t!="undefined"&&window.localStorage.setItem("googleCalendarRefreshToken",t)},ti=t=>{isNaN(t)||window.localStorage.setItem("googleCalendarExpirationTime",t+"")};var Ti=ye(require("obsidian"));var fs=ye(require("crypto")),uc=42813,eh=`http://127.0.0.1:${uc}/callback`,cc="783376961232-v90b17gr1mj1s2mnmdauvkp77u6htpke.apps.googleusercontent.com",rM=window.moment().subtract(100,"seconds"),It={server:null,verifier:null,challenge:null,state:null};function fc(t){return t.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function Ix(t){return fs.createHash("sha256").update(t).digest()}function Rx(){if(!(!za()||za()=="")&&!!qa()&&!isNaN(qa())&&!(qa()<+new Date))return za()}var Fx=t=>G(void 0,null,function*(){var o,a;let e=t.settings.useCustomClient,n={grant_type:"refresh_token",client_id:e?(o=t.settings.googleClientId)==null?void 0:o.trim():cc,client_secret:e?(a=t.settings.googleClientSecret)==null?void 0:a.trim():null,refresh_token:$r()},{json:r}=yield(0,Ti.requestUrl)({method:"POST",url:e?"https://oauth2.googleapis.com/token":`${t.settings.googleOAuthServer}/api/google/refresh`,headers:{"content-type":"application/json"},body:JSON.stringify(n)});if(!r){Ee("Error while refreshing authentication");return}return ei(r.access_token),ti(+new Date+r.expires_in*1e3),r.access_token}),Yx=(t,e,n,r)=>G(void 0,null,function*(){return(yield(0,Ti.requestUrl)({method:"POST",url:`${t.settings.googleOAuthServer}/api/google/token`,headers:{"content-type":"application/json"},body:JSON.stringify({client_id:cc,code_verifier:n,code:r,state:e})})).json}),Gx=(t,e,n,r)=>G(void 0,null,function*(){var l,c;let o=`https://oauth2.googleapis.com/token?grant_type=authorization_code&client_id=${(l=t.settings.googleClientId)==null?void 0:l.trim()}&client_secret=${(c=t.settings.googleClientSecret)==null?void 0:c.trim()}&code_verifier=${n}&code=${r}&state=${e}&redirect_uri=${eh}`;return(yield fetch(o,{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"}})).json()});function th(t){return G(this,null,function*(){if(!We())return;let e=Rx();if(e||(e=yield Fx(t)),!!e)return e})}function nh(){return G(this,null,function*(){let t=ce.getInstance(),e=t.settings.useCustomClient,n=e?t.settings.googleClientId:cc;if(!Ti.Platform.isDesktop){new Ti.Notice("Can't use this OAuth method on this device");return}if(!rh())return;It.state||(It.state=fc(fs.randomBytes(32)),It.verifier=fc(fs.randomBytes(32)),It.challenge=fc(Ix(It.verifier)));let r=`https://accounts.google.com/o/oauth2/v2/auth?client_id=${n}&response_type=code&redirect_uri=${eh}&prompt=consent&access_type=offline&state=${It.state}&code_challenge=${It.challenge}&code_challenge_method=S256&scope=email%20profile%20https://www.googleapis.com/auth/calendar`;if(It.server){window.open(r);return}let o=require("http"),a=require("url");It.server=o.createServer((l,c)=>G(this,null,function*(){try{if(l.url.indexOf("/callback")<0)return;let f=new a.URL(l.url,`http://127.0.0.1:${uc}`).searchParams,d=f.get("code");if(f.get("state")!==It.state)return;let m;e?m=yield Gx(t,It.state,It.verifier,d):m=yield Yx(t,It.state,It.verifier,d),(m==null?void 0:m.refresh_token)&&(Cr(m.refresh_token),ei(m.access_token),ti(+new Date+m.expires_in*1e3)),console.info("Tokens acquired."),c.end("Authentication successful! Please return to obsidian."),It.server.close(()=>{console.log("Server closed")}),t.settingsTab.display()}catch(f){console.log("Auth failed"),It.server.close(()=>{console.log("Server closed")})}It={server:null,verifier:null,challenge:null,state:null}})).listen(uc,()=>G(this,null,function*(){window.open(r)}))})}var ih=ye(require("obsidian")),cn=(t,e,n,r=!1)=>G(void 0,null,function*(){let o=ce.getInstance(),a={"Content-Type":"application/json"};if(r==!1){let l=yield th(o);if(!l)return;a.Authorization="Bearer "+l}if(o.settings.debugMode){console.log(`New Request ${e}:${t}`);let l=xr({},a);l.Authorization&&(l.Authorization=l.Authorization.substring(0,15)+"..."),console.log({body:n,headers:l});let c=yield fetch(t,{method:e,body:n?JSON.stringify(n):null,headers:a});return c.status>=300?void 0:e.toLowerCase()=="delete"?{status:"success"}:yield c.json()}try{let l=yield(0,ih.requestUrl)({method:e,url:t,body:n?JSON.stringify(n):null,headers:a,throw:!0});return l.status>=300?void 0:e.toLowerCase()=="delete"?{status:"success"}:yield l.json}catch(l){return}});var Va=new Map,dc=new Map;function oh(){return G(this,null,function*(){if(!We()||Va.size)return;let t=yield cn("https://www.googleapis.com/calendar/v3/colors","GET",null);if(!t){Ee("Error fetching color data from google");return}Object.keys(t.calendar).forEach(e=>{Va.set(e,t.calendar[e].background)}),Object.keys(t.event).forEach(e=>{dc.set(e,t.event[e].background)})})}function ds(t){return t.colorId&&dc.has(t.colorId)?dc.get(t.colorId):t.parent.colorId&&Va.has(t.parent.colorId)?Va.get(t.parent.colorId):"#a4bdfc"}var pc=[],hc=!1;function sh(t,e){return e.filter(r=>!t.settings.calendarBlackList.some(o=>o[0]==r.id))}function kt(){return G(this,null,function*(){if(!We())return[];let t=ce.getInstance();if(pc.length)return sh(t,pc);if(hc)return[];hc=!0,yield oh();let e=yield cn("https://www.googleapis.com/calendar/v3/users/me/calendarList","GET",null);if(!e)return Ee("Could not list Google Calendars"),[];pc=e.items;let n=sh(t,e.items);return hc=!1,n})}var Kn=ye(require("obsidian"));var Dh=ye(require("obsidian"));var ct="top",Et="bottom",vt="right",ht="left",Ka="auto",ni=[ct,Et,vt,ht],Tr="start",Si="end",ah="clippingParents",Za="viewport",go="popper",lh="reference",mc=ni.reduce(function(t,e){return t.concat([e+"-"+Tr,e+"-"+Si])},[]),Xa=[].concat(ni,[Ka]).reduce(function(t,e){return t.concat([e,e+"-"+Tr,e+"-"+Si])},[]),Wx="beforeRead",Ux="read",Bx="afterRead",jx="beforeMain",Hx="main",zx="afterMain",qx="beforeWrite",Vx="write",Kx="afterWrite",uh=[Wx,Ux,Bx,jx,Hx,zx,qx,Vx,Kx];function Mt(t){return t?(t.nodeName||"").toLowerCase():null}function ot(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Pn(t){var e=ot(t).Element;return t instanceof e||t instanceof Element}function xt(t){var e=ot(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function vo(t){if(typeof ShadowRoot=="undefined")return!1;var e=ot(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function Zx(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},o=e.attributes[n]||{},a=e.elements[n];!xt(a)||!Mt(a)||(Object.assign(a.style,r),Object.keys(o).forEach(function(l){var c=o[l];c===!1?a.removeAttribute(l):a.setAttribute(l,c===!0?"":c)}))})}function Xx(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var o=e.elements[r],a=e.attributes[r]||{},l=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),c=l.reduce(function(f,d){return f[d]="",f},{});!xt(o)||!Mt(o)||(Object.assign(o.style,c),Object.keys(a).forEach(function(f){o.removeAttribute(f)}))})}}var ch={name:"applyStyles",enabled:!0,phase:"write",fn:Zx,effect:Xx,requires:["computeStyles"]};function Ot(t){return t.split("-")[0]}var zn=Math.max,Di=Math.min,Sr=Math.round;function yo(){var t=navigator.userAgentData;return t!=null&&t.brands?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function ps(){return!/^((?!chrome|android).)*safari/i.test(yo())}function In(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),o=1,a=1;e&&xt(t)&&(o=t.offsetWidth>0&&Sr(r.width)/t.offsetWidth||1,a=t.offsetHeight>0&&Sr(r.height)/t.offsetHeight||1);var l=Pn(t)?ot(t):window,c=l.visualViewport,f=!ps()&&n,d=(r.left+(f&&c?c.offsetLeft:0))/o,h=(r.top+(f&&c?c.offsetTop:0))/a,m=r.width/o,g=r.height/a;return{width:m,height:g,top:h,right:d+m,bottom:h+g,left:d,x:d,y:h}}function Mi(t){var e=In(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function hs(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&vo(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function $t(t){return ot(t).getComputedStyle(t)}function gc(t){return["table","td","th"].indexOf(Mt(t))>=0}function Rt(t){return((Pn(t)?t.ownerDocument:t.document)||window.document).documentElement}function Dr(t){return Mt(t)==="html"?t:t.assignedSlot||t.parentNode||(vo(t)?t.host:null)||Rt(t)}function fh(t){return!xt(t)||$t(t).position==="fixed"?null:t.offsetParent}function Qx(t){var e=/firefox/i.test(yo()),n=/Trident/i.test(yo());if(n&&xt(t)){var r=$t(t);if(r.position==="fixed")return null}var o=Dr(t);for(vo(o)&&(o=o.host);xt(o)&&["html","body"].indexOf(Mt(o))<0;){var a=$t(o);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||e&&a.willChange==="filter"||e&&a.filter&&a.filter!=="none")return o;o=o.parentNode}return null}function qn(t){for(var e=ot(t),n=fh(t);n&&gc(n)&&$t(n).position==="static";)n=fh(n);return n&&(Mt(n)==="html"||Mt(n)==="body"&&$t(n).position==="static")?e:n||Qx(t)||e}function Oi(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Ai(t,e,n){return zn(t,Di(e,n))}function dh(t,e,n){var r=Ai(t,e,n);return r>n?n:r}function ms(){return{top:0,right:0,bottom:0,left:0}}function gs(t){return Object.assign({},ms(),t)}function vs(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var Jx=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,gs(typeof e!="number"?e:vs(e,ni))};function $x(t){var e,n=t.state,r=t.name,o=t.options,a=n.elements.arrow,l=n.modifiersData.popperOffsets,c=Ot(n.placement),f=Oi(c),d=[ht,vt].indexOf(c)>=0,h=d?"height":"width";if(!(!a||!l)){var m=Jx(o.padding,n),g=Mi(a),y=f==="y"?ct:ht,_=f==="y"?Et:vt,x=n.rects.reference[h]+n.rects.reference[f]-l[f]-n.rects.popper[h],k=l[f]-n.rects.reference[f],E=qn(a),T=E?f==="y"?E.clientHeight||0:E.clientWidth||0:0,D=x/2-k/2,P=m[y],M=T-g[h]-m[_],R=T/2-g[h]/2+D,Q=Ai(P,R,M),L=f;n.modifiersData[r]=(e={},e[L]=Q,e.centerOffset=Q-R,e)}}function eC(t){var e=t.state,n=t.options,r=n.element,o=r===void 0?"[data-popper-arrow]":r;o!=null&&(typeof o=="string"&&(o=e.elements.popper.querySelector(o),!o)||!hs(e.elements.popper,o)||(e.elements.arrow=o))}var ph={name:"arrow",enabled:!0,phase:"main",fn:$x,effect:eC,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Rn(t){return t.split("-")[1]}var tC={top:"auto",right:"auto",bottom:"auto",left:"auto"};function nC(t){var e=t.x,n=t.y,r=window,o=r.devicePixelRatio||1;return{x:Sr(e*o)/o||0,y:Sr(n*o)/o||0}}function hh(t){var e,n=t.popper,r=t.popperRect,o=t.placement,a=t.variation,l=t.offsets,c=t.position,f=t.gpuAcceleration,d=t.adaptive,h=t.roundOffsets,m=t.isFixed,g=l.x,y=g===void 0?0:g,_=l.y,x=_===void 0?0:_,k=typeof h=="function"?h({x:y,y:x}):{x:y,y:x};y=k.x,x=k.y;var E=l.hasOwnProperty("x"),T=l.hasOwnProperty("y"),D=ht,P=ct,M=window;if(d){var R=qn(n),Q="clientHeight",L="clientWidth";if(R===ot(n)&&(R=Rt(n),$t(R).position!=="static"&&c==="absolute"&&(Q="scrollHeight",L="scrollWidth")),R=R,o===ct||(o===ht||o===vt)&&a===Si){P=Et;var j=m&&R===M&&M.visualViewport?M.visualViewport.height:R[Q];x-=j-r.height,x*=f?1:-1}if(o===ht||(o===ct||o===Et)&&a===Si){D=vt;var ee=m&&R===M&&M.visualViewport?M.visualViewport.width:R[L];y-=ee-r.width,y*=f?1:-1}}var K=Object.assign({position:c},d&&tC),ae=h===!0?nC({x:y,y:x}):{x:y,y:x};if(y=ae.x,x=ae.y,f){var xe;return Object.assign({},K,(xe={},xe[P]=T?"0":"",xe[D]=E?"0":"",xe.transform=(M.devicePixelRatio||1)<=1?"translate("+y+"px, "+x+"px)":"translate3d("+y+"px, "+x+"px, 0)",xe))}return Object.assign({},K,(e={},e[P]=T?x+"px":"",e[D]=E?y+"px":"",e.transform="",e))}function rC(t){var e=t.state,n=t.options,r=n.gpuAcceleration,o=r===void 0?!0:r,a=n.adaptive,l=a===void 0?!0:a,c=n.roundOffsets,f=c===void 0?!0:c;if(!1)var d;var h={placement:Ot(e.placement),variation:Rn(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:o,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,hh(Object.assign({},h,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:l,roundOffsets:f})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,hh(Object.assign({},h,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:f})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var mh={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:rC,data:{}};var Qa={passive:!0};function iC(t){var e=t.state,n=t.instance,r=t.options,o=r.scroll,a=o===void 0?!0:o,l=r.resize,c=l===void 0?!0:l,f=ot(e.elements.popper),d=[].concat(e.scrollParents.reference,e.scrollParents.popper);return a&&d.forEach(function(h){h.addEventListener("scroll",n.update,Qa)}),c&&f.addEventListener("resize",n.update,Qa),function(){a&&d.forEach(function(h){h.removeEventListener("scroll",n.update,Qa)}),c&&f.removeEventListener("resize",n.update,Qa)}}var gh={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:iC,data:{}};var oC={left:"right",right:"left",bottom:"top",top:"bottom"};function _o(t){return t.replace(/left|right|bottom|top/g,function(e){return oC[e]})}var sC={start:"end",end:"start"};function Ja(t){return t.replace(/start|end/g,function(e){return sC[e]})}function Li(t){var e=ot(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function Ni(t){return In(Rt(t)).left+Li(t).scrollLeft}function vc(t,e){var n=ot(t),r=Rt(t),o=n.visualViewport,a=r.clientWidth,l=r.clientHeight,c=0,f=0;if(o){a=o.width,l=o.height;var d=ps();(d||!d&&e==="fixed")&&(c=o.offsetLeft,f=o.offsetTop)}return{width:a,height:l,x:c+Ni(t),y:f}}function yc(t){var e,n=Rt(t),r=Li(t),o=(e=t.ownerDocument)==null?void 0:e.body,a=zn(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),l=zn(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),c=-r.scrollLeft+Ni(t),f=-r.scrollTop;return $t(o||n).direction==="rtl"&&(c+=zn(n.clientWidth,o?o.clientWidth:0)-a),{width:a,height:l,x:c,y:f}}function Pi(t){var e=$t(t),n=e.overflow,r=e.overflowX,o=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+r)}function $a(t){return["html","body","#document"].indexOf(Mt(t))>=0?t.ownerDocument.body:xt(t)&&Pi(t)?t:$a(Dr(t))}function ri(t,e){var n;e===void 0&&(e=[]);var r=$a(t),o=r===((n=t.ownerDocument)==null?void 0:n.body),a=ot(r),l=o?[a].concat(a.visualViewport||[],Pi(r)?r:[]):r,c=e.concat(l);return o?c:c.concat(ri(Dr(l)))}function wo(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function aC(t,e){var n=In(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function vh(t,e,n){return e===Za?wo(vc(t,n)):Pn(e)?aC(e,n):wo(yc(Rt(t)))}function lC(t){var e=ri(Dr(t)),n=["absolute","fixed"].indexOf($t(t).position)>=0,r=n&&xt(t)?qn(t):t;return Pn(r)?e.filter(function(o){return Pn(o)&&hs(o,r)&&Mt(o)!=="body"}):[]}function _c(t,e,n,r){var o=e==="clippingParents"?lC(t):[].concat(e),a=[].concat(o,[n]),l=a[0],c=a.reduce(function(f,d){var h=vh(t,d,r);return f.top=zn(h.top,f.top),f.right=Di(h.right,f.right),f.bottom=Di(h.bottom,f.bottom),f.left=zn(h.left,f.left),f},vh(t,l,r));return c.width=c.right-c.left,c.height=c.bottom-c.top,c.x=c.left,c.y=c.top,c}function ys(t){var e=t.reference,n=t.element,r=t.placement,o=r?Ot(r):null,a=r?Rn(r):null,l=e.x+e.width/2-n.width/2,c=e.y+e.height/2-n.height/2,f;switch(o){case ct:f={x:l,y:e.y-n.height};break;case Et:f={x:l,y:e.y+e.height};break;case vt:f={x:e.x+e.width,y:c};break;case ht:f={x:e.x-n.width,y:c};break;default:f={x:e.x,y:e.y}}var d=o?Oi(o):null;if(d!=null){var h=d==="y"?"height":"width";switch(a){case Tr:f[d]=f[d]-(e[h]/2-n[h]/2);break;case Si:f[d]=f[d]+(e[h]/2-n[h]/2);break;default:}}return f}function Vn(t,e){e===void 0&&(e={});var n=e,r=n.placement,o=r===void 0?t.placement:r,a=n.strategy,l=a===void 0?t.strategy:a,c=n.boundary,f=c===void 0?ah:c,d=n.rootBoundary,h=d===void 0?Za:d,m=n.elementContext,g=m===void 0?go:m,y=n.altBoundary,_=y===void 0?!1:y,x=n.padding,k=x===void 0?0:x,E=gs(typeof k!="number"?k:vs(k,ni)),T=g===go?lh:go,D=t.rects.popper,P=t.elements[_?T:g],M=_c(Pn(P)?P:P.contextElement||Rt(t.elements.popper),f,h,l),R=In(t.elements.reference),Q=ys({reference:R,element:D,strategy:"absolute",placement:o}),L=wo(Object.assign({},D,Q)),j=g===go?L:R,ee={top:M.top-j.top+E.top,bottom:j.bottom-M.bottom+E.bottom,left:M.left-j.left+E.left,right:j.right-M.right+E.right},K=t.modifiersData.offset;if(g===go&&K){var ae=K[o];Object.keys(ee).forEach(function(xe){var J=[vt,Et].indexOf(xe)>=0?1:-1,ie=[ct,Et].indexOf(xe)>=0?"y":"x";ee[xe]+=ae[ie]*J})}return ee}function wc(t,e){e===void 0&&(e={});var n=e,r=n.placement,o=n.boundary,a=n.rootBoundary,l=n.padding,c=n.flipVariations,f=n.allowedAutoPlacements,d=f===void 0?Xa:f,h=Rn(r),m=h?c?mc:mc.filter(function(_){return Rn(_)===h}):ni,g=m.filter(function(_){return d.indexOf(_)>=0});g.length===0&&(g=m);var y=g.reduce(function(_,x){return _[x]=Vn(t,{placement:x,boundary:o,rootBoundary:a,padding:l})[Ot(x)],_},{});return Object.keys(y).sort(function(_,x){return y[_]-y[x]})}function uC(t){if(Ot(t)===Ka)return[];var e=_o(t);return[Ja(t),e,Ja(e)]}function cC(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var o=n.mainAxis,a=o===void 0?!0:o,l=n.altAxis,c=l===void 0?!0:l,f=n.fallbackPlacements,d=n.padding,h=n.boundary,m=n.rootBoundary,g=n.altBoundary,y=n.flipVariations,_=y===void 0?!0:y,x=n.allowedAutoPlacements,k=e.options.placement,E=Ot(k),T=E===k,D=f||(T||!_?[_o(k)]:uC(k)),P=[k].concat(D).reduce(function(rn,Zt){return rn.concat(Ot(Zt)===Ka?wc(e,{placement:Zt,boundary:h,rootBoundary:m,padding:d,flipVariations:_,allowedAutoPlacements:x}):Zt)},[]),M=e.rects.reference,R=e.rects.popper,Q=new Map,L=!0,j=P[0],ee=0;ee<P.length;ee++){var K=P[ee],ae=Ot(K),xe=Rn(K)===Tr,J=[ct,Et].indexOf(ae)>=0,ie=J?"width":"height",Z=Vn(e,{placement:K,boundary:h,rootBoundary:m,altBoundary:g,padding:d}),z=J?xe?vt:ht:xe?Et:ct;M[ie]>R[ie]&&(z=_o(z));var X=_o(z),_e=[];if(a&&_e.push(Z[ae]<=0),c&&_e.push(Z[z]<=0,Z[X]<=0),_e.every(function(rn){return rn})){j=K,L=!1;break}Q.set(K,_e)}if(L)for(var tt=_?3:1,Fe=function(Zt){var lt=P.find(function(pn){var on=Q.get(pn);if(on)return on.slice(0,Zt).every(function(_t){return _t})});if(lt)return j=lt,"break"},at=tt;at>0;at--){var ze=Fe(at);if(ze==="break")break}e.placement!==j&&(e.modifiersData[r]._skip=!0,e.placement=j,e.reset=!0)}}var yh={name:"flip",enabled:!0,phase:"main",fn:cC,requiresIfExists:["offset"],data:{_skip:!1}};function _h(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function wh(t){return[ct,vt,Et,ht].some(function(e){return t[e]>=0})}function fC(t){var e=t.state,n=t.name,r=e.rects.reference,o=e.rects.popper,a=e.modifiersData.preventOverflow,l=Vn(e,{elementContext:"reference"}),c=Vn(e,{altBoundary:!0}),f=_h(l,r),d=_h(c,o,a),h=wh(f),m=wh(d);e.modifiersData[n]={referenceClippingOffsets:f,popperEscapeOffsets:d,isReferenceHidden:h,hasPopperEscaped:m},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":m})}var bh={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:fC};function dC(t,e,n){var r=Ot(t),o=[ht,ct].indexOf(r)>=0?-1:1,a=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,l=a[0],c=a[1];return l=l||0,c=(c||0)*o,[ht,vt].indexOf(r)>=0?{x:c,y:l}:{x:l,y:c}}function pC(t){var e=t.state,n=t.options,r=t.name,o=n.offset,a=o===void 0?[0,0]:o,l=Xa.reduce(function(h,m){return h[m]=dC(m,e.rects,a),h},{}),c=l[e.placement],f=c.x,d=c.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=f,e.modifiersData.popperOffsets.y+=d),e.modifiersData[r]=l}var kh={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:pC};function hC(t){var e=t.state,n=t.name;e.modifiersData[n]=ys({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var Eh={name:"popperOffsets",enabled:!0,phase:"read",fn:hC,data:{}};function bc(t){return t==="x"?"y":"x"}function mC(t){var e=t.state,n=t.options,r=t.name,o=n.mainAxis,a=o===void 0?!0:o,l=n.altAxis,c=l===void 0?!1:l,f=n.boundary,d=n.rootBoundary,h=n.altBoundary,m=n.padding,g=n.tether,y=g===void 0?!0:g,_=n.tetherOffset,x=_===void 0?0:_,k=Vn(e,{boundary:f,rootBoundary:d,padding:m,altBoundary:h}),E=Ot(e.placement),T=Rn(e.placement),D=!T,P=Oi(E),M=bc(P),R=e.modifiersData.popperOffsets,Q=e.rects.reference,L=e.rects.popper,j=typeof x=="function"?x(Object.assign({},e.rects,{placement:e.placement})):x,ee=typeof j=="number"?{mainAxis:j,altAxis:j}:Object.assign({mainAxis:0,altAxis:0},j),K=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,ae={x:0,y:0};if(!!R){if(a){var xe,J=P==="y"?ct:ht,ie=P==="y"?Et:vt,Z=P==="y"?"height":"width",z=R[P],X=z+k[J],_e=z-k[ie],tt=y?-L[Z]/2:0,Fe=T===Tr?Q[Z]:L[Z],at=T===Tr?-L[Z]:-Q[Z],ze=e.elements.arrow,rn=y&&ze?Mi(ze):{width:0,height:0},Zt=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:ms(),lt=Zt[J],pn=Zt[ie],on=Ai(0,Q[Z],rn[Z]),_t=D?Q[Z]/2-tt-on-lt-ee.mainAxis:Fe-on-lt-ee.mainAxis,ft=D?-Q[Z]/2+tt+on+pn+ee.mainAxis:at+on+pn+ee.mainAxis,Be=e.elements.arrow&&qn(e.elements.arrow),Xe=Be?P==="y"?Be.clientTop||0:Be.clientLeft||0:0,Wr=(xe=K==null?void 0:K[P])!=null?xe:0,Bl=z+_t-Wr-Xe,Wn=z+ft-Wr,Vo=Ai(y?Di(X,Bl):X,z,y?zn(_e,Wn):_e);R[P]=Vo,ae[P]=Vo-z}if(c){var $s,mi=P==="x"?ct:ht,hn=P==="x"?Et:vt,mn=R[M],pr=M==="y"?"height":"width",ea=mn+k[mi],Ur=mn-k[hn],Ko=[ct,ht].indexOf(E)!==-1,Br=($s=K==null?void 0:K[M])!=null?$s:0,hr=Ko?ea:mn-Q[pr]-L[pr]-Br+ee.altAxis,eo=Ko?mn+Q[pr]+L[pr]-Br-ee.altAxis:Ur,to=y&&Ko?dh(hr,mn,eo):Ai(y?hr:ea,mn,y?eo:Ur);R[M]=to,ae[M]=to-mn}e.modifiersData[r]=ae}}var xh={name:"preventOverflow",enabled:!0,phase:"main",fn:mC,requiresIfExists:["offset"]};function kc(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function Ec(t){return t===ot(t)||!xt(t)?Li(t):kc(t)}function gC(t){var e=t.getBoundingClientRect(),n=Sr(e.width)/t.offsetWidth||1,r=Sr(e.height)/t.offsetHeight||1;return n!==1||r!==1}function xc(t,e,n){n===void 0&&(n=!1);var r=xt(e),o=xt(e)&&gC(e),a=Rt(e),l=In(t,o,n),c={scrollLeft:0,scrollTop:0},f={x:0,y:0};return(r||!r&&!n)&&((Mt(e)!=="body"||Pi(a))&&(c=Ec(e)),xt(e)?(f=In(e,!0),f.x+=e.clientLeft,f.y+=e.clientTop):a&&(f.x=Ni(a))),{x:l.left+c.scrollLeft-f.x,y:l.top+c.scrollTop-f.y,width:l.width,height:l.height}}function vC(t){var e=new Map,n=new Set,r=[];t.forEach(function(a){e.set(a.name,a)});function o(a){n.add(a.name);var l=[].concat(a.requires||[],a.requiresIfExists||[]);l.forEach(function(c){if(!n.has(c)){var f=e.get(c);f&&o(f)}}),r.push(a)}return t.forEach(function(a){n.has(a.name)||o(a)}),r}function Cc(t){var e=vC(t);return uh.reduce(function(n,r){return n.concat(e.filter(function(o){return o.phase===r}))},[])}function Tc(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function Sc(t){var e=t.reduce(function(n,r){var o=n[r.name];return n[r.name]=o?Object.assign({},o,r,{options:Object.assign({},o.options,r.options),data:Object.assign({},o.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var Ch={placement:"bottom",modifiers:[],strategy:"absolute"};function Th(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function Sh(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,o=e.defaultOptions,a=o===void 0?Ch:o;return function(c,f,d){d===void 0&&(d=a);var h={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ch,a),modifiersData:{},elements:{reference:c,popper:f},attributes:{},styles:{}},m=[],g=!1,y={state:h,setOptions:function(E){var T=typeof E=="function"?E(h.options):E;x(),h.options=Object.assign({},a,h.options,T),h.scrollParents={reference:Pn(c)?ri(c):c.contextElement?ri(c.contextElement):[],popper:ri(f)};var D=Cc(Sc([].concat(r,h.options.modifiers)));if(h.orderedModifiers=D.filter(function(K){return K.enabled}),!1){var P;if(getBasePlacement(h.options.placement)===auto)var M;var R,Q,L,j,ee}return _(),y.update()},forceUpdate:function(){if(!g){var E=h.elements,T=E.reference,D=E.popper;if(!!Th(T,D)){h.rects={reference:xc(T,qn(D),h.options.strategy==="fixed"),popper:Mi(D)},h.reset=!1,h.placement=h.options.placement,h.orderedModifiers.forEach(function(K){return h.modifiersData[K.name]=Object.assign({},K.data)});for(var P=0,M=0;M<h.orderedModifiers.length;M++){if(h.reset===!0){h.reset=!1,M=-1;continue}var R=h.orderedModifiers[M],Q=R.fn,L=R.options,j=L===void 0?{}:L,ee=R.name;typeof Q=="function"&&(h=Q({state:h,options:j,name:ee,instance:y})||h)}}}},update:Tc(function(){return new Promise(function(k){y.forceUpdate(),k(h)})}),destroy:function(){x(),g=!0}};if(!Th(c,f))return y;y.setOptions(d).then(function(k){!g&&d.onFirstUpdate&&d.onFirstUpdate(k)});function _(){h.orderedModifiers.forEach(function(k){var E=k.name,T=k.options,D=T===void 0?{}:T,P=k.effect;if(typeof P=="function"){var M=P({state:h,name:E,instance:y,options:D}),R=function(){};m.push(M||R)}})}function x(){m.forEach(function(k){return k()}),m=[]}return y}}var yC=[gh,Eh,mh,ch,kh,yh,xh,ph,bh],Dc=Sh({defaultModifiers:yC});var _C=(t,e)=>(t%e+e)%e,Mh=class{constructor(e,n,r){this.owner=e,this.containerEl=n,n.on("click",".suggestion-item",this.onSuggestionClick.bind(this)),n.on("mousemove",".suggestion-item",this.onSuggestionMouseover.bind(this)),r.register([],"ArrowUp",o=>{if(!o.isComposing)return this.setSelectedItem(this.selectedItem-1,!0),!1}),r.register([],"ArrowDown",o=>{if(!o.isComposing)return this.setSelectedItem(this.selectedItem+1,!0),!1}),r.register([],"Enter",o=>{if(!o.isComposing)return this.useSelectedItem(o),!1})}onSuggestionClick(e,n){e.preventDefault();let r=this.suggestions.indexOf(n);this.setSelectedItem(r,!1),this.useSelectedItem(e)}onSuggestionMouseover(e,n){let r=this.suggestions.indexOf(n);this.setSelectedItem(r,!1)}setSuggestions(e){this.containerEl.empty();let n=[];e.forEach(r=>{let o=this.containerEl.createDiv("suggestion-item");this.owner.renderSuggestion(r,o),n.push(o)}),this.values=e,this.suggestions=n,this.setSelectedItem(0,!1)}useSelectedItem(e){let n=this.values[this.selectedItem];n&&this.owner.selectSuggestion(n,e)}setSelectedItem(e,n){let r=_C(e,this.suggestions.length),o=this.suggestions[this.selectedItem],a=this.suggestions[r];o==null||o.removeClass("is-selected"),a==null||a.addClass("is-selected"),this.selectedItem=r,n&&a.scrollIntoView(!1)}},_s=class{constructor(e){this.inputEl=e,this.scope=new Dh.Scope,this.suggestEl=createDiv("suggestion-container");let n=this.suggestEl.createDiv("suggestion");this.suggest=new Mh(this,n,this.scope),this.scope.register([],"Escape",this.close.bind(this)),this.inputEl.addEventListener("input",this.onInputChanged.bind(this)),this.inputEl.addEventListener("focus",this.onInputChanged.bind(this)),this.inputEl.addEventListener("blur",this.close.bind(this)),this.suggestEl.on("mousedown",".suggestion-container",r=>{r.preventDefault()})}onInputChanged(){let e=this.inputEl.value,n=this.getSuggestions(e);if(!n){this.close();return}n.length>0?(this.suggest.setSuggestions(n),this.open(app.dom.appContainerEl,this.inputEl)):this.close()}open(e,n){app.keymap.pushScope(this.scope),e.appendChild(this.suggestEl),this.popper=Dc(n,this.suggestEl,{placement:"bottom-start",modifiers:[{name:"sameWidth",enabled:!0,fn:({state:r,instance:o})=>{let a=`${r.rects.reference.width}px`;r.styles.popper.width!==a&&(r.styles.popper.width=a,o.update())},phase:"beforeWrite",requires:["computeStyles"]}]})}close(){app.keymap.popScope(this.scope),this.suggest.setSuggestions([]),this.popper&&this.popper.destroy(),this.suggestEl.detach()}};function wC(t){t=(0,Kn.normalizePath)(t);let e=app.vault.getAbstractFileByPath(t);return!e||!(e instanceof Kn.TFolder)?null:e}function Oh(t){let e=wC(t),n=[];return Kn.Vault.recurseChildren(e,r=>{r instanceof Kn.TFile&&n.push(r)}),n.sort((r,o)=>r.basename.localeCompare(o.basename)),n}var Ah;(function(n){n[n.TemplateFiles=0]="TemplateFiles",n[n.ScriptFiles=1]="ScriptFiles"})(Ah||(Ah={}));var ws=class extends _s{constructor(e,n){super(e);this.inputEl=e;this.plugin=n}getSuggestions(e){var l,c,f,d,h,m,g;let n=[];if(this.plugin.templaterPlugin){let y=(0,Kn.normalizePath)((f=(c=(l=this.plugin)==null?void 0:l.templaterPlugin)==null?void 0:c.settings)==null?void 0:f.templates_folder),_=Oh(y);n=[...n,..._]}if(this.plugin.coreTemplatePlugin){let y=(0,Kn.normalizePath)((g=(m=(h=(d=this.plugin)==null?void 0:d.coreTemplatePlugin)==null?void 0:h.instance)==null?void 0:m.options)==null?void 0:g.folder),_=Oh(y);n=[...n,..._]}if(!n)return[];let r=new Set(n),o=[],a=e.toLowerCase();return r.forEach(y=>{y instanceof Kn.TFile&&y.extension==="md"&&y.path.toLowerCase().contains(a)&&o.push(y)}),o}renderSuggestion(e,n){n.setText(e.path)}selectSuggestion(e){this.inputEl.value=e.path,this.inputEl.trigger("input"),this.close()}};var Lh=ye(require("obsidian"));var bs=class extends _s{getSuggestions(e){let n=app.vault.getAllLoadedFiles(),r=[],o=e.toLowerCase();return n.forEach(a=>{a instanceof Lh.TFolder&&a.path.toLowerCase().contains(o)&&r.push(a)}),r}renderSuggestion(e,n){n.setText(e.path)}selectSuggestion(e){this.inputEl.value=e.path,this.inputEl.trigger("input"),this.close()}};var Fn=ye(el()),Ac=ye(Mr()),tl={},Lc={},xo=t=>G(void 0,null,function*(){if(!app.workspace.layoutReady||!t.settings.activateDailyNoteAddon)return;let e={};try{e=(0,Fn.getAllDailyNotes)()}catch(n){console.log("Daily note folder not set. Deactivated Show Daily notes setting."),t.settings.activateDailyNoteAddon=!1,t.saveSettings()}Ac.default.isEqual(tl,e)==!1&&(tl=e)}),ii=t=>G(void 0,null,function*(){if(!app.workspace.layoutReady||!t.settings.activateDailyNoteAddon||!t.settings.useWeeklyNotes)return;let e={};try{e=(0,Fn.getAllWeeklyNotes)()}catch(n){console.log("Daily note folder not set. Deactivated Show Daily notes setting."),t.settings.activateDailyNoteAddon=!1,t.saveSettings()}Ac.default.isEqual(Lc,e)==!1&&(Lc=e)}),nl=()=>tl,Ii=t=>(0,Fn.getDailyNote)(t,tl);var Os=t=>(0,Fn.getWeeklyNote)(t,Lc),Qh=t=>G(void 0,null,function*(){var e,n,r,o;if(!t.type||t.type==="daily"){let a=Ii((e=t.date)!=null?e:window.moment());return a||(a=yield(0,Fn.createDailyNote)((n=t.date)!=null?n:window.moment()),xo(ce.getInstance()),a)}if(t.type==="weekly"){let a=Os((r=t.date)!=null?r:window.moment());return a||(a=yield(0,Fn.createWeeklyNote)((o=t.date)!=null?o:window.moment()),ii(ce.getInstance()),a)}}),Or=t=>G(void 0,null,function*(){var r,o;let e=yield Qh(t);yield app.workspace.getLeaf((r=t.openInNewTab)!=null?r:!1,(o=t.openToRight)!=null?o:"horizontal").openFile(e,{active:!0})}),Nc=t=>G(void 0,null,function*(){let e=yield Qh(t);yield app.workspace.openPopoutLeaf().openFile(e,{active:!0})});var Pc=class extends Me.PluginSettingTab{constructor(e,n){super(e,n);this.plugin=n}display(){let{containerEl:e}=this,n=$r();e.empty(),e.createEl("h2",{text:"Settings for Google Calendar"}),e.createEl("h4",{text:"Please restart Obsidian to let changes take effect"}),new Me.Setting(e).setName("Use own authentication client").setDesc("Please create your own client.").addToggle(o=>o.setValue(this.plugin.settings.useCustomClient).onChange(a=>G(this,null,function*(){Cr(""),ei(""),ti(0),this.plugin.settings.useCustomClient=a,yield this.plugin.saveSettings(),this.display()}))),this.plugin.settings.useCustomClient?(new Me.Setting(e).setName("ClientId").setDesc("Google client id").setClass("SubSettings").addText(o=>o.setPlaceholder("Enter your client id").setValue(this.plugin.settings.googleClientId).onChange(a=>G(this,null,function*(){this.plugin.settings.googleClientId=a.trim(),yield this.plugin.saveSettings()}))),new Me.Setting(e).setName("ClientSecret").setDesc("Google client secret").setClass("SubSettings").addText(o=>o.setPlaceholder("Enter your client secret").setValue(this.plugin.settings.googleClientSecret).onChange(a=>G(this,null,function*(){this.plugin.settings.googleClientSecret=a.trim(),yield this.plugin.saveSettings()}))),Me.Platform.isMobileApp&&new Me.Setting(e).setName("Refresh Token").setDesc("Google Refresh Token from OAuth").setClass("SubSettings").addText(o=>o.setPlaceholder("Enter refresh token").setValue(this.plugin.settings.googleRefreshToken).onChange(a=>G(this,null,function*(){this.plugin.settings.googleRefreshToken=a.trim(),Cr(a)})))):new Me.Setting(e).setName("Server url").setDesc("The url to the server where the oauth takes place").setClass("SubSettings").addText(o=>{o.setValue(this.plugin.settings.googleOAuthServer).onChange(a=>G(this,null,function*(){this.plugin.settings.googleOAuthServer=a.trim(),yield this.plugin.saveSettings()}))}),new Me.Setting(e).setName("Login with google").addButton(o=>{o.setButtonText(n?"Logout":"Login").onClick(()=>{n?(Cr(""),ei(""),ti(0),this.hide(),this.display()):Me.Platform.isMobileApp?this.plugin.settings.useCustomClient?Cr(this.plugin.settings.googleRefreshToken):window.open(`${this.plugin.settings.googleOAuthServer}/api/google`):nh()})}),new Me.Setting(e).setName("Refresh Interval").setDesc("Time in seconds between refresh request from google server").addSlider(o=>{o.setValue(this.plugin.settings.refreshInterval),o.setLimits(this.plugin.settings.useCustomClient?10:60,360,1),o.setDynamicTooltip(),o.onChange(a=>G(this,null,function*(){a<60&&!this.plugin.settings.useCustomClient||(this.plugin.settings.refreshInterval=a,yield this.plugin.saveSettings())}))}),new Me.Setting(e).setName("Use event Notification").setDesc("Will send notification when an event starts").addToggle(o=>{o.setValue(this.plugin.settings.useNotification),o.onChange(a=>G(this,null,function*(){this.plugin.settings.useNotification=a,yield this.plugin.saveSettings(),this.hide(),this.display()}))}),new Me.Setting(e).setName("Default webview theme").addDropdown(o=>G(this,null,function*(){o.addOption("auto","Auto"),o.addOption("dark","Dark"),o.addOption("light","Light"),o.setValue(this.plugin.settings.webViewDefaultColorMode),o.onChange(a=>G(this,null,function*(){this.plugin.settings.webViewDefaultColorMode=a,yield this.plugin.saveSettings(),this.hide(),this.display()}))})),new Me.Setting(e).setName("Default webview view mode").addDropdown(o=>G(this,null,function*(){o.addOption("day","Day"),o.addOption("week","Week"),o.addOption("month","Month"),o.addOption("agenda","Agenda"),o.setValue(this.plugin.settings.webViewDefaultView),o.onChange(a=>G(this,null,function*(){this.plugin.settings.webViewDefaultView=a,yield this.plugin.saveSettings(),this.hide(),this.display()}))})),new Me.Setting(e).setName("Show daily notes").setDesc("Will display daily notes and allow to open and create daily notes").addToggle(o=>{o.setValue(this.plugin.settings.activateDailyNoteAddon),o.onChange(a=>G(this,null,function*(){this.plugin.settings.activateDailyNoteAddon=a,yield this.plugin.saveSettings(),this.hide(),this.display()}))}),this.plugin.settings.activateDailyNoteAddon&&(new Me.Setting(e).setName("Use Weekly Notes").setDesc("Will show week numbers with weekly note dots").setClass("SubSettings").addToggle(o=>{o.setValue(this.plugin.settings.useWeeklyNotes),o.onChange(a=>G(this,null,function*(){this.plugin.settings.useWeeklyNotes=a,a&&ii(this.plugin),yield this.plugin.saveSettings(),this.hide(),this.display()}))}),new Me.Setting(e).setName("Daily dot color").setDesc("Color for daily note dots in month view").setClass("SubSettings").addText(o=>{o.inputEl.type="color",o.setValue(this.plugin.settings.dailyNoteDotColor),o.onChange(a=>G(this,null,function*(){this.plugin.settings.dailyNoteDotColor=a,yield this.plugin.saveSettings()}))})),new Me.Setting(e).setName("Enable @ Annotations").setDesc("Will help you to easily link events from you calendar in your notes").addToggle(o=>{o.setValue(this.plugin.settings.atAnnotationEnabled),o.onChange(a=>G(this,null,function*(){this.plugin.settings.atAnnotationEnabled=a,yield this.plugin.saveSettings(),this.hide(),this.display()}))}),this.plugin.settings.atAnnotationEnabled&&new Me.Setting(e).setName("@ Annotation date format").setDesc("SWitch between mm/dd/yyyy and dd/mm/yyyy").setClass("SubSettings").addDropdown(o=>{o.addOption("mm/dd/yyyy","mm/dd/yyyy"),o.addOption("dd/mm/yyyy","dd/mm/yyyy"),o.setValue(this.plugin.settings.usDateFormat?"mm/dd/yyyy":"dd/mm/yyyy"),o.onChange(a=>G(this,null,function*(){a=="mm/dd/yyyy"?this.plugin.settings.usDateFormat=!0:this.plugin.settings.usDateFormat=!1,yield this.plugin.saveSettings(),this.hide(),this.display()}))}),new Me.Setting(e).setName("Auto create Event Notes").setDesc("Will create new notes from a event if the description contains :obsidian:").addToggle(o=>{o.setValue(this.plugin.settings.autoCreateEventNotes),o.onChange(a=>G(this,null,function*(){this.plugin.settings.autoCreateEventNotes=a,yield this.plugin.saveSettings(),this.hide(),this.display()}))}),new Me.Setting(e).setName("Keep auto created Notes open").setDesc("When creating a new note should it stay open for direct editing").setClass("SubSettings").addToggle(o=>{o.setValue(this.plugin.settings.autoCreateEventKeepOpen),o.onChange(a=>G(this,null,function*(){this.plugin.settings.autoCreateEventKeepOpen=a,yield this.plugin.saveSettings(),this.hide(),this.display()}))}),new Me.Setting(e).setName("Import Start Offset").setDesc("Days in the past from events to import").setClass("SubSettings").addSlider(o=>{o.setValue(this.plugin.settings.importStartOffset),o.setLimits(0,7,1),o.setDynamicTooltip(),o.onChange(a=>G(this,null,function*(){o.showTooltip(),this.plugin.settings.importStartOffset=a,yield this.plugin.saveSettings()}))}),new Me.Setting(e).setName("Import End Offset").setDesc("Days in the future from events to import").setClass("SubSettings").addSlider(o=>{o.setValue(this.plugin.settings.importEndOffset),o.setLimits(0,7,1),o.setDynamicTooltip(),o.onChange(a=>G(this,null,function*(){this.plugin.settings.importEndOffset=a,yield this.plugin.saveSettings()}))}),new Me.Setting(e).setName("Event Note Prefix").setDesc("Optional prefix for event notes to improve performance").setClass("SubSettings").addText(o=>{o.setValue(this.plugin.settings.optionalNotePrefix),o.onChange(a=>G(this,null,function*(){this.plugin.settings.optionalNotePrefix=a,yield this.plugin.saveSettings()}))}),new Me.Setting(e).setName("Event Note Name Format").setDesc("Define how the event note name should look like").setClass("SubSettings").addText(o=>{o.setValue(this.plugin.settings.eventNoteNameFormat),o.onChange(a=>G(this,null,function*(){this.plugin.settings.eventNoteNameFormat=a,yield this.plugin.saveSettings()}))}),new Me.Setting(e).setName("Debug Mode").setDesc("Enable if something is not working").addToggle(o=>{o.setValue(this.plugin.settings.debugMode),o.onChange(a=>G(this,null,function*(){this.plugin.settings.debugMode=a,yield this.plugin.saveSettings()}))}),new Me.Setting(e).setName("Use defaults for note creation").setDesc("If active creating notes will be faster but less flexible").addToggle(o=>{o.setValue(this.plugin.settings.useDefaultTemplate),o.onChange(a=>G(this,null,function*(){this.plugin.settings.useDefaultTemplate=a,yield this.plugin.saveSettings(),this.display()}))}),this.plugin.settings.useDefaultTemplate&&(new Me.Setting(e).setName("Default Template").setDesc("Template to use at note creation").setClass("SubSettings").addSearch(o=>{new ws(o.inputEl,this.plugin),o.setPlaceholder("Template").setValue(this.plugin.settings.defaultTemplate).onChange(a=>G(this,null,function*(){this.plugin.settings.defaultTemplate=a,yield this.plugin.saveSettings()})),o.containerEl.addClass("templater_search")}),new Me.Setting(e).setName("Default Folder").setDesc("Folder to save notes to after creation").setClass("SubSettings").addSearch(o=>{new bs(o.inputEl),o.setPlaceholder("Example: folder1/folder2").setValue(this.plugin.settings.defaultFolder).onChange(a=>G(this,null,function*(){this.plugin.settings.defaultFolder=a,yield this.plugin.saveSettings()})),o.containerEl.addClass("templater_search")}));let r=this.plugin.settings.insertTemplates;if(r.length&&(new Me.Setting(e).setName("Saved Templates"),r.forEach(o=>{let a=new Me.Setting(e).setClass("SubSettings").setName(o.name).addButton(l=>{l.setButtonText("Remove"),l.onClick(()=>G(this,null,function*(){this.plugin.settings.insertTemplates.remove(o),a.settingEl.remove(),yield this.plugin.saveSettings(),this.hide(),this.display()}))})})),We()){new Me.Setting(e).setName("Default Calendar").addDropdown(a=>G(this,null,function*(){a.addOption("Default","Select a calendar"),(yield kt()).forEach(c=>{a.addOption(c.id,c.summary)}),a.setValue(this.plugin.settings.defaultCalendar),a.onChange(c=>G(this,null,function*(){this.plugin.settings.defaultCalendar=c,yield this.plugin.saveSettings()}))})),e.createEl("h3","Calendar Blacklist");let o=this.plugin.settings.calendarBlackList;new Me.Setting(e).setName("Add Item to BlackList").addDropdown(a=>G(this,null,function*(){a.addOption("Default","Select Option to add"),(yield kt()).forEach(c=>{a.addOption(c.id+"_=_"+c.summary,c.summary)}),a.onChange(c=>G(this,null,function*(){let[f,d]=c.split("_=_");o.contains([f,d])||(this.plugin.settings.calendarBlackList=[...o,[f,d]],yield this.plugin.saveSettings());let h=new Me.Setting(e).setClass("SubSettings").setName(d).addButton(m=>{m.setButtonText("Remove"),m.onClick(()=>G(this,null,function*(){this.plugin.settings.calendarBlackList.remove([f,d]),h.settingEl.remove(),yield this.plugin.saveSettings()}))})}))})),o.forEach(a=>{let l=new Me.Setting(e).setClass("SubSettings").setName(a[1]).addButton(c=>{c.setButtonText("Remove"),c.onClick(()=>G(this,null,function*(){this.plugin.settings.calendarBlackList.remove(a),l.settingEl.remove(),yield this.plugin.saveSettings()}))})})}}};function rh(){let t=ce.getInstance();return t.settings.useCustomClient&&(t.settings.googleClientId==""||t.settings.googleClientSecret=="")?(Ee("Google Calendar missing settings"),!1):!0}function We(){return!$r()||$r()==""?(Ee("Google Calendar missing settings or not logged in"),!1):!0}var qg=ye(require("obsidian"));var Ic=ye(Mr());var rl=new Map;function kn(){rl.clear()}function Ve(){return G(this,arguments,function*({startDate:t,endDate:e,exclude:n,include:r}={}){let o=ce.getInstance();t||(t=window.moment()),t=t.startOf("day"),e||(e=t.clone()),e=e.endOf("day");let a=yield kt();r&&r.length?a=a.filter(c=>r.contains(c.id)||r.contains(c.summary)):n&&n.length&&(a=a.filter(c=>!(n.contains(c.id)||n.contains(c.summary))));let l=[];for(let c=0;c<a.length;c++){let f=yield zC(o,a[c],t,e);l=[...l,...f]}return l=Ic.default.orderBy(l,[c=>{var f;return new Date((f=c.start.date)!=null?f:c.start.dateTime)}],"asc"),l})}function BC(t,e,n){return G(this,null,function*(){if(!We())return[];let r,o=2500,a=[];do{let l=`https://www.googleapis.com/calendar/v3/calendars/${encodeURIComponent(t.id)}/events?`;if(l+=`maxResults=${o}`,l+="&futureevents=true",l+="&singleEvents=true",l+="&orderby=starttime",l+="&sortorder=ascending",l+=`&timeMin=${e}`,l+=`&timeMax=${n}`,r&&r.nextPageToken&&(l+=`&nextPageToken=${r.nextPageToken}`),r=yield cn(l,"GET",null),!r){Ee("Could not list Google Events");continue}let c=r.items.filter(f=>(f.parent=t,f.status!="cancelled"));a=[...a,...c]}while(r.items.length==o);return a})}function jC(t,e,n){let r=[];return t.forEach(o=>{if(!o.start.dateTime||!o.end.dateTime)return;let a=window.moment(o.end.dateTime),l=window.moment(o.start.dateTime);if(l.isSame(a,"day"))return;let c=[],f=a.endOf("day").diff(l.startOf("day"),"days")+1,d=o.summary,h=1;do o.summary=`${d} (Day ${h}/${f})`,o.eventType="multiDay",c=[...c,structuredClone(o)],h++,l=l.add(1,"days"),o.start.dateTime=l.format("YYYY-MM-DD HH:mm");while(!l.isAfter(a,"day"));c=c.filter(m=>{let g=window.moment(m.start.dateTime);return!(e&&g.isBefore(e,"day")||n&&g.isSameOrAfter(n,"day"))}),o.eventType="delete",r=[...r,...c]}),t=[...t,...r],t}function HC(t,e,n,r){let o=n.clone(),a=[];for(;o<=r;){let l=JSON.stringify({day:o.format("YYYY-MM-DD"),calendar:e.id});if(!rl.has(l))return null;!t.settings.useCustomClient&&t.settings.refreshInterval<60&&(t.settings.refreshInterval=60);let{events:c,updated:f}=rl.get(l);if(f.clone().add(t.settings.refreshInterval,"second").isBefore(window.moment()))return null;a=[...a,...c],o.add(1,"day")}return a}function zC(t,e,n,r){return G(this,null,function*(){let o=HC(t,e,n,r);if(o)return o;let a=yield BC(e,n.toISOString(),r.toISOString());a=jC(a,n,r),a=a.filter(f=>f.eventType!=="delete");let l=Ic.default.groupBy(a,f=>window.moment(f.start.dateTime).format("YYYY-MM-DD")),c=n.clone();for(;c<=r;){let f=c.format("YYYY-MM-DD"),d=JSON.stringify({day:f,calendar:e.id});rl.set(d,{events:l[f]||[],updated:window.moment()}),c.add(1,"day")}return a})}var Hg=ye(require("obsidian"));var jg=ye(require("obsidian"));function Le(){}function Rc(t){return t()}function Jh(){return Object.create(null)}function At(t){t.forEach(Rc)}function $h(t){return typeof t=="function"}function Ht(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}var il;function Ri(t,e){return il||(il=document.createElement("a")),il.href=e,t===il.href}function em(t){return Object.keys(t).length===0}function Co(t){return t==null?"":t}var W2=typeof window!="undefined";var U2=new Set;var tm=!1;function qC(){tm=!0}function VC(){tm=!1}function I(t,e){t.appendChild(e)}function fn(t,e,n){let r=KC(t);if(!r.getElementById(e)){let o=Y("style");o.id=e,o.textContent=n,ZC(r,o)}}function KC(t){if(!t)return document;let e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function ZC(t,e){I(t.head||t,e)}function V(t,e,n){t.insertBefore(e,n||null)}function q(t){t.parentNode.removeChild(t)}function Ft(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function Y(t){return document.createElement(t)}function et(t){return document.createTextNode(t)}function te(){return et(" ")}function rr(){return et("")}function fe(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function N(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function XC(t){return Array.from(t.childNodes)}function en(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Xn(t,e){t.value=e==null?"":e}function de(t,e,n,r){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function As(t,e){for(let n=0;n<t.options.length;n+=1){let r=t.options[n];if(r.__value===e){r.selected=!0;return}}t.selectedIndex=-1}function Fc(t){let e=t.querySelector(":checked")||t.options[0];return e&&e.__value}var B2=new Map;var Ls;function Ns(t){Ls=t}function nm(){if(!Ls)throw new Error("Function called outside component initialization");return Ls}function Fi(t){nm().$$.on_mount.push(t)}function Yi(t){nm().$$.on_destroy.push(t)}var Ps=[];var tn=[],ol=[],Yc=[],QC=Promise.resolve(),Gc=!1;function JC(){Gc||(Gc=!0,QC.then(rm))}function To(t){ol.push(t)}function Ar(t){Yc.push(t)}var Wc=new Set,sl=0;function rm(){let t=Ls;do{for(;sl<Ps.length;){let e=Ps[sl];sl++,Ns(e),$C(e.$$)}for(Ns(null),Ps.length=0,sl=0;tn.length;)tn.pop()();for(let e=0;e<ol.length;e+=1){let n=ol[e];Wc.has(n)||(Wc.add(n),n())}ol.length=0}while(Ps.length);for(;Yc.length;)Yc.pop()();Gc=!1,Wc.clear(),Ns(t)}function $C(t){if(t.fragment!==null){t.update(),At(t.before_update);let e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(To)}}var al=new Set,Gi;function So(){Gi={r:0,c:[],p:Gi}}function Do(){Gi.r||At(Gi.c),Gi=Gi.p}function Ct(t,e){t&&t.i&&(al.delete(t),t.i(e))}function Yt(t,e,n,r){if(t&&t.o){if(al.has(t))return;al.add(t),Gi.c.push(()=>{al.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}var j2=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;var H2=new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]);function Lr(t,e,n){let r=t.$$.props[e];r!==void 0&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function oi(t){t&&t.c()}function Nr(t,e,n,r){let{fragment:o,on_mount:a,on_destroy:l,after_update:c}=t.$$;o&&o.m(e,n),r||To(()=>{let f=a.map(Rc).filter($h);l?l.push(...f):At(f),t.$$.on_mount=[]}),c.forEach(To)}function ir(t,e){let n=t.$$;n.fragment!==null&&(At(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function eT(t,e){t.$$.dirty[0]===-1&&(Ps.push(t),JC(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function zt(t,e,n,r,o,a,l,c=[-1]){let f=Ls;Ns(t);let d=t.$$={fragment:null,ctx:null,props:a,update:Le,not_equal:o,bound:Jh(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(f?f.$$.context:[])),callbacks:Jh(),dirty:c,skip_bound:!1,root:e.target||f.$$.root};l&&l(d.root);let h=!1;if(d.ctx=n?n(t,e.props||{},(m,g,...y)=>{let _=y.length?y[0]:g;return d.ctx&&o(d.ctx[m],d.ctx[m]=_)&&(!d.skip_bound&&d.bound[m]&&d.bound[m](_),h&&eT(t,m)),g}):[],d.update(),h=!0,At(d.before_update),d.fragment=r?r(d.ctx):!1,e.target){if(e.hydrate){qC();let m=XC(e.target);d.fragment&&d.fragment.l(m),m.forEach(q)}else d.fragment&&d.fragment.c();e.intro&&Ct(t.$$.fragment),Nr(t,e.target,e.anchor,e.customElement),VC(),rm()}Ns(f)}var tT;typeof HTMLElement=="function"&&(tT=class extends HTMLElement{constructor(){super();this.attachShadow({mode:"open"})}connectedCallback(){let{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(Rc).filter($h);for(let e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(t,e,n){this[t]=n}disconnectedCallback(){At(this.$$.on_disconnect)}$destroy(){ir(this,1),this.$destroy=Le}$on(t,e){let n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{let r=n.indexOf(e);r!==-1&&n.splice(r,1)}}$set(t){this.$$set&&!em(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});var Gt=class{$destroy(){ir(this,1),this.$destroy=Le}$on(e,n){let r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{let o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(e){this.$$set&&!em(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};var xm=ye(Bc()),{__extends:V2,__assign:K2,__rest:Z2,__decorate:X2,__param:Q2,__metadata:J2,__awaiter:Ke,__generator:$2,__exportStar:eN,__createBinding:tN,__values:nN,__read:rN,__spread:iN,__spreadArrays:oN,__spreadArray:sN,__await:aN,__asyncGenerator:lN,__asyncDelegator:uN,__asyncValues:cN,__makeTemplateObject:fN,__importStar:dN,__importDefault:pN,__classPrivateFieldGet:hN,__classPrivateFieldSet:mN}=xm.default;function Oo(t,e=!1){return G(this,null,function*(){var l,c,f;let n=ce.getInstance();if(!We())return!1;let r=(l=t.parent)==null?void 0:l.id;if(r||(r=(c=n.settings.defaultCalendar)!=null?c:""),r==="")return Ee("Calendar id missing"),!1;let o=(f=t.recurringEventId)!=null?f:t.id;return!e&&t.recurringEventId&&(o=t.id),!!(yield cn(`https://www.googleapis.com/calendar/v3/calendars/${r}/events/${o}`,"DELETE",null))})}function or(t,e){return G(this,null,function*(){if(!We())return null;let n=yield cn(`https://www.googleapis.com/calendar/v3/calendars/${e}/events/${t}`,"GET",null);return n.parent=(yield kt()).find(r=>r.id===e),n||(Ee("Could not get Google Event"),null)})}function Ao(t,e=!1){return G(this,null,function*(){if(!We())return null;if(e&&t.recurringEventId){let o=yield or(t.recurringEventId,t.parent.id);t=xr(xr({},o),t),t.start.dateTime?(t.start.dateTime=window.moment(t.start.dateTime).date(window.moment(o.start.dateTime).date()).format(),t.end.dateTime=window.moment(t.end.dateTime).date(window.moment(o.end.dateTime).date()).format()):(t.start.date=window.moment(o.start.date).format("YYYY-MM-DD"),t.end.date=window.moment(o.end.date).format("YYYY-MM-DD")),t.id=o.id,t.recurrence=o.recurrence,t.id=o.id,delete t.recurringEventId,delete t.originalStartTime}let n=t.parent.id;delete t.parent;let r=yield cn(`https://www.googleapis.com/calendar/v3/calendars/${n}/events/${t.id}`,"PUT",t);return r?(Ee("Updated Event",!0),r):(Ee("Could not create Google Event"),null)})}function Cm(t){return window.moment(t).format("YYYY-MM-DD")}function Tm(t){return window.moment(t).format()}function Lo(t){return G(this,null,function*(){var o;let e=ce.getInstance();if(t.start.date?(t.start.date=Cm(t.start.date),t.end.date=Cm(t.end.date)):(t.start.dateTime=Tm(t.start.dateTime),t.end.dateTime=Tm(t.end.dateTime)),!We())return null;let n="";if(((o=t==null?void 0:t.parent)==null?void 0:o.id)?(n=t.parent.id,t.start.timeZone=t.parent.timeZone,t.end.timeZone=t.parent.timeZone,delete t.parent):n=e.settings.defaultCalendar,n==="")return Ee("Could not create Google Event because no default calendar selected in Settings"),null;let r=yield cn(`https://www.googleapis.com/calendar/v3/calendars/${n}/events`,"POST",t);return r?(Ee(`Google Event ${r.summary} created`,!0),r):(Ee("Could not create Google Event"),null)})}var fl=["MO","TU","WE","TH","FR","SA","SU"],yt=function(){function t(e,n){if(n===0)throw new Error("Can't create weekday with n == 0");this.weekday=e,this.n=n}return t.fromStr=function(e){return new t(fl.indexOf(e))},t.prototype.nth=function(e){return this.n===e?this:new t(this.weekday,e)},t.prototype.equals=function(e){return this.weekday===e.weekday&&this.n===e.n},t.prototype.toString=function(){var e=fl[this.weekday];return this.n&&(e=(this.n>0?"+":"")+String(this.n)+e),e},t.prototype.getJsWeekday=function(){return this.weekday===6?0:this.weekday+1},t}();var Je=function(t){return t!=null},En=function(t){return typeof t=="number"},jc=function(t){return fl.indexOf(t)>=0},Wt=Array.isArray,Yn=function(t,e){e===void 0&&(e=t),arguments.length===1&&(e=t,t=0);for(var n=[],r=t;r<e;r++)n.push(r);return n};var Pe=function(t,e){var n=0,r=[];if(Wt(t))for(;n<e;n++)r[n]=[].concat(t);else for(;n<e;n++)r[n]=t;return r},Sm=function(t){return Wt(t)?t:[t]};function Wi(t,e,n){n===void 0&&(n=" ");var r=String(t);return e=e>>0,r.length>e?String(r):(e=e-r.length,e>n.length&&(n+=Pe(n,e/n.length)),n.slice(0,e)+String(r))}var Dm=function(t,e,n){var r=t.split(e);return n?r.slice(0,n).concat([r.slice(n).join(e)]):r},qt=function(t,e){var n=t%e;return n*e<0?n+e:n},dl=function(t,e){return{div:Math.floor(t/e),mod:qt(t,e)}},xn=function(t){return!Je(t)||t.length===0},mt=function(t){return!xn(t)},Re=function(t,e){return mt(t)&&t.indexOf(e)!==-1};var si;(function(t){t.MONTH_DAYS=[31,28,31,30,31,30,31,31,30,31,30,31],t.ONE_DAY=1e3*60*60*24,t.MAXYEAR=9999,t.ORDINAL_BASE=new Date(Date.UTC(1970,0,1)),t.PY_WEEKDAYS=[6,0,1,2,3,4,5],t.getYearDay=function(e){var n=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate());return Math.ceil((n.valueOf()-new Date(e.getUTCFullYear(),0,1).valueOf())/t.ONE_DAY)+1},t.isLeapYear=function(e){return e%4==0&&e%100!=0||e%400==0},t.isDate=function(e){return e instanceof Date},t.isValidDate=function(e){return t.isDate(e)&&!isNaN(e.getTime())},t.tzOffset=function(e){return e.getTimezoneOffset()*60*1e3},t.daysBetween=function(e,n){var r=e.getTime()-t.tzOffset(e),o=n.getTime()-t.tzOffset(n),a=r-o;return Math.round(a/t.ONE_DAY)},t.toOrdinal=function(e){return t.daysBetween(e,t.ORDINAL_BASE)},t.fromOrdinal=function(e){return new Date(t.ORDINAL_BASE.getTime()+e*t.ONE_DAY)},t.getMonthDays=function(e){var n=e.getUTCMonth();return n===1&&t.isLeapYear(e.getUTCFullYear())?29:t.MONTH_DAYS[n]},t.getWeekday=function(e){return t.PY_WEEKDAYS[e.getUTCDay()]},t.monthRange=function(e,n){var r=new Date(Date.UTC(e,n,1));return[t.getWeekday(r),t.getMonthDays(r)]},t.combine=function(e,n){return n=n||e,new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()))},t.clone=function(e){var n=new Date(e.getTime());return n},t.cloneDates=function(e){for(var n=[],r=0;r<e.length;r++)n.push(t.clone(e[r]));return n},t.sort=function(e){e.sort(function(n,r){return n.getTime()-r.getTime()})},t.timeToUntilString=function(e,n){n===void 0&&(n=!0);var r=new Date(e);return[Wi(r.getUTCFullYear().toString(),4,"0"),Wi(r.getUTCMonth()+1,2,"0"),Wi(r.getUTCDate(),2,"0"),"T",Wi(r.getUTCHours(),2,"0"),Wi(r.getUTCMinutes(),2,"0"),Wi(r.getUTCSeconds(),2,"0"),n?"Z":""].join("")},t.untilStringToDate=function(e){var n=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z?)?$/,r=n.exec(e);if(!r)throw new Error("Invalid UNTIL value: "+e);return new Date(Date.UTC(parseInt(r[1],10),parseInt(r[2],10)-1,parseInt(r[3],10),parseInt(r[5],10)||0,parseInt(r[6],10)||0,parseInt(r[7],10)||0))}})(si||(si={}));var ge=si;var nT=function(){function t(e,n){this.minDate=null,this.maxDate=null,this._result=[],this.total=0,this.method=e,this.args=n,e==="between"?(this.maxDate=n.inc?n.before:new Date(n.before.getTime()-1),this.minDate=n.inc?n.after:new Date(n.after.getTime()+1)):e==="before"?this.maxDate=n.inc?n.dt:new Date(n.dt.getTime()-1):e==="after"&&(this.minDate=n.inc?n.dt:new Date(n.dt.getTime()+1))}return t.prototype.accept=function(e){++this.total;var n=this.minDate&&e<this.minDate,r=this.maxDate&&e>this.maxDate;if(this.method==="between"){if(n)return!0;if(r)return!1}else if(this.method==="before"){if(r)return!1}else if(this.method==="after")return n?!0:(this.add(e),!1);return this.add(e)},t.prototype.add=function(e){return this._result.push(e),!0},t.prototype.getValue=function(){var e=this._result;switch(this.method){case"all":case"between":return e;case"before":case"after":default:return e.length?e[e.length-1]:null}},t.prototype.clone=function(){return new t(this.method,this.args)},t}(),Pr=nT;var Xm=ye(Zm()),{__extends:Po,__assign:nn,__rest:nP,__decorate:rP,__param:iP,__metadata:oP,__awaiter:sP,__generator:aP,__exportStar:lP,__createBinding:uP,__values:cP,__read:fP,__spread:dP,__spreadArrays:Ui,__await:pP,__asyncGenerator:hP,__asyncDelegator:mP,__asyncValues:gP,__makeTemplateObject:vP,__importStar:yP,__importDefault:_P,__classPrivateFieldGet:wP,__classPrivateFieldSet:bP}=Xm.default;var rT=function(t){Po(e,t);function e(n,r,o){var a=t.call(this,n,r)||this;return a.iterator=o,a}return e.prototype.add=function(n){return this.iterator(n,this._result.length)?(this._result.push(n),!0):!1},e}(Pr),zc=rT;var iT={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},Bi=iT;var Qm=function(t,e){return t.indexOf(e)!==-1},oT=function(t){return t.toString()},sT=function(t,e,n){return e+" "+n+", "+t},aT=function(){function t(e,n,r,o){if(n===void 0&&(n=oT),r===void 0&&(r=Bi),o===void 0&&(o=sT),this.text=[],this.language=r||Bi,this.gettext=n,this.dateFormatter=o,this.rrule=e,this.options=e.options,this.origOptions=e.origOptions,this.origOptions.bymonthday){var a=[].concat(this.options.bymonthday),l=[].concat(this.options.bynmonthday);a.sort(function(h,m){return h-m}),l.sort(function(h,m){return m-h}),this.bymonthday=a.concat(l),this.bymonthday.length||(this.bymonthday=null)}if(Je(this.origOptions.byweekday)){var c=Wt(this.origOptions.byweekday)?this.origOptions.byweekday:[this.origOptions.byweekday],f=String(c);this.byweekday={allWeeks:c.filter(function(h){return!h.n}),someWeeks:c.filter(function(h){return Boolean(h.n)}),isWeekdays:f.indexOf("MO")!==-1&&f.indexOf("TU")!==-1&&f.indexOf("WE")!==-1&&f.indexOf("TH")!==-1&&f.indexOf("FR")!==-1&&f.indexOf("SA")===-1&&f.indexOf("SU")===-1,isEveryDay:f.indexOf("MO")!==-1&&f.indexOf("TU")!==-1&&f.indexOf("WE")!==-1&&f.indexOf("TH")!==-1&&f.indexOf("FR")!==-1&&f.indexOf("SA")!==-1&&f.indexOf("SU")!==-1};var d=function(h,m){return h.weekday-m.weekday};this.byweekday.allWeeks.sort(d),this.byweekday.someWeeks.sort(d),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null}return t.isFullyConvertible=function(e){var n=!0;if(!(e.options.freq in t.IMPLEMENTED)||e.origOptions.until&&e.origOptions.count)return!1;for(var r in e.origOptions){if(Qm(["dtstart","wkst","freq"],r))return!0;if(!Qm(t.IMPLEMENTED[e.options.freq],r))return!1}return n},t.prototype.isFullyConvertible=function(){return t.isFullyConvertible(this.rrule)},t.prototype.toString=function(){var e=this.gettext;if(!(this.options.freq in t.IMPLEMENTED))return e("RRule error: Unable to fully convert this rrule to text");if(this.text=[e("every")],this[se.FREQUENCIES[this.options.freq]](),this.options.until){this.add(e("until"));var n=this.options.until;this.add(this.dateFormatter(n.getUTCFullYear(),this.language.monthNames[n.getUTCMonth()],n.getUTCDate()))}else this.options.count&&this.add(e("for")).add(this.options.count.toString()).add(this.plural(this.options.count)?e("times"):e("time"));return this.isFullyConvertible()||this.add(e("(~ approximate)")),this.text.join("")},t.prototype.HOURLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("hours"):e("hour"))},t.prototype.MINUTELY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("minutes"):e("minute"))},t.prototype.DAILY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.byweekday&&this.byweekday.isWeekdays?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(this.plural(this.options.interval)?e("days"):e("day")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday?this._byweekday():this.origOptions.byhour&&this._byhour()},t.prototype.WEEKLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()).add(this.plural(this.options.interval)?e("weeks"):e("week")),this.byweekday&&this.byweekday.isWeekdays?this.options.interval===1?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(e("on")).add(e("weekdays")):this.byweekday&&this.byweekday.isEveryDay?this.add(this.plural(this.options.interval)?e("days"):e("day")):(this.options.interval===1&&this.add(e("week")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday())},t.prototype.MONTHLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()).add(e("months")),this.plural(this.options.interval)&&this.add(e("in"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("months"):e("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(e("on")).add(e("weekdays")):this.byweekday&&this._byweekday()},t.prototype.YEARLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()),this.add(e("years"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("years"):e("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(e("on the")).add(this.list(this.options.byyearday,this.nth,e("and"))).add(e("day")),this.options.byweekno&&this.add(e("in")).add(this.plural(this.options.byweekno.length)?e("weeks"):e("week")).add(this.list(this.options.byweekno,void 0,e("and")))},t.prototype._bymonthday=function(){var e=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,e("or"))).add(e("the")).add(this.list(this.bymonthday,this.nth,e("or"))):this.add(e("on the")).add(this.list(this.bymonthday,this.nth,e("and")))},t.prototype._byweekday=function(){var e=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(e("and")),this.add(e("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,e("and"))))},t.prototype._byhour=function(){var e=this.gettext;this.add(e("at")).add(this.list(this.origOptions.byhour,void 0,e("and")))},t.prototype._bymonth=function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},t.prototype.nth=function(e){e=parseInt(e.toString(),10);var n,r,o=this.gettext;if(e===-1)return o("last");switch(r=Math.abs(e),r){case 1:case 21:case 31:n=r+o("st");break;case 2:case 22:n=r+o("nd");break;case 3:case 23:n=r+o("rd");break;default:n=r+o("th")}return e<0?n+" "+o("last"):n},t.prototype.monthtext=function(e){return this.language.monthNames[e-1]},t.prototype.weekdaytext=function(e){var n=En(e)?(e+1)%7:e.getJsWeekday();return(e.n?this.nth(e.n)+" ":"")+this.language.dayNames[n]},t.prototype.plural=function(e){return e%100!=1},t.prototype.add=function(e){return this.text.push(" "),this.text.push(e),this},t.prototype.list=function(e,n,r,o){o===void 0&&(o=","),Wt(e)||(e=[e]);var a=function(f,d,h){for(var m="",g=0;g<f.length;g++)g!==0&&(g===f.length-1?m+=" "+h+" ":m+=d+" "),m+=f[g];return m};n=n||function(f){return f.toString()};var l=this,c=function(f){return n&&n.call(l,f)};return r?a(e.map(c),o,r):e.map(c).join(o+" ")},t}(),sr=aT;var lT=function(){function t(e){this.done=!0,this.rules=e}return t.prototype.start=function(e){return this.text=e,this.done=!1,this.nextSymbol()},t.prototype.isDone=function(){return this.done&&this.symbol===null},t.prototype.nextSymbol=function(){var e,n,r=this;this.symbol=null,this.value=null;do{if(this.done)return!1;var o=void 0;e=null;for(var a in this.rules){o=this.rules[a];var l=o.exec(r.text);l&&(e===null||l[0].length>e[0].length)&&(e=l,n=a)}if(e!=null&&(this.text=this.text.substr(e[0].length),this.text===""&&(this.done=!0)),e==null){this.done=!0,this.symbol=null,this.value=null;return}}while(n==="SKIP");return this.symbol=n,this.value=e,!0},t.prototype.accept=function(e){if(this.symbol===e){if(this.value){var n=this.value;return this.nextSymbol(),n}return this.nextSymbol(),!0}return!1},t.prototype.acceptNumber=function(){return this.accept("number")},t.prototype.expect=function(e){if(this.accept(e))return!0;throw new Error("expected "+e+" but found "+this.symbol)},t}();function Is(t,e){e===void 0&&(e=Bi);var n={},r=new lT(e.tokens);if(!r.start(t))return null;return o(),n;function o(){r.expect("every");var g=r.acceptNumber();if(g&&(n.interval=parseInt(g[0],10)),r.isDone())throw new Error("Unexpected end");switch(r.symbol){case"day(s)":n.freq=se.DAILY,r.nextSymbol()&&(l(),m());break;case"weekday(s)":n.freq=se.WEEKLY,n.byweekday=[se.MO,se.TU,se.WE,se.TH,se.FR],r.nextSymbol(),m();break;case"week(s)":n.freq=se.WEEKLY,r.nextSymbol()&&(a(),m());break;case"hour(s)":n.freq=se.HOURLY,r.nextSymbol()&&(a(),m());break;case"minute(s)":n.freq=se.MINUTELY,r.nextSymbol()&&(a(),m());break;case"month(s)":n.freq=se.MONTHLY,r.nextSymbol()&&(a(),m());break;case"year(s)":n.freq=se.YEARLY,r.nextSymbol()&&(a(),m());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":n.freq=se.WEEKLY;var y=r.symbol.substr(0,2).toUpperCase();if(n.byweekday=[se[y]],!r.nextSymbol())return;for(;r.accept("comma");){if(r.isDone())throw new Error("Unexpected end");var _=f();if(!_)throw new Error("Unexpected symbol "+r.symbol+", expected weekday");n.byweekday.push(se[_]),r.nextSymbol()}h(),m();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(n.freq=se.YEARLY,n.bymonth=[c()],!r.nextSymbol())return;for(;r.accept("comma");){if(r.isDone())throw new Error("Unexpected end");var x=c();if(!x)throw new Error("Unexpected symbol "+r.symbol+", expected month");n.bymonth.push(x),r.nextSymbol()}a(),m();break;default:throw new Error("Unknown symbol")}}function a(){var g=r.accept("on"),y=r.accept("the");if(!!(g||y))do{var _=d(),x=f(),k=c();if(_)x?(r.nextSymbol(),n.byweekday||(n.byweekday=[]),n.byweekday.push(se[x].nth(_))):(n.bymonthday||(n.bymonthday=[]),n.bymonthday.push(_),r.accept("day(s)"));else if(x)r.nextSymbol(),n.byweekday||(n.byweekday=[]),n.byweekday.push(se[x]);else if(r.symbol==="weekday(s)")r.nextSymbol(),n.byweekday||(n.byweekday=[se.MO,se.TU,se.WE,se.TH,se.FR]);else if(r.symbol==="week(s)"){r.nextSymbol();var E=r.acceptNumber();if(!E)throw new Error("Unexpected symbol "+r.symbol+", expected week number");for(n.byweekno=[parseInt(E[0],10)];r.accept("comma");){if(E=r.acceptNumber(),!E)throw new Error("Unexpected symbol "+r.symbol+"; expected monthday");n.byweekno.push(parseInt(E[0],10))}}else if(k)r.nextSymbol(),n.bymonth||(n.bymonth=[]),n.bymonth.push(k);else return}while(r.accept("comma")||r.accept("the")||r.accept("on"))}function l(){var g=r.accept("at");if(!!g)do{var y=r.acceptNumber();if(!y)throw new Error("Unexpected symbol "+r.symbol+", expected hour");for(n.byhour=[parseInt(y[0],10)];r.accept("comma");){if(y=r.acceptNumber(),!y)throw new Error("Unexpected symbol "+r.symbol+"; expected hour");n.byhour.push(parseInt(y[0],10))}}while(r.accept("comma")||r.accept("at"))}function c(){switch(r.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function f(){switch(r.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return r.symbol.substr(0,2).toUpperCase();default:return!1}}function d(){switch(r.symbol){case"last":return r.nextSymbol(),-1;case"first":return r.nextSymbol(),1;case"second":return r.nextSymbol(),r.accept("last")?-2:2;case"third":return r.nextSymbol(),r.accept("last")?-3:3;case"nth":var g=parseInt(r.value[1],10);if(g<-366||g>366)throw new Error("Nth out of range: "+g);return r.nextSymbol(),r.accept("last")?-g:g;default:return!1}}function h(){r.accept("on"),r.accept("the");var g=d();if(!!g)for(n.bymonthday=[g],r.nextSymbol();r.accept("comma");){if(g=d(),!g)throw new Error("Unexpected symbol "+r.symbol+"; expected monthday");n.bymonthday.push(g),r.nextSymbol()}}function m(){if(r.symbol==="until"){var g=Date.parse(r.text);if(!g)throw new Error("Cannot parse until date:"+r.text);n.until=new Date(g)}else r.accept("for")&&(n.count=parseInt(r.value[0],10),r.expect("number"))}}var Oe;(function(t){t[t.YEARLY=0]="YEARLY",t[t.MONTHLY=1]="MONTHLY",t[t.WEEKLY=2]="WEEKLY",t[t.DAILY=3]="DAILY",t[t.HOURLY=4]="HOURLY",t[t.MINUTELY=5]="MINUTELY",t[t.SECONDLY=6]="SECONDLY"})(Oe||(Oe={}));function Rs(t){return t<Oe.HOURLY}var Jm=function(t,e){return e===void 0&&(e=Bi),new se(Is(t,e)||void 0)},Io=["count","until","interval","byweekday","bymonthday","bymonth"];sr.IMPLEMENTED=[];sr.IMPLEMENTED[Oe.HOURLY]=Io;sr.IMPLEMENTED[Oe.MINUTELY]=Io;sr.IMPLEMENTED[Oe.DAILY]=["byhour"].concat(Io);sr.IMPLEMENTED[Oe.WEEKLY]=Io;sr.IMPLEMENTED[Oe.MONTHLY]=Io;sr.IMPLEMENTED[Oe.YEARLY]=["byweekno","byyearday"].concat(Io);var $m=function(t,e,n,r){return new sr(t,e,n,r).toString()},eg=sr.isFullyConvertible;var Ro=function(){function t(e,n,r,o){this.hour=e,this.minute=n,this.second=r,this.millisecond=o||0}return t.prototype.getHours=function(){return this.hour},t.prototype.getMinutes=function(){return this.minute},t.prototype.getSeconds=function(){return this.second},t.prototype.getMilliseconds=function(){return this.millisecond},t.prototype.getTime=function(){return(this.hour*60*60+this.minute*60+this.second)*1e3+this.millisecond},t}();var tg=function(t){Po(e,t);function e(n,r,o,a,l,c,f){var d=t.call(this,a,l,c,f)||this;return d.year=n,d.month=r,d.day=o,d}return e.fromDate=function(n){return new this(n.getUTCFullYear(),n.getUTCMonth()+1,n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.valueOf()%1e3)},e.prototype.getWeekday=function(){return si.getWeekday(new Date(this.getTime()))},e.prototype.getTime=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond)).getTime()},e.prototype.getDay=function(){return this.day},e.prototype.getMonth=function(){return this.month},e.prototype.getYear=function(){return this.year},e.prototype.addYears=function(n){this.year+=n},e.prototype.addMonths=function(n){if(this.month+=n,this.month>12){var r=Math.floor(this.month/12),o=qt(this.month,12);this.month=o,this.year+=r,this.month===0&&(this.month=12,--this.year)}},e.prototype.addWeekly=function(n,r){r>this.getWeekday()?this.day+=-(this.getWeekday()+1+(6-r))+n*7:this.day+=-(this.getWeekday()-r)+n*7,this.fixDay()},e.prototype.addDaily=function(n){this.day+=n,this.fixDay()},e.prototype.addHours=function(n,r,o){for(r&&(this.hour+=Math.floor((23-this.hour)/n)*n);;){this.hour+=n;var a=dl(this.hour,24),l=a.div,c=a.mod;if(l&&(this.hour=c,this.addDaily(l)),xn(o)||Re(o,this.hour))break}},e.prototype.addMinutes=function(n,r,o,a){for(r&&(this.minute+=Math.floor((1439-(this.hour*60+this.minute))/n)*n);;){this.minute+=n;var l=dl(this.minute,60),c=l.div,f=l.mod;if(c&&(this.minute=f,this.addHours(c,!1,o)),(xn(o)||Re(o,this.hour))&&(xn(a)||Re(a,this.minute)))break}},e.prototype.addSeconds=function(n,r,o,a,l){for(r&&(this.second+=Math.floor((86399-(this.hour*3600+this.minute*60+this.second))/n)*n);;){this.second+=n;var c=dl(this.second,60),f=c.div,d=c.mod;if(f&&(this.second=d,this.addMinutes(f,!1,o,a)),(xn(o)||Re(o,this.hour))&&(xn(a)||Re(a,this.minute))&&(xn(l)||Re(l,this.second)))break}},e.prototype.fixDay=function(){if(!(this.day<=28)){var n=si.monthRange(this.year,this.month-1)[1];if(!(this.day<=n))for(;this.day>n;){if(this.day-=n,++this.month,this.month===13&&(this.month=1,++this.year,this.year>si.MAXYEAR))return;n=si.monthRange(this.year,this.month-1)[1]}}},e.prototype.add=function(n,r){var o=n.freq,a=n.interval,l=n.wkst,c=n.byhour,f=n.byminute,d=n.bysecond;switch(o){case Oe.YEARLY:return this.addYears(a);case Oe.MONTHLY:return this.addMonths(a);case Oe.WEEKLY:return this.addWeekly(a,l);case Oe.DAILY:return this.addDaily(a);case Oe.HOURLY:return this.addHours(a,r,c);case Oe.MINUTELY:return this.addMinutes(a,r,c,f);case Oe.SECONDLY:return this.addSeconds(a,r,c,f,d)}},e}(Ro);function qc(t){for(var e=[],n=Object.keys(t),r=0,o=n;r<o.length;r++){var a=o[r];Re(ig,a)||e.push(a),ge.isDate(t[a])&&!ge.isValidDate(t[a])&&e.push(a)}if(e.length)throw new Error("Invalid options: "+e.join(", "));return nn({},t)}function ng(t){var e=nn(nn({},Fs),qc(t));if(Je(e.byeaster)&&(e.freq=se.YEARLY),!(Je(e.freq)&&se.FREQUENCIES[e.freq]))throw new Error("Invalid frequency: "+e.freq+" "+t.freq);if(e.dtstart||(e.dtstart=new Date(new Date().setMilliseconds(0))),Je(e.wkst)?En(e.wkst)||(e.wkst=e.wkst.weekday):e.wkst=se.MO.weekday,Je(e.bysetpos)){En(e.bysetpos)&&(e.bysetpos=[e.bysetpos]);for(var n=0;n<e.bysetpos.length;n++){var r=e.bysetpos[n];if(r===0||!(r>=-366&&r<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(Boolean(e.byweekno)||mt(e.byweekno)||mt(e.byyearday)||Boolean(e.bymonthday)||mt(e.bymonthday)||Je(e.byweekday)||Je(e.byeaster)))switch(e.freq){case se.YEARLY:e.bymonth||(e.bymonth=e.dtstart.getUTCMonth()+1),e.bymonthday=e.dtstart.getUTCDate();break;case se.MONTHLY:e.bymonthday=e.dtstart.getUTCDate();break;case se.WEEKLY:e.byweekday=[ge.getWeekday(e.dtstart)];break}if(Je(e.bymonth)&&!Wt(e.bymonth)&&(e.bymonth=[e.bymonth]),Je(e.byyearday)&&!Wt(e.byyearday)&&En(e.byyearday)&&(e.byyearday=[e.byyearday]),!Je(e.bymonthday))e.bymonthday=[],e.bynmonthday=[];else if(Wt(e.bymonthday)){for(var o=[],a=[],n=0;n<e.bymonthday.length;n++){var r=e.bymonthday[n];r>0?o.push(r):r<0&&a.push(r)}e.bymonthday=o,e.bynmonthday=a}else e.bymonthday<0?(e.bynmonthday=[e.bymonthday],e.bymonthday=[]):(e.bynmonthday=[],e.bymonthday=[e.bymonthday]);if(Je(e.byweekno)&&!Wt(e.byweekno)&&(e.byweekno=[e.byweekno]),!Je(e.byweekday))e.bynweekday=null;else if(En(e.byweekday))e.byweekday=[e.byweekday],e.bynweekday=null;else if(jc(e.byweekday))e.byweekday=[yt.fromStr(e.byweekday).weekday],e.bynweekday=null;else if(e.byweekday instanceof yt)!e.byweekday.n||e.freq>se.MONTHLY?(e.byweekday=[e.byweekday.weekday],e.bynweekday=null):(e.bynweekday=[[e.byweekday.weekday,e.byweekday.n]],e.byweekday=null);else{for(var l=[],c=[],n=0;n<e.byweekday.length;n++){var f=e.byweekday[n];if(En(f)){l.push(f);continue}else if(jc(f)){l.push(yt.fromStr(f).weekday);continue}!f.n||e.freq>se.MONTHLY?l.push(f.weekday):c.push([f.weekday,f.n])}e.byweekday=mt(l)?l:null,e.bynweekday=mt(c)?c:null}return Je(e.byhour)?En(e.byhour)&&(e.byhour=[e.byhour]):e.byhour=e.freq<se.HOURLY?[e.dtstart.getUTCHours()]:null,Je(e.byminute)?En(e.byminute)&&(e.byminute=[e.byminute]):e.byminute=e.freq<se.MINUTELY?[e.dtstart.getUTCMinutes()]:null,Je(e.bysecond)?En(e.bysecond)&&(e.bysecond=[e.bysecond]):e.bysecond=e.freq<se.SECONDLY?[e.dtstart.getUTCSeconds()]:null,{parsedOptions:e}}function rg(t){var e=t.dtstart.getTime()%1e3;if(!Rs(t.freq))return[];var n=[];return t.byhour.forEach(function(r){t.byminute.forEach(function(o){t.bysecond.forEach(function(a){n.push(new Ro(r,o,a,e))})})}),n}function Ys(t){var e=t.split(`
`).map(uT).filter(function(n){return n!==null});return nn(nn({},e[0]),e[1])}function Gs(t){var e={},n=/DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\s]+)/i.exec(t);if(!n)return e;var r=n[0],o=n[1],a=n[2];return o&&(e.tzid=o),e.dtstart=ge.untilStringToDate(a),e}function uT(t){if(t=t.replace(/^\s+|\s+$/,""),!t.length)return null;var e=/^([A-Z]+?)[:;]/.exec(t.toUpperCase());if(!e)return og(t);var n=e[0],r=e[1];switch(r.toUpperCase()){case"RRULE":case"EXRULE":return og(t);case"DTSTART":return Gs(t);default:throw new Error("Unsupported RFC prop "+r+" in "+t)}}function og(t){var e=t.replace(/^RRULE:/i,""),n=Gs(e),r=t.replace(/^(?:RRULE|EXRULE):/i,"").split(";");return r.forEach(function(o){var a=o.split("="),l=a[0],c=a[1];switch(l.toUpperCase()){case"FREQ":n.freq=Oe[c.toUpperCase()];break;case"WKST":n.wkst=Gn[c.toUpperCase()];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":var f=cT(c),d=l.toLowerCase();n[d]=f;break;case"BYWEEKDAY":case"BYDAY":n.byweekday=fT(c);break;case"DTSTART":case"TZID":var h=Gs(t);n.tzid=h.tzid,n.dtstart=h.dtstart;break;case"UNTIL":n.until=ge.untilStringToDate(c);break;case"BYEASTER":n.byeaster=Number(c);break;default:throw new Error("Unknown RRULE property '"+l+"'")}}),n}function cT(t){if(t.indexOf(",")!==-1){var e=t.split(",");return e.map(sg)}return sg(t)}function sg(t){return/^[+-]?\d+$/.test(t)?Number(t):t}function fT(t){var e=t.split(",");return e.map(function(n){if(n.length===2)return Gn[n];var r=n.match(/^([+-]?\d{1,2})([A-Z]{2})$/),o=Number(r[1]),a=r[2],l=Gn[a].weekday;return new yt(l,o)})}var ji=function(){function t(e,n){this.date=e,this.tzid=n}return Object.defineProperty(t.prototype,"isUTC",{get:function(){return!this.tzid||this.tzid.toUpperCase()==="UTC"},enumerable:!0,configurable:!0}),t.prototype.toString=function(){var e=ge.timeToUntilString(this.date.getTime(),this.isUTC);return this.isUTC?":"+e:";TZID="+this.tzid+":"+e},t.prototype.getTime=function(){return this.date.getTime()},t.prototype.rezonedDate=function(){var e;if(this.isUTC)return this.date;var n=Intl.DateTimeFormat().resolvedOptions().timeZone,r=new Date(this.date.toLocaleString(void 0,{timeZone:n})),o=new Date(this.date.toLocaleString(void 0,{timeZone:(e=this.tzid,e!=null?e:"UTC")})),a=o.getTime()-r.getTime();return new Date(this.date.getTime()-a)},t}();function Ws(t){for(var e=[],n="",r=Object.keys(t),o=Object.keys(Fs),a=0;a<r.length;a++)if(r[a]!=="tzid"&&!!Re(o,r[a])){var l=r[a].toUpperCase(),c=t[r[a]],f="";if(!(!Je(c)||Wt(c)&&!c.length)){switch(l){case"FREQ":f=se.FREQUENCIES[t.freq];break;case"WKST":En(c)?f=new yt(c).toString():f=c.toString();break;case"BYWEEKDAY":l="BYDAY",f=Sm(c).map(function(y){return y instanceof yt?y:Wt(y)?new yt(y[0],y[1]):new yt(y)}).toString();break;case"DTSTART":n=dT(c,t.tzid);break;case"UNTIL":f=ge.timeToUntilString(c,!t.tzid);break;default:if(Wt(c)){for(var d=[],h=0;h<c.length;h++)d[h]=String(c[h]);f=d.toString()}else f=String(c)}f&&e.push([l,f])}}var m=e.map(function(y){var _=y[0],x=y[1];return _+"="+x.toString()}).join(";"),g="";return m!==""&&(g="RRULE:"+m),[n,g].filter(function(y){return!!y}).join(`
`)}function dT(t,e){return t?"DTSTART"+new ji(new Date(t),e).toString():""}function pT(t,e){return Array.isArray(t)?!Array.isArray(e)||t.length!==e.length?!1:t.every(function(n,r){return n.getTime()===e[r].getTime()}):t instanceof Date?e instanceof Date&&t.getTime()===e.getTime():t===e}var ag=function(){function t(){this.all=!1,this.before=[],this.after=[],this.between=[]}return t.prototype._cacheAdd=function(e,n,r){n&&(n=n instanceof Date?ge.clone(n):ge.cloneDates(n)),e==="all"?this.all=n:(r._value=n,this[e].push(r))},t.prototype._cacheGet=function(e,n){var r=!1,o=n?Object.keys(n):[],a=function(h){for(var m=0;m<o.length;m++){var g=o[m];if(!pT(n[g],h[g]))return!0}return!1},l=this[e];if(e==="all")r=this.all;else if(Wt(l))for(var c=0;c<l.length;c++){var f=l[c];if(!(o.length&&a(f))){r=f._value;break}}if(!r&&this.all){for(var d=new Pr(e,n),c=0;c<this.all.length&&d.accept(this.all[c]);c++);r=d.getValue(),this._cacheAdd(e,r,n)}return Wt(r)?ge.cloneDates(r):r instanceof Date?ge.clone(r):r},t}();var lg=Ui(Pe(1,31),Pe(2,28),Pe(3,31),Pe(4,30),Pe(5,31),Pe(6,30),Pe(7,31),Pe(8,31),Pe(9,30),Pe(10,31),Pe(11,30),Pe(12,31),Pe(1,7)),ug=Ui(Pe(1,31),Pe(2,29),Pe(3,31),Pe(4,30),Pe(5,31),Pe(6,30),Pe(7,31),Pe(8,31),Pe(9,30),Pe(10,31),Pe(11,30),Pe(12,31),Pe(1,7)),hT=Yn(1,29),mT=Yn(1,30),ai=Yn(1,31),Vt=Yn(1,32),cg=Ui(Vt,mT,Vt,ai,Vt,ai,Vt,Vt,ai,Vt,ai,Vt,Vt.slice(0,7)),fg=Ui(Vt,hT,Vt,ai,Vt,ai,Vt,Vt,ai,Vt,ai,Vt,Vt.slice(0,7)),gT=Yn(-28,0),vT=Yn(-29,0),li=Yn(-30,0),Kt=Yn(-31,0),dg=Ui(Kt,vT,Kt,li,Kt,li,Kt,Kt,li,Kt,li,Kt,Kt.slice(0,7)),pg=Ui(Kt,gT,Kt,li,Kt,li,Kt,Kt,li,Kt,li,Kt,Kt.slice(0,7)),hg=[0,31,60,91,121,152,182,213,244,274,305,335,366],mg=[0,31,59,90,120,151,181,212,243,273,304,334,365],Vc=function(){for(var t=[],e=0;e<55;e++)t=t.concat(Yn(7));return t}();function gg(t,e){var n=new Date(Date.UTC(t,0,1)),r=ge.isLeapYear(t)?366:365,o=ge.isLeapYear(t+1)?366:365,a=ge.toOrdinal(n),l=ge.getWeekday(n),c=nn(nn({yearlen:r,nextyearlen:o,yearordinal:a,yearweekday:l},yT(t)),{wnomask:null});if(xn(e.byweekno))return c;c.wnomask=Pe(0,r+7);var f,d,h=f=qt(7-l+e.wkst,7);h>=4?(h=0,d=c.yearlen+qt(l-e.wkst,7)):d=r-h;for(var m=Math.floor(d/7),g=qt(d,7),y=Math.floor(m+g/4),_=0;_<e.byweekno.length;_++){var x=e.byweekno[_];if(x<0&&(x+=y+1),x>0&&x<=y){var k=void 0;x>1?(k=h+(x-1)*7,h!==f&&(k-=7-f)):k=h;for(var E=0;E<7&&(c.wnomask[k]=1,k++,c.wdaymask[k]!==e.wkst);E++);}}if(Re(e.byweekno,1)){var k=h+y*7;if(h!==f&&(k-=7-f),k<r)for(var _=0;_<7&&(c.wnomask[k]=1,k+=1,c.wdaymask[k]!==e.wkst);_++);}if(h){var T=void 0;if(Re(e.byweekno,-1))T=-1;else{var D=ge.getWeekday(new Date(Date.UTC(t-1,0,1))),P=qt(7-D.valueOf()+e.wkst,7),M=ge.isLeapYear(t-1)?366:365,R=void 0;P>=4?(P=0,R=M+qt(D-e.wkst,7)):R=r-h,T=Math.floor(52+qt(R,7)/4)}if(Re(e.byweekno,T))for(var k=0;k<h;k++)c.wnomask[k]=1}return c}function yT(t){var e=ge.isLeapYear(t)?366:365,n=new Date(Date.UTC(t,0,1)),r=ge.getWeekday(n);return e===365?{mmask:lg,mdaymask:fg,nmdaymask:pg,wdaymask:Vc.slice(r),mrange:mg}:{mmask:ug,mdaymask:cg,nmdaymask:dg,wdaymask:Vc.slice(r),mrange:hg}}function vg(t,e,n,r,o,a){var l={lastyear:t,lastmonth:e,nwdaymask:[]},c=[];if(a.freq===se.YEARLY)if(xn(a.bymonth))c=[[0,n]];else for(var f=0;f<a.bymonth.length;f++)e=a.bymonth[f],c.push(r.slice(e-1,e+1));else a.freq===se.MONTHLY&&(c=[r.slice(e-1,e+1)]);if(xn(c))return l;l.nwdaymask=Pe(0,n);for(var f=0;f<c.length;f++)for(var d=c[f],h=d[0],m=d[1]-1,g=0;g<a.bynweekday.length;g++){var y=void 0,_=a.bynweekday[g],x=_[0],k=_[1];k<0?(y=m+(k+1)*7,y-=qt(o[y]-x,7)):(y=h+(k-1)*7,y+=qt(7-o[y]+x,7)),h<=y&&y<=m&&(l.nwdaymask[y]=1)}return l}function yg(t,e){e===void 0&&(e=0);var n=t%19,r=Math.floor(t/100),o=t%100,a=Math.floor(r/4),l=r%4,c=Math.floor((r+8)/25),f=Math.floor((r-c+1)/3),d=Math.floor(19*n+r-a-f+15)%30,h=Math.floor(o/4),m=o%4,g=Math.floor(32+2*l+2*h-d-m)%7,y=Math.floor((n+11*d+22*g)/451),_=Math.floor((d+g-7*y+114)/31),x=(d+g-7*y+114)%31+1,k=Date.UTC(t,_-1,x+e),E=Date.UTC(t,0,1);return[Math.ceil((k-E)/(1e3*60*60*24))]}var _T=function(){function t(e){this.options=e}return t.prototype.rebuild=function(e,n){var r=this.options;if(e!==this.lastyear&&(this.yearinfo=gg(e,r)),mt(r.bynweekday)&&(n!==this.lastmonth||e!==this.lastyear)){var o=this.yearinfo,a=o.yearlen,l=o.mrange,c=o.wdaymask;this.monthinfo=vg(e,n,a,l,c,r)}Je(r.byeaster)&&(this.eastermask=yg(e,r.byeaster))},Object.defineProperty(t.prototype,"lastyear",{get:function(){return this.monthinfo?this.monthinfo.lastyear:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastmonth",{get:function(){return this.monthinfo?this.monthinfo.lastmonth:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"yearlen",{get:function(){return this.yearinfo.yearlen},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"yearordinal",{get:function(){return this.yearinfo.yearordinal},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mrange",{get:function(){return this.yearinfo.mrange},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wdaymask",{get:function(){return this.yearinfo.wdaymask},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mmask",{get:function(){return this.yearinfo.mmask},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wnomask",{get:function(){return this.yearinfo.wnomask},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nwdaymask",{get:function(){return this.monthinfo?this.monthinfo.nwdaymask:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nextyearlen",{get:function(){return this.yearinfo.nextyearlen},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mdaymask",{get:function(){return this.yearinfo.mdaymask},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nmdaymask",{get:function(){return this.yearinfo.nmdaymask},enumerable:!0,configurable:!0}),t.prototype.ydayset=function(){return[Yn(this.yearlen),0,this.yearlen]},t.prototype.mdayset=function(e,n,r){for(var o=this.mrange[n-1],a=this.mrange[n],l=Pe(null,this.yearlen),c=o;c<a;c++)l[c]=c;return[l,o,a]},t.prototype.wdayset=function(e,n,r){for(var o=Pe(null,this.yearlen+7),a=ge.toOrdinal(new Date(Date.UTC(e,n-1,r)))-this.yearordinal,l=a,c=0;c<7&&(o[a]=a,++a,this.wdaymask[a]!==this.options.wkst);c++);return[o,l,a]},t.prototype.ddayset=function(e,n,r){var o=Pe(null,this.yearlen),a=ge.toOrdinal(new Date(Date.UTC(e,n-1,r)))-this.yearordinal;return o[a]=a,[o,a,a+1]},t.prototype.htimeset=function(e,n,r,o){var a=this,l=[];return this.options.byminute.forEach(function(c){l=l.concat(a.mtimeset(e,c,r,o))}),ge.sort(l),l},t.prototype.mtimeset=function(e,n,r,o){var a=this.options.bysecond.map(function(l){return new Ro(e,n,l,o)});return ge.sort(a),a},t.prototype.stimeset=function(e,n,r,o){return[new Ro(e,n,r,o)]},t.prototype.getdayset=function(e){switch(e){case Oe.YEARLY:return this.ydayset.bind(this);case Oe.MONTHLY:return this.mdayset.bind(this);case Oe.WEEKLY:return this.wdayset.bind(this);case Oe.DAILY:return this.ddayset.bind(this);default:return this.ddayset.bind(this)}},t.prototype.gettimeset=function(e){switch(e){case Oe.HOURLY:return this.htimeset.bind(this);case Oe.MINUTELY:return this.mtimeset.bind(this);case Oe.SECONDLY:return this.stimeset.bind(this)}},t}(),_g=_T;function wg(t,e,n,r,o,a){for(var l=[],c=0;c<t.length;c++){var f=void 0,d=void 0,h=t[c];h<0?(f=Math.floor(h/e.length),d=qt(h,e.length)):(f=Math.floor((h-1)/e.length),d=qt(h-1,e.length));for(var m=[],g=n;g<r;g++){var y=a[g];!Je(y)||m.push(y)}var _=void 0;f<0?_=m.slice(f)[0]:_=m[f];var x=e[d],k=ge.fromOrdinal(o.yearordinal+_),E=ge.combine(k,x);Re(l,E)||l.push(E)}return ge.sort(l),l}function ml(t,e){var n=e.dtstart,r=e.freq,o=e.interval,a=e.until,l=e.bysetpos,c=e.count;if(c===0||o===0)return Ir(t);var f=tg.fromDate(n),d=new _g(e);d.rebuild(f.year,f.month);for(var h=kT(d,f,e);;){var m=d.getdayset(r)(f.year,f.month,f.day),g=m[0],y=m[1],_=m[2],x=bT(g,y,_,d,e);if(mt(l))for(var k=wg(l,h,y,_,d,g),E=0;E<k.length;E++){var T=k[E];if(a&&T>a)return Ir(t);if(T>=n){var D=bg(T,e);if(!t.accept(D)||c&&(--c,!c))return Ir(t)}}else for(var E=y;E<_;E++){var P=g[E];if(!!Je(P))for(var M=ge.fromOrdinal(d.yearordinal+P),R=0;R<h.length;R++){var Q=h[R],T=ge.combine(M,Q);if(a&&T>a)return Ir(t);if(T>=n){var D=bg(T,e);if(!t.accept(D)||c&&(--c,!c))return Ir(t)}}}if(e.interval===0||(f.add(e,x),f.year>ge.MAXYEAR))return Ir(t);Rs(r)||(h=d.gettimeset(r)(f.hour,f.minute,f.second,0)),d.rebuild(f.year,f.month)}}function wT(t,e,n){var r=n.bymonth,o=n.byweekno,a=n.byweekday,l=n.byeaster,c=n.bymonthday,f=n.bynmonthday,d=n.byyearday;return mt(r)&&!Re(r,t.mmask[e])||mt(o)&&!t.wnomask[e]||mt(a)&&!Re(a,t.wdaymask[e])||mt(t.nwdaymask)&&!t.nwdaymask[e]||l!==null&&!Re(t.eastermask,e)||(mt(c)||mt(f))&&!Re(c,t.mdaymask[e])&&!Re(f,t.nmdaymask[e])||mt(d)&&(e<t.yearlen&&!Re(d,e+1)&&!Re(d,-t.yearlen+e)||e>=t.yearlen&&!Re(d,e+1-t.yearlen)&&!Re(d,-t.nextyearlen+e-t.yearlen))}function bg(t,e){return new ji(t,e.tzid).rezonedDate()}function Ir(t){return t.getValue()}function bT(t,e,n,r,o){for(var a=!1,l=e;l<n;l++){var c=t[l];a=wT(r,c,o),a&&(t[c]=null)}return a}function kT(t,e,n){var r=n.freq,o=n.byhour,a=n.byminute,l=n.bysecond;return Rs(r)?rg(n):r>=se.HOURLY&&mt(o)&&!Re(o,e.hour)||r>=se.MINUTELY&&mt(a)&&!Re(a,e.minute)||r>=se.SECONDLY&&mt(l)&&!Re(l,e.second)?[]:t.gettimeset(r)(e.hour,e.minute,e.second,e.millisecond)}var Gn={MO:new yt(0),TU:new yt(1),WE:new yt(2),TH:new yt(3),FR:new yt(4),SA:new yt(5),SU:new yt(6)},Fs={freq:Oe.YEARLY,dtstart:null,interval:1,wkst:Gn.MO,count:null,until:null,tzid:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},ig=Object.keys(Fs),se=function(){function t(e,n){e===void 0&&(e={}),n===void 0&&(n=!1),this._cache=n?null:new ag,this.origOptions=qc(e);var r=ng(e).parsedOptions;this.options=r}return t.parseText=function(e,n){return Is(e,n)},t.fromText=function(e,n){return Jm(e,n)},t.fromString=function(e){return new t(t.parseString(e)||void 0)},t.prototype._iter=function(e){return ml(e,this.options)},t.prototype._cacheGet=function(e,n){return this._cache?this._cache._cacheGet(e,n):!1},t.prototype._cacheAdd=function(e,n,r){if(!!this._cache)return this._cache._cacheAdd(e,n,r)},t.prototype.all=function(e){if(e)return this._iter(new zc("all",{},e));var n=this._cacheGet("all");return n===!1&&(n=this._iter(new Pr("all",{})),this._cacheAdd("all",n)),n},t.prototype.between=function(e,n,r,o){if(r===void 0&&(r=!1),!ge.isValidDate(e)||!ge.isValidDate(n))throw new Error("Invalid date passed in to RRule.between");var a={before:n,after:e,inc:r};if(o)return this._iter(new zc("between",a,o));var l=this._cacheGet("between",a);return l===!1&&(l=this._iter(new Pr("between",a)),this._cacheAdd("between",l,a)),l},t.prototype.before=function(e,n){if(n===void 0&&(n=!1),!ge.isValidDate(e))throw new Error("Invalid date passed in to RRule.before");var r={dt:e,inc:n},o=this._cacheGet("before",r);return o===!1&&(o=this._iter(new Pr("before",r)),this._cacheAdd("before",o,r)),o},t.prototype.after=function(e,n){if(n===void 0&&(n=!1),!ge.isValidDate(e))throw new Error("Invalid date passed in to RRule.after");var r={dt:e,inc:n},o=this._cacheGet("after",r);return o===!1&&(o=this._iter(new Pr("after",r)),this._cacheAdd("after",o,r)),o},t.prototype.count=function(){return this.all().length},t.prototype.toString=function(){return Ws(this.origOptions)},t.prototype.toText=function(e,n,r){return $m(this,e,n,r)},t.prototype.isFullyConvertibleToText=function(){return eg(this)},t.prototype.clone=function(){return new t(this.origOptions)},t.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],t.YEARLY=Oe.YEARLY,t.MONTHLY=Oe.MONTHLY,t.WEEKLY=Oe.WEEKLY,t.DAILY=Oe.DAILY,t.HOURLY=Oe.HOURLY,t.MINUTELY=Oe.MINUTELY,t.SECONDLY=Oe.SECONDLY,t.MO=Gn.MO,t.TU=Gn.TU,t.WE=Gn.WE,t.TH=Gn.TH,t.FR=Gn.FR,t.SA=Gn.SA,t.SU=Gn.SU,t.parseString=Ys,t.optionsToString=Ws,t}();function kg(t,e,n,r,o,a){var l={},c=t.accept;function f(g,y){n.forEach(function(_){_.between(g,y,!0).forEach(function(x){l[Number(x)]=!0})})}o.forEach(function(g){var y=new ji(g,a).rezonedDate();l[Number(y)]=!0}),t.accept=function(g){var y=Number(g);return isNaN(y)?c.call(this,g):!l[y]&&(f(new Date(y-1),new Date(y+1)),!l[y])?(l[y]=!0,c.call(this,g)):!0},t.method==="between"&&(f(t.args.after,t.args.before),t.accept=function(g){var y=Number(g);return l[y]?!0:(l[y]=!0,c.call(this,g))});for(var d=0;d<r.length;d++){var h=new ji(r[d],a).rezonedDate();if(!t.accept(new Date(h.getTime())))break}e.forEach(function(g){ml(t,g.options)});var m=t._result;switch(ge.sort(m),t.method){case"all":case"between":return m;case"before":return m.length&&m[m.length-1]||null;case"after":default:return m.length&&m[0]||null}}var Eg={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function ET(t,e){var n=[],r=[],o=[],a=[],l=Gs(t),c=l.dtstart,f=l.tzid,d=DT(t,e.unfold);return d.forEach(function(h){if(!!h){var m=ST(h),g=m.name,y=m.parms,_=m.value;switch(g.toUpperCase()){case"RRULE":if(y.length)throw new Error("unsupported RRULE parm: "+y.join(","));n.push(Ys(h));break;case"RDATE":var x=/RDATE(?:;TZID=([^:=]+))?/i.exec(h),k=x[0],E=x[1];E&&!f&&(f=E),r=r.concat(xg(_,y));break;case"EXRULE":if(y.length)throw new Error("unsupported EXRULE parm: "+y.join(","));o.push(Ys(_));break;case"EXDATE":a=a.concat(xg(_,y));break;case"DTSTART":break;default:throw new Error("unsupported property: "+g)}}}),{dtstart:c,tzid:f,rrulevals:n,rdatevals:r,exrulevals:o,exdatevals:a}}function xT(t,e){var n=ET(t,e),r=n.rrulevals,o=n.rdatevals,a=n.exrulevals,l=n.exdatevals,c=n.dtstart,f=n.tzid,d=e.cache===!1;if(e.compatible&&(e.forceset=!0,e.unfold=!0),e.forceset||r.length>1||o.length||a.length||l.length){var h=new Hi(d);return h.dtstart(c),h.tzid(f||void 0),r.forEach(function(g){h.rrule(new se(Kc(g,c,f),d))}),o.forEach(function(g){h.rdate(g)}),a.forEach(function(g){h.exrule(new se(Kc(g,c,f),d))}),l.forEach(function(g){h.exdate(g)}),e.compatible&&e.dtstart&&h.rdate(c),h}var m=r[0]||{};return new se(Kc(m,m.dtstart||e.dtstart||c,m.tzid||e.tzid||f),d)}function Fo(t,e){return e===void 0&&(e={}),xT(t,CT(e))}function Kc(t,e,n){return nn(nn({},t),{dtstart:e,tzid:n})}function CT(t){var e=[],n=Object.keys(t),r=Object.keys(Eg);if(n.forEach(function(o){Re(r,o)||e.push(o)}),e.length)throw new Error("Invalid options: "+e.join(", "));return nn(nn({},Eg),t)}function TT(t){if(t.indexOf(":")===-1)return{name:"RRULE",value:t};var e=Dm(t,":",1),n=e[0],r=e[1];return{name:n,value:r}}function ST(t){var e=TT(t),n=e.name,r=e.value,o=n.split(";");if(!o)throw new Error("empty property name");return{name:o[0].toUpperCase(),parms:o.slice(1),value:r}}function DT(t,e){if(e===void 0&&(e=!1),t=t&&t.trim(),!t)throw new Error("Invalid empty string");if(!e)return t.split(/\s/);for(var n=t.split(`
`),r=0;r<n.length;){var o=n[r]=n[r].replace(/\s+$/g,"");o?r>0&&o[0]===" "?(n[r-1]+=o.slice(1),n.splice(r,1)):r+=1:n.splice(r,1)}return n}function MT(t){t.forEach(function(e){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(e))throw new Error("unsupported RDATE/EXDATE parm: "+e)})}function xg(t,e){return MT(e),t.split(",").map(function(n){return ge.untilStringToDate(n)})}function Cg(t){var e=this;return function(n){if(n!==void 0&&(e["_"+t]=n),e["_"+t]!==void 0)return e["_"+t];for(var r=0;r<e._rrule.length;r++){var o=e._rrule[r].origOptions[t];if(o)return o}}}var Hi=function(t){Po(e,t);function e(n){n===void 0&&(n=!1);var r=t.call(this,{},n)||this;return r.dtstart=Cg.apply(r,["dtstart"]),r.tzid=Cg.apply(r,["tzid"]),r._rrule=[],r._rdate=[],r._exrule=[],r._exdate=[],r}return e.prototype._iter=function(n){return kg(n,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},e.prototype.rrule=function(n){Tg(n,this._rrule)},e.prototype.exrule=function(n){Tg(n,this._exrule)},e.prototype.rdate=function(n){Sg(n,this._rdate)},e.prototype.exdate=function(n){Sg(n,this._exdate)},e.prototype.rrules=function(){return this._rrule.map(function(n){return Fo(n.toString())})},e.prototype.exrules=function(){return this._exrule.map(function(n){return Fo(n.toString())})},e.prototype.rdates=function(){return this._rdate.map(function(n){return new Date(n.getTime())})},e.prototype.exdates=function(){return this._exdate.map(function(n){return new Date(n.getTime())})},e.prototype.valueOf=function(){var n=[];return!this._rrule.length&&this._dtstart&&(n=n.concat(Ws({dtstart:this._dtstart}))),this._rrule.forEach(function(r){n=n.concat(r.toString().split(`
`))}),this._exrule.forEach(function(r){n=n.concat(r.toString().split(`
`).map(function(o){return o.replace(/^RRULE:/,"EXRULE:")}).filter(function(o){return!/^DTSTART/.test(o)}))}),this._rdate.length&&n.push(Dg("RDATE",this._rdate,this.tzid())),this._exdate.length&&n.push(Dg("EXDATE",this._exdate,this.tzid())),n},e.prototype.toString=function(){return this.valueOf().join(`
`)},e.prototype.clone=function(){var n=new e(!!this._cache);return this._rrule.forEach(function(r){return n.rrule(r.clone())}),this._exrule.forEach(function(r){return n.exrule(r.clone())}),this._rdate.forEach(function(r){return n.rdate(new Date(r.getTime()))}),this._exdate.forEach(function(r){return n.exdate(new Date(r.getTime()))}),n},e}(se);function Tg(t,e){if(!(t instanceof se))throw new TypeError(String(t)+" is not RRule instance");Re(e.map(String),String(t))||e.push(t)}function Sg(t,e){if(!(t instanceof Date))throw new TypeError(String(t)+" is not Date instance");Re(e.map(Number),Number(t))||(e.push(t),ge.sort(e))}function Dg(t,e,n){var r=!n||n.toUpperCase()==="UTC",o=r?t+":":t+";TZID="+n+":",a=e.map(function(l){return ge.timeToUntilString(l.valueOf(),r)}).join(",");return""+o+a}var Mg=se;var Ig=ye(Mr());var Go=ye(require("obsidian"));var zi=ye(require("obsidian"));var vl=ye(Mr());function Us(t){return t.getHours()/24+t.getMinutes()/(60*24)}function Og(t,e){if(t.start.date||(t==null?void 0:t.eventType)=="multiDay")return 0;let n=Us(new Date(t.start.dateTime));return e*n}function Ag(t,e){if(t.start.date||(t==null?void 0:t.eventType)=="multiDay")return 25;let n=Us(new Date(t.start.dateTime)),r=Us(new Date(t.end.dateTime));return e*(r-n)}function Zc(t,e){return t/24*e-10}function Xc(t,e){return t-t/24*e-10}var gl=()=>app.vault.config.theme?app.vault.config.theme=="obsidian"?"dark":"light":"dark",Qc=t=>t?t.trim().replace("<","lt").replace(">","gt").replace('"',"''").replace("\\","-").replace("/","-").replace(":","-").replace("|","-").replace("*","").replace("?",""):"",Lg=(t,e)=>t.reduce(([n,r,o],a)=>{let l=app.metadataCache.getFileCache(a).frontmatter;return(l==null?void 0:l["event-id"])===e?[[...n,a],r,o]:(l==null?void 0:l["event-id"])?[n,r,[...o,a]]:[n,[...r,a],o]},[[],[],[]]),OT=t=>{let e=app.vault.getFiles().filter(o=>o.basename==Qc(t.summary)),[n,r]=Lg(e,t.id);return{event:t,file:n[0]||r[0]||null,match:n.length>0?"id":"title"}};var AT=(t,e)=>{let n=app.vault.getFiles().filter(a=>a.basename.startsWith(e.settings.optionalNotePrefix)),[r,o]=Lg(n,t.id);return{event:t,file:r[0]||o[0]||null,match:r.length>0?"id":"title"}},Yo=(t,e)=>{let n=OT(t);return n.match=="id"&&n.file?n:AT(t,e)};var Jc=t=>G(void 0,null,function*(){var l,c;if(!t.settings.autoCreateEventNotes||!We())return;let e=Math.abs(t.settings.importStartOffset),n=Math.abs(t.settings.importEndOffset),r=window.moment().local().subtract(e,"day"),o=window.moment().local().add(n,"day"),a=yield Ve({startDate:r,endDate:o});for(let f=0;f<a.length;f++){let d=(c=(l=a[f].description)==null?void 0:l.match(/:(.*-)?obsidian-?(.*)?:/))!=null?c:[];d.length==3&&(yield ar(a[f],d[1],d[2],!0))}}),Ng=(t,e,n)=>{var l,c,f,d;let r=(c=(l=n==null?void 0:n.start)==null?void 0:l.offset)!=null?c:0,o=(d=(f=n==null?void 0:n.end)==null?void 0:f.offset)!=null?d:0,a=e.substring(r,o);return a.contains("event-id:")||(a.contains("---")?a=a.replace("---",`---
event-id: ${t.id}`):a=`---
event-id: ${t.id}
---
`,e=e.substring(0,r)+a+e.substring(o)),e},LT=(t,e)=>{let n=/{{gEvent\.([^}>]*)}}/gm,r,o=[];do r=n.exec(e),o.push(r);while(r);return o.forEach(a=>{if(a){let l="";if(a[1]=="attendees"){let c=vl.default.get(t,a[1],"");for(let f=0;f<c.length;f++)c[f].displayName?l+=`- [[@${c[f].displayName}]]
`:l+=`- [[@${c[f].email}]]
`}else if(a[1]=="attachments"){let c=vl.default.get(t,a[1],"");for(let f=0;f<c.length;f++)c[f].title?l+=`- [${c[f].title}](${c[f].fileUrl})
`:l+=`- [${c[f].fileUrl}](${c[f].fileUrl})
`}else l=vl.default.get(t,a[1],"");l===Object(l)&&(l=JSON.stringify(l)),e=e.replace(a[0],l!=null?l:"")}}),e};function Pg(t,e,n){var r,o,a,l,c;return n=n.replace("{{prefix}}",t.settings.optionalNotePrefix),n=n.replace("{{date}}",window.moment().format("YYYY-MM-DD")),n=n.replace("{{date-year}}",window.moment().format("YYYY")),n=n.replace("{{date-month}}",window.moment().format("MM")),n=n.replace("{{date-day}}",window.moment().format("DD")),n=n.replace("{{event-date}}",window.moment((r=e.start.date)!=null?r:e.start.dateTime).format("YYYY-MM-DD")),n=n.replace("{{event-year}}",window.moment((o=e.start.date)!=null?o:e.start.dateTime).format("YYYY")),n=n.replace("{{event-month}}",window.moment((a=e.start.date)!=null?a:e.start.dateTime).format("MM")),n=n.replace("{{event-day}}",window.moment((l=e.start.date)!=null?l:e.start.dateTime).format("DD")),n=n.replace("{{event-title}}",(c=e.summary)!=null?c:"event-title"),n}function NT(t,e,n){return G(this,null,function*(){let{adapter:r}=app.vault;n?(n.endsWith("-")&&(n=n.slice(0,-1)),n="/"+n.split(/[/\\]/).join("/"),(yield r.exists(n))||(yield r.mkdir(n))):n=app.fileManager.getNewFileParent("").path;let o=Pg(t,e,Qc(t.settings.eventNoteNameFormat));return(0,zi.normalizePath)(`${n}/${o}.md`)})}function PT(t,e){return G(this,null,function*(){let{vault:n}=app,{adapter:r}=n;if(yield r.exists(e)){let o=n.getAbstractFileByPath(e);return Ee(`EventNote ${t.summary} already exists.`),new lr(t,a=>o=a).open(),o}})}var ar=(t,e,n,r=!1)=>G(void 0,null,function*(){let o=ce.getInstance(),{vault:a}=app,{adapter:l}=a;e&&(e=Pg(o,t,e));let c=yield NT(o,t,e);if(!r){let m=yield PT(t,c);if(m)return m}let f=yield a.create(c,"");if(Ee(`EventNote ${t.summary} created.`),!o.coreTemplatePlugin&&!o.templaterPlugin||!n){let m=Ng(t,"",null);yield l.write(c,m);let g=a.getAbstractFileByPath(c);return o.settings.autoCreateEventKeepOpen&&(yield app.workspace.getLeaf(!0).openFile(g)),g}n.match(/.*\.md/)||(n=n+".md");let d=yield app.workspace.getLeaf(!0);return yield d.setViewState({type:"MarkdownView"}),yield app.workspace.setActiveLeaf(d,!1,!0),yield d.openFile(f,{state:{mode:"source"},active:!0}),o.templaterPlugin&&o.coreTemplatePlugin?(yield h(!0))||(yield h(!1))||Ee("Template not compatible"):o.templaterPlugin?(yield h(!0))||Ee("Template not compatible"):o.coreTemplatePlugin&&((yield h(!1))||Ee("Template not compatible")),o.settings.autoCreateEventKeepOpen||d.detach(),a.getAbstractFileByPath(c);function h(m){return G(this,null,function*(){var D,P,M,R,Q,L;let g;m?g=(0,zi.normalizePath)((P=(D=o==null?void 0:o.templaterPlugin)==null?void 0:D.settings)==null?void 0:P.templates_folder):g=(0,zi.normalizePath)((Q=(R=(M=o==null?void 0:o.coreTemplatePlugin)==null?void 0:M.instance)==null?void 0:R.options)==null?void 0:Q.folder);let y;if((yield l.exists(n))?y=n:(y=`${g}/${n}`,g==="/"&&(y=n)),!(yield l.exists(y)))return Ee(`Template: ${n} doesn't exit.`),!1;let _=a.getAbstractFileByPath(y);if(!(_ instanceof zi.TFile))return!1;let x=yield a.cachedRead(_),k=Ng(t,x,(L=app.metadataCache.getFileCache(_).frontmatter)==null?void 0:L.position);if(k=LT(t,k),m&&k.contains("{{")&&k.contains("}}"))return!1;if(!m&&k.contains("<%")&&k.contains("%>"))return!1;let E=_.path+".tmp";yield l.write(E,k);let T=app.vault.getAbstractFileByPath(E);if(!(T instanceof zi.TFile))return!1;try{return m?yield o.templaterPlugin.templater.append_template_to_active_file(T):yield o.coreTemplatePlugin.instance.insertTemplate(T),l.remove(E),!0}catch(j){return l.remove(E),!1}})}});var lr=class extends Go.Modal{constructor(e,n){super(window.app);this.template=null;this.folder=null;this.plugin=ce.getInstance();this.event=e,this.onSubmit=n}onOpen(){let{contentEl:e}=this;e.createEl("h1",{text:"You can now select a template to use"}),new Go.Setting(e).setName("Template").addSearch(n=>{new ws(n.inputEl,this.plugin),n.setPlaceholder("Template").setValue("").onChange(r=>this.template=r),n.containerEl.addClass("templater_search")}),new Go.Setting(e).setName("Folder").addSearch(n=>{new bs(n.inputEl),n.setPlaceholder("Example: folder1/folder2").setValue(app.vault.config.newFileFolderPath).onChange(r=>this.folder=r),n.containerEl.addClass("templater_search")}),new Go.Setting(e).setName("").addButton(n=>{n.setButtonText("Create Note"),n.onClick(()=>G(this,null,function*(){let r=yield ar(this.event,this.folder,this.template);this.onSubmit(r),this.close()}))})}onClose(){let{contentEl:e}=this;e.empty()}};function IT(t){fn(t,"svelte-47446l",".buttonRow.svelte-47446l.svelte-47446l{display:flex;flex-direction:row;align-items:center;justify-content:space-around;padding:5px}.summaryInput.svelte-47446l.svelte-47446l{border:none;border-bottom:2px solid;border-radius:0px;height:40px;font-size:35px;text-align:center}label.svelte-47446l.svelte-47446l{margin-top:5px}.googleFullDayContainer.svelte-47446l.svelte-47446l{margin-top:10px;display:flex;flex-direction:row;justify-content:space-between;align-items:center}.googleEventButtonContainer.svelte-47446l.svelte-47446l{margin-top:10px;display:flex;flex-direction:column;justify-content:space-around}.googleEventButtonContainer.svelte-47446l button.svelte-47446l{width:40%}")}function Rg(t,e,n){let r=t.slice();return r[29]=e[n],r}function RT(t){let e,n,r,o,a,l,c=t[3],f=[];for(let d=0;d<c.length;d+=1)f[d]=Fg(Rg(t,c,d));return{c(){var d;e=Y("label"),e.textContent="Calendar",n=te(),r=Y("select");for(let h=0;h<f.length;h+=1)f[h].c();N(e,"for","calendar"),N(e,"class","svelte-47446l"),N(r,"name","calendar"),N(r,"class","dropdown"),r.disabled=o=((d=t[0])==null?void 0:d.id)!==void 0},m(d,h){V(d,e,h),V(d,n,h),V(d,r,h);for(let m=0;m<f.length;m+=1)f[m].m(r,null);a||(l=fe(r,"change",t[11]),a=!0)},p(d,h){var m;if(h[0]&9){c=d[3];let g;for(g=0;g<c.length;g+=1){let y=Rg(d,c,g);f[g]?f[g].p(y,h):(f[g]=Fg(y),f[g].c(),f[g].m(r,null))}for(;g<f.length;g+=1)f[g].d(1);f.length=c.length}h[0]&1&&o!==(o=((m=d[0])==null?void 0:m.id)!==void 0)&&(r.disabled=o)},d(d){d&&q(e),d&&q(n),d&&q(r),Ft(f,d),a=!1,l()}}}function FT(t){let e;return{c(){e=Y("span"),e.textContent="Loading"},m(n,r){V(n,e,r)},p:Le,d(n){n&&q(e)}}}function Fg(t){let e,n=t[29].summary+"",r,o,a,l;return{c(){var c,f;e=Y("option"),r=et(n),N(e,"id",o=t[29].id),e.__value=a=t[29].id,e.value=e.__value,e.selected=l=t[29].id==((f=(c=t[0])==null?void 0:c.parent)==null?void 0:f.id)},m(c,f){V(c,e,f),I(e,r)},p(c,f){var d,h;f[0]&8&&n!==(n=c[29].summary+"")&&en(r,n),f[0]&8&&o!==(o=c[29].id)&&N(e,"id",o),f[0]&8&&a!==(a=c[29].id)&&(e.__value=a,e.value=e.__value),f[0]&9&&l!==(l=c[29].id==((h=(d=c[0])==null?void 0:d.parent)==null?void 0:h.id))&&(e.selected=l)},d(c){c&&q(e)}}}function YT(t){let e,n,r,o,a,l,c,f,d,h;return{c(){e=Y("label"),e.textContent="Start Date",n=te(),r=Y("input"),o=te(),a=Y("label"),a.textContent="End Date",l=te(),c=Y("input"),N(e,"for","eventStartDate"),N(e,"class","svelte-47446l"),N(r,"type","datetime-local"),N(r,"name","eventStartDate"),N(a,"for","eventEndDate"),N(a,"class","svelte-47446l"),N(c,"type","datetime-local"),N(c,"name","eventEndDate"),N(c,"min",f=window.moment(t[1]).format("YYYY-MM-DDThh:mm"))},m(m,g){V(m,e,g),V(m,n,g),V(m,r,g),Xn(r,t[1]),V(m,o,g),V(m,a,g),V(m,l,g),V(m,c,g),Xn(c,t[2]),d||(h=[fe(r,"input",t[24]),fe(c,"input",t[25])],d=!0)},p(m,g){g[0]&2&&Xn(r,m[1]),g[0]&2&&f!==(f=window.moment(m[1]).format("YYYY-MM-DDThh:mm"))&&N(c,"min",f),g[0]&4&&Xn(c,m[2])},d(m){m&&q(e),m&&q(n),m&&q(r),m&&q(o),m&&q(a),m&&q(l),m&&q(c),d=!1,At(h)}}}function GT(t){let e,n,r,o,a;return{c(){e=Y("label"),e.textContent="Date",n=te(),r=Y("input"),N(e,"for","eventDate"),N(e,"class","svelte-47446l"),N(r,"type","date"),N(r,"name","eventDate")},m(l,c){V(l,e,c),V(l,n,c),V(l,r,c),Xn(r,t[6]),o||(a=fe(r,"input",t[23]),o=!0)},p(l,c){c[0]&64&&Xn(r,l[6])},d(l){l&&q(e),l&&q(n),l&&q(r),o=!1,a()}}}function WT(t){let e,n,r,o;return{c(){e=Y("div"),n=Y("button"),n.textContent="Create",N(n,"class","svelte-47446l"),N(e,"class","buttonRow svelte-47446l")},m(a,l){V(a,e,l),I(e,n),r||(o=fe(n,"click",t[12]),r=!0)},p:Le,d(a){a&&q(e),r=!1,o()}}}function UT(t){let e,n,r,o,a,l,c,f,d,h,m;function g(D,P){return D[7]!=""?jT:BT}let y=g(t,[-1,-1]),_=y(t);function x(D,P){return D[8].file?zT:HT}let k=x(t,[-1,-1]),E=k(t),T=t[7]!=""&&Gg(t);return{c(){e=Y("div"),_.c(),n=te(),E.c(),r=te(),o=Y("div"),a=Y("button"),a.textContent="Update",l=te(),c=Y("button"),c.textContent="Delete",f=te(),T&&T.c(),d=rr(),N(e,"class","buttonRow svelte-47446l"),N(a,"class","svelte-47446l"),N(c,"class","svelte-47446l"),N(o,"class","buttonRow svelte-47446l")},m(D,P){V(D,e,P),_.m(e,null),I(e,n),E.m(e,null),V(D,r,P),V(D,o,P),I(o,a),I(o,l),I(o,c),V(D,f,P),T&&T.m(D,P),V(D,d,P),h||(m=[fe(a,"click",t[15]),fe(c,"click",t[13])],h=!0)},p(D,P){y===(y=g(D,P))&&_?_.p(D,P):(_.d(1),_=y(D),_&&(_.c(),_.m(e,n))),k===(k=x(D,P))&&E?E.p(D,P):(E.d(1),E=k(D),E&&(E.c(),E.m(e,null))),D[7]!=""?T?T.p(D,P):(T=Gg(D),T.c(),T.m(d.parentNode,d)):T&&(T.d(1),T=null)},d(D){D&&q(e),_.d(),E.d(),D&&q(r),D&&q(o),D&&q(f),T&&T.d(D),D&&q(d),h=!1,At(m)}}}function BT(t){let e,n,r;return{c(){e=Y("button"),e.textContent="Show Single Event",N(e,"class","svelte-47446l")},m(o,a){V(o,e,a),n||(r=fe(e,"click",t[19]),n=!0)},p:Le,d(o){o&&q(e),n=!1,r()}}}function jT(t){let e,n,r;return{c(){e=Y("button"),e.textContent="Show Recurring Event",N(e,"class","svelte-47446l")},m(o,a){V(o,e,a),n||(r=fe(e,"click",t[19]),n=!0)},p:Le,d(o){o&&q(e),n=!1,r()}}}function HT(t){let e,n,r;return{c(){e=Y("button"),e.textContent="Create Event Note",N(e,"class","svelte-47446l")},m(o,a){V(o,e,a),n||(r=fe(e,"click",t[18]),n=!0)},p:Le,d(o){o&&q(e),n=!1,r()}}}function zT(t){let e,n,r,o,a=t[8].match=="title"&&Yg(t);return{c(){a&&a.c(),e=te(),n=Y("button"),n.textContent="Open Event Note",N(n,"class","svelte-47446l")},m(l,c){a&&a.m(l,c),V(l,e,c),V(l,n,c),r||(o=fe(n,"click",t[17]),r=!0)},p(l,c){l[8].match=="title"?a?a.p(l,c):(a=Yg(l),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null)},d(l){a&&a.d(l),l&&q(e),l&&q(n),r=!1,o()}}}function Yg(t){let e,n,r;return{c(){e=Y("button"),e.textContent="Create Event Note for this date",N(e,"class","svelte-47446l")},m(o,a){V(o,e,a),n||(r=fe(e,"click",t[18]),n=!0)},p:Le,d(o){o&&q(e),n=!1,r()}}}function Gg(t){let e,n,r,o,a,l;return{c(){e=Y("div"),n=Y("button"),n.textContent="Update All",r=te(),o=Y("button"),o.textContent="Delete All",N(n,"class","svelte-47446l"),N(o,"class","svelte-47446l"),N(e,"class","buttonRow svelte-47446l")},m(c,f){V(c,e,f),I(e,n),I(e,r),I(e,o),a||(l=[fe(n,"click",t[16]),fe(o,"click",t[14])],a=!0)},p:Le,d(c){c&&q(e),a=!1,At(l)}}}function qT(t){let e,n,r,o,a,l,c,f,d,h,m,g,y,_,x,k,E,T,D,P,M,R,Q;function L(z,X){return z[4]?FT:RT}let j=L(t,[-1,-1]),ee=j(t);function K(z,X){return z[5]?GT:YT}let ae=K(t,[-1,-1]),xe=ae(t);function J(z,X){return z[0].id?UT:WT}let ie=J(t,[-1,-1]),Z=ie(t);return{c(){e=Y("div"),n=Y("input"),r=te(),o=Y("label"),o.textContent="Description",a=te(),l=Y("textarea"),f=te(),ee.c(),d=te(),h=Y("div"),m=Y("label"),m.textContent="Full Day",g=te(),y=Y("input"),_=te(),xe.c(),x=te(),k=Y("label"),k.textContent="Reoccurring",E=te(),T=Y("input"),P=te(),M=Y("div"),Z.c(),N(n,"class","summaryInput svelte-47446l"),N(n,"name","summary"),N(n,"type","text"),N(n,"placeholder","Summary"),N(o,"for","description"),N(o,"class","svelte-47446l"),N(l,"name","description"),l.value=c=t[9](),N(m,"for","fullDay"),N(m,"class","svelte-47446l"),N(y,"type","checkbox"),N(y,"name","fullDay"),N(h,"class","googleFullDayContainer svelte-47446l"),N(k,"for","reoccurring"),N(k,"class","svelte-47446l"),N(T,"type","text"),N(T,"name","Reoccurring"),T.disabled=D=t[0].id!=null,N(M,"class","googleEventButtonContainer svelte-47446l"),N(e,"class","googleEventDetails")},m(z,X){V(z,e,X),I(e,n),Xn(n,t[0].summary),I(e,r),I(e,o),I(e,a),I(e,l),I(e,f),ee.m(e,null),I(e,d),I(e,h),I(h,m),I(h,g),I(h,y),y.checked=t[5],I(e,_),xe.m(e,null),I(e,x),I(e,k),I(e,E),I(e,T),Xn(T,t[7]),I(e,P),I(e,M),Z.m(M,null),R||(Q=[fe(n,"input",t[21]),fe(l,"change",t[10]),fe(y,"change",t[22]),fe(T,"input",t[26])],R=!0)},p(z,X){X[0]&1&&n.value!==z[0].summary&&Xn(n,z[0].summary),j===(j=L(z,X))&&ee?ee.p(z,X):(ee.d(1),ee=j(z),ee&&(ee.c(),ee.m(e,d))),X[0]&32&&(y.checked=z[5]),ae===(ae=K(z,X))&&xe?xe.p(z,X):(xe.d(1),xe=ae(z),xe&&(xe.c(),xe.m(e,x))),X[0]&1&&D!==(D=z[0].id!=null)&&(T.disabled=D),X[0]&128&&T.value!==z[7]&&Xn(T,z[7]),ie===(ie=J(z,X))&&Z?Z.p(z,X):(Z.d(1),Z=ie(z),Z&&(Z.c(),Z.m(M,null)))},i:Le,o:Le,d(z){z&&q(e),ee.d(),xe.d(),Z.d(),R=!1,At(Q)}}}function Wg(){let t=15,e=1e3*60*t;return window.moment(new Date(Math.round(new Date().getTime()/e)*e))}function VT(t,e,n){let{event:r}=e,{closeFunction:o}=e,a,l=!0,c,f=ce.getInstance(),d,h,m,g="",y=Yo(r,f);function _(Z){let z=Ig.default.cloneDeep(Z);return c?(z.start.date=window.moment(m).format("YYYY-MM-DD"),z.end.date=window.moment(m).format("YYYY-MM-DD"),delete z.start.dateTime,delete z.end.dateTime):(z.start.dateTime=window.moment(d).format(),z.end.dateTime=window.moment(h).format(),delete z.start.date,delete z.end.date),z}Fi(()=>Ke(void 0,void 0,void 0,function*(){var Z,z,X,_e,tt;if(n(5,c=((Z=r==null?void 0:r.start)===null||Z===void 0?void 0:Z.dateTime)==null&&((z=r==null?void 0:r.start)===null||z===void 0?void 0:z.date)!==void 0),n(3,a=yield kt()),n(4,l=!1),r.id==null){n(0,r.summary=(X=r.summary)!==null&&X!==void 0?X:"",r),n(0,r.description=(_e=r.description)!==null&&_e!==void 0?_e:"",r),n(0,r.parent=a.find(at=>at.id===f.settings.defaultCalendar),r),r.parent||n(0,r.parent=a[a.length-1],r),n(7,g="");let Fe=Wg();n(1,d=Fe.format("YYYY-MM-DDTHH:mm")),n(2,h=Fe.add(1,"hour").format("YYYY-MM-DDTHH:mm")),n(6,m=Fe.format("YYYY-MM-DD")),r.start.date&&n(6,m=window.moment(r.start.date).format("YYYY-MM-DD")),r.start.dateTime&&r.end.dateTime&&(n(1,d=window.moment(r.start.dateTime).format("YYYY-MM-DDTHH:mm")),n(2,h=window.moment(r.end.dateTime).format("YYYY-MM-DDTHH:mm")))}else{let Fe=yield or((tt=r.recurringEventId)!==null&&tt!==void 0?tt:r.id,r.parent.id);if(Fe==null?void 0:Fe.recurrence){let at=Fo(Fe.recurrence[0]);n(7,g=at.toText())}else n(7,g="");if(c){let at=Wg();n(1,d=at.format("YYYY-MM-DDTHH:mm")),n(2,h=at.add(1,"hour").format("YYYY-MM-DDTHH:mm")),n(6,m=window.moment(r.start.date).format("YYYY-MM-DD"))}else n(1,d=window.moment(r.start.dateTime).format("YYYY-MM-DDTHH:mm")),n(2,h=window.moment(r.end.dateTime).format("YYYY-MM-DDTHH:mm")),n(6,m=window.moment().format("YYYY-MM-DD"))}}));let x=()=>r.description?r.description.replace(/<\/?[^>]+(>|$)/g,""):"",k=Z=>{Z.target instanceof HTMLTextAreaElement&&n(0,r.description=Z.target.value,r)},E=Z=>{let z=Z.target;if(z instanceof HTMLSelectElement){let X=z.value;n(0,r.parent.id=X,r)}},T=()=>Ke(void 0,void 0,void 0,function*(){if(g&&g!="")try{let z=se.fromText(g),X=new Hi;X.rrule(z);let _e=X.valueOf();if(g&&_e[0]==""){Ee("Event not created. Error in recurrence text.",!0);return}n(0,r.recurrence=_e,r)}catch(z){Ee("Event not created. Error in recurrence text.",!0);return}let Z=yield Lo(_(r));(Z==null?void 0:Z.id)&&o()}),D=Z=>Ke(void 0,void 0,void 0,function*(){let z=!1;r.recurringEventId?z=yield Oo(r):z=yield Oo(r),z&&o()}),P=()=>Ke(void 0,void 0,void 0,function*(){(yield Oo(_(r),!0))&&o()}),M=()=>Ke(void 0,void 0,void 0,function*(){let Z=_(r),z;Z.recurringEventId?z=yield Ao(Z):z=yield Ao(Z),z.id&&o()}),R=()=>Ke(void 0,void 0,void 0,function*(){(yield Ao(_(r),!0)).id&&o()}),Q=()=>Ke(void 0,void 0,void 0,function*(){app.workspace.getLeaf(!0).openFile(y.file),o()}),L=()=>Ke(void 0,void 0,void 0,function*(){f.settings.useDefaultTemplate&&f.settings.defaultFolder&&f.settings.defaultFolder?ar(r,f.settings.defaultFolder,f.settings.defaultTemplate):new lr(r,Z=>n(8,y.file=Z,y)).open()}),j=()=>{window.open(r.htmlLink)};function ee(){r.summary=this.value,n(0,r)}function K(){c=this.checked,n(5,c)}function ae(){m=this.value,n(6,m)}function xe(){d=this.value,n(1,d)}function J(){h=this.value,n(2,h),n(1,d)}function ie(){g=this.value,n(7,g)}return t.$$set=Z=>{"event"in Z&&n(0,r=Z.event),"closeFunction"in Z&&n(20,o=Z.closeFunction)},t.$$.update=()=>{if(t.$$.dirty[0]&6){e:{let Z=window.moment(d);window.moment(h).isBefore(Z)&&n(2,h=Z.add(1,"hour").format("YYYY-MM-DDTHH:mm"))}}},[r,d,h,a,l,c,m,g,y,x,k,E,T,D,P,M,R,Q,L,j,o,ee,K,ae,xe,J,ie]}var Ug=class extends Gt{constructor(e){super();zt(this,e,VT,qT,Ht,{event:0,closeFunction:20},IT,[-1,-1])}},Bg=Ug;var dn=class extends jg.Modal{constructor(e,n){super(ce.getInstance().app);this.selectedEvent=e,n&&(this.closeFunction=n)}onOpen(){return G(this,null,function*(){let{contentEl:e}=this;new Bg({target:e,props:{event:this.selectedEvent,closeFunction:()=>{this.closeFunction&&this.closeFunction(),this.close()}}})})}onClose(){let{contentEl:e}=this;e.empty()}};var zg=ye(el());var Qn=class extends Hg.FuzzySuggestModal{constructor(e,n,r=window.moment(),o=!1,a){super(window.app);this.plugin=ce.getInstance();this.eventList=[...e],this.modalSelectMode=n,this.setPlaceholder(`${r.format("MM/DD/YYYY")} Arrow left/right to switch day`),this.emptyStateText="No events found enter to create a new one",this.eventsChanged=o,this.currentDate=r.clone(),a&&(this.closeFunction=a),this.inputEl.addEventListener("keydown",l=>G(this,null,function*(){let c=!1;!this.getSuggestions(this.inputEl.value).length&&l.key=="Enter"&&new dn({summary:this.inputEl.value,start:{date:r.format()},end:{}},()=>{this.eventsChanged=!0,this.close()}).open(),l.key=="ArrowRight"?(l.ctrlKey?this.currentDate=this.currentDate.add(1,"month"):l.shiftKey?this.currentDate=this.currentDate.add(1,"week"):this.currentDate=this.currentDate.add(1,"day"),c=!0):l.key=="ArrowLeft"&&(l.ctrlKey?this.currentDate=this.currentDate.subtract(1,"month"):l.shiftKey?this.currentDate=this.currentDate.subtract(1,"week"):this.currentDate=this.currentDate.subtract(1,"day"),c=!0),c&&(this.setPlaceholder("Loading"),this.eventList=yield Ve({startDate:this.currentDate}),this.inputEl.dispatchEvent(new Event("input")),this.setPlaceholder(`${this.currentDate.format("MM/DD/YYYY")} Arrow left and right to switch day`))}))}getItems(){return this.plugin.settings.activateDailyNoteAddon?[{id:"xxx",start:null,end:null},...this.eventList]:this.eventList}getItemText(e){return e.id=="xxx"?Ii(this.currentDate)?"Open daily note":"Create daily note":e.start.date?`${e.start.date}		 | ${e.summary}	`:`${window.moment(e.start.dateTime).format("YYYY-MM-DD HH:mm")}	 | ${e.summary}	`}onChooseItem(e){return G(this,null,function*(){if(e.id=="xxx"){let n=Ii(this.currentDate);n||(n=yield(0,zg.createDailyNote)(this.currentDate)),yield app.workspace.getLeaf(!1).openFile(n,{active:!0});return}this.modalSelectMode=="details"?(this.open(),new dn(e,()=>this.eventsChanged=!0).open()):this.modalSelectMode=="createNote"&&(this.plugin.settings.useDefaultTemplate?ar(e,this.plugin.settings.defaultFolder,this.plugin.settings.defaultTemplate):new lr(e,()=>{}).open())})}onClose(){this.closeFunction&&this.eventsChanged&&this.closeFunction()}};var yl=class extends qg.FuzzySuggestModal{constructor(e){super(ce.getInstance().app);this.calendarList=e,this.setPlaceholder("Select a calendar to view it")}getItems(){return this.calendarList}getItemText(e){return`${e.summary}	`}onChooseItem(e){return G(this,null,function*(){let n=yield Ve({include:[e.id]});new Qn(n,"details").open()})}};var Rr;(function(a){a.web="web",a.month="month",a.day="day",a.schedule="schedule",a.week="week"})(Rr||(Rr={}));var Rl=ye(require("obsidian"));var Qg=ye(Xg());function eS(t){fn(t,"svelte-gl8t2a",'.googleCalendarEvent.svelte-gl8t2a{display:flex;padding:10px;padding-top:0;position:absolute;cursor:pointer;width:150px;left:40px;border-radius:5px;color:black;font-size:0.5em;box-shadow:3px 2px 8px 4px rgba(0,0,0,0.36);overflow:hidden}.hourLine.svelte-gl8t2a::after{content:"";position:absolute;width:90%;left:25px;border-bottom:1px solid white}.hourLineLarge.svelte-gl8t2a::after{width:80%;left:50px}.hourText.svelte-gl8t2a{display:block;font-family:"consolas"}.timeline.svelte-gl8t2a,.hourText.svelte-gl8t2a,.hourTextContainer.svelte-gl8t2a{overflow:hidden}.timeDisplay.svelte-gl8t2a{position:absolute;width:calc(100% - 25px);height:3px;margin-left:25px;background:red;overflow:visible}.timeline.svelte-gl8t2a{position:relative;display:flex;flex-direction:row;overflow:visible}')}function Jg(t,e,n){let r=t.slice();return r[21]=e[n],r[23]=n,r}function $g(t,e,n){let r=t.slice();return r[24]=e[n],r[23]=n,r}function ev(t,e,n){let r=t.slice();return r[24]=e[n],r[23]=n,r}function tS(t){let e,n,r,o,a=window.moment().isSame(t[0],"day"),l,c=`${t[1]}px`,f=`${t[2]}px`,d=` -${Zc(t[1],t[3][0])}px 0px -${Xc(t[1],t[3][1])}px 0px`,h={length:24},m=[];for(let k=0;k<h.length;k+=1)m[k]=tv(ev(t,h,k));let g=t[4]&&nv(t),y=a&&iv(t),_=t[7],x=[];for(let k=0;k<_.length;k+=1)x[k]=ov(Jg(t,_,k));return{c(){e=Y("div"),n=Y("div");for(let k=0;k<m.length;k+=1)m[k].c();r=te(),g&&g.c(),o=te(),y&&y.c(),l=te();for(let k=0;k<x.length;k+=1)x[k].c();N(n,"class","hourLineContainer"),N(e,"class","timeline svelte-gl8t2a"),de(e,"height",c,!1),de(e,"width",f,!1),de(e,"margin",d,!1)},m(k,E){V(k,e,E),I(e,n);for(let T=0;T<m.length;T+=1)m[T].m(n,null);I(e,r),g&&g.m(e,null),I(e,o),y&&y.m(e,null),I(e,l);for(let T=0;T<x.length;T+=1)x[T].m(e,null)},p(k,E){if(E&258){h={length:24};let T;for(T=0;T<h.length;T+=1){let D=ev(k,h,T);m[T]?m[T].p(D,E):(m[T]=tv(D),m[T].c(),m[T].m(n,null))}for(;T<m.length;T+=1)m[T].d(1);m.length=h.length}if(k[4]?g?g.p(k,E):(g=nv(k),g.c(),g.m(e,o)):g&&(g.d(1),g=null),E&1&&(a=window.moment().isSame(k[0],"day")),a?y?y.p(k,E):(y=iv(k),y.c(),y.m(e,l)):y&&(y.d(1),y=null),E&640){_=k[7];let T;for(T=0;T<_.length;T+=1){let D=Jg(k,_,T);x[T]?x[T].p(D,E):(x[T]=ov(D),x[T].c(),x[T].m(e,null))}for(;T<x.length;T+=1)x[T].d(1);x.length=_.length}E&2&&c!==(c=`${k[1]}px`)&&de(e,"height",c,!1),E&4&&f!==(f=`${k[2]}px`)&&de(e,"width",f,!1),E&10&&d!==(d=` -${Zc(k[1],k[3][0])}px 0px -${Xc(k[1],k[3][1])}px 0px`)&&de(e,"margin",d,!1)},d(k){k&&q(e),Ft(m,k),g&&g.d(),y&&y.d(),Ft(x,k)}}}function nS(t){let e;return{c(){e=Y("p"),e.textContent="Loading"},m(n,r){V(n,e,r)},p:Le,d(n){n&&q(e)}}}function tv(t){let e,n,r=`${t[1]/24}px`;return{c(){e=Y("div"),N(e,"class",n=""+(Co(t[8]==2?"hourLine hourLineLarge":"hourLine")+" svelte-gl8t2a")),de(e,"height",r,!1)},m(o,a){V(o,e,a)},p(o,a){a&256&&n!==(n=""+(Co(o[8]==2?"hourLine hourLineLarge":"hourLine")+" svelte-gl8t2a"))&&N(e,"class",n),a&2&&r!==(r=`${o[1]/24}px`)&&de(e,"height",r,!1)},d(o){o&&q(e)}}}function nv(t){let e,n=`-${t[1]/52}px`,r={length:24},o=[];for(let a=0;a<r.length;a+=1)o[a]=rv($g(t,r,a));return{c(){e=Y("div");for(let a=0;a<o.length;a+=1)o[a].c();N(e,"class","hourTextContainer svelte-gl8t2a"),de(e,"margin-top",n,!1)},m(a,l){V(a,e,l);for(let c=0;c<o.length;c+=1)o[c].m(e,null)},p(a,l){if(l&3330){r={length:24};let c;for(c=0;c<r.length;c+=1){let f=$g(a,r,c);o[c]?o[c].p(f,l):(o[c]=rv(f),o[c].c(),o[c].m(e,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=r.length}l&2&&n!==(n=`-${a[1]/52}px`)&&de(e,"margin-top",n,!1)},d(a){a&&q(e),Ft(o,a)}}}function rv(t){let e,n=t[11](t[23],t[8])+"",r,o=`${t[1]/24}px`,a=`${t[1]/50}px`,l,c;return{c(){e=Y("span"),r=et(n),N(e,"class","hourText svelte-gl8t2a"),de(e,"height",o,!1),de(e,"font-size",a,!1)},m(f,d){V(f,e,d),I(e,r),l||(c=fe(e,"click",t[10]),l=!0)},p(f,d){d&256&&n!==(n=f[11](f[23],f[8])+"")&&en(r,n),d&2&&o!==(o=`${f[1]/24}px`)&&de(e,"height",o,!1),d&2&&a!==(a=`${f[1]/50}px`)&&de(e,"font-size",a,!1)},d(f){f&&q(e),l=!1,c()}}}function iv(t){let e,n=`${t[6]}px`;return{c(){e=Y("div"),N(e,"class","timeDisplay svelte-gl8t2a"),de(e,"top",n,!1)},m(r,o){V(r,e,o)},p(r,o){o&64&&n!==(n=`${r[6]}px`)&&de(e,"top",n,!1)},d(r){r&&q(e)}}}function ov(t){let e,n,r=t[21].event.summary+"",o,a,l,c,f,d=`${t[21].y}px`,h=`calc(25px + ${t[21].x}%)`,m=`${t[21].width}%`,g=`${t[21].height}px`,y,_;function x(...k){return t[15](t[21],...k)}return{c(){e=Y("div"),n=Y("span"),o=et(r),l=te(),N(n,"class",a="googleCalendarName googleCalendarName_Calendar_Color_"+t[21].event.parent.colorId+" googleCalendarName_Event_Color_"+t[21].event.parent.colorId+" googleCalendarName_Id_"+t[21].event.parent.id+" svelte-gl8t2a"),N(e,"class",c="googleCalendarEvent googleCalendarEvent_Calendar_Color_"+t[21].event.parent.colorId+" googleCalendarEvent_Event_Color_"+t[21].event.parent.colorId+" googleCalendarEvent_Id_"+t[21].event.parent.id+" svelte-gl8t2a"),N(e,"id",f=t[21].event.id),de(e,"top",d,!1),de(e,"left",h,!1),de(e,"width",m,!1),de(e,"height",g,!1),de(e,"background",ds(t[21].event),!1)},m(k,E){V(k,e,E),I(e,n),I(n,o),I(e,l),y||(_=fe(e,"click",x),y=!0)},p(k,E){t=k,E&128&&r!==(r=t[21].event.summary+"")&&en(o,r),E&128&&a!==(a="googleCalendarName googleCalendarName_Calendar_Color_"+t[21].event.parent.colorId+" googleCalendarName_Event_Color_"+t[21].event.parent.colorId+" googleCalendarName_Id_"+t[21].event.parent.id+" svelte-gl8t2a")&&N(n,"class",a),E&128&&c!==(c="googleCalendarEvent googleCalendarEvent_Calendar_Color_"+t[21].event.parent.colorId+" googleCalendarEvent_Event_Color_"+t[21].event.parent.colorId+" googleCalendarEvent_Id_"+t[21].event.parent.id+" svelte-gl8t2a")&&N(e,"class",c),E&128&&f!==(f=t[21].event.id)&&N(e,"id",f),E&128&&d!==(d=`${t[21].y}px`)&&de(e,"top",d,!1),E&128&&h!==(h=`calc(25px + ${t[21].x}%)`)&&de(e,"left",h,!1),E&128&&m!==(m=`${t[21].width}%`)&&de(e,"width",m,!1),E&128&&g!==(g=`${t[21].height}px`)&&de(e,"height",g,!1),E&128&&de(e,"background",ds(t[21].event),!1)},d(k){k&&q(e),y=!1,_()}}}function rS(t){let e;function n(a,l){return a[5]?nS:tS}let r=n(t,-1),o=r(t);return{c(){o.c(),e=rr()},m(a,l){o.m(a,l),V(a,e,l)},p(a,[l]){r===(r=n(a,l))&&o?o.p(a,l):(o.d(1),o=r(a),o&&(o.c(),o.m(e.parentNode,e)))},i:Le,o:Le,d(a){o.d(a),a&&q(e)}}}function iS(t,e,n){let{height:r=700}=e,{width:o=300}=e,{date:a=window.moment()}=e,{include:l}=e,{exclude:c}=e,{hourRange:f=[0,24]}=e,{showTimeDisplay:d=!0}=e,h=!0,m=0,g=[],y=[],_,x=ce.getInstance(),k=x.settings.timelineHourFormat,E=()=>Ke(void 0,void 0,void 0,function*(){n(8,k=x.settings.timelineHourFormat),yield D();let L=Us(new Date);n(6,m=Math.floor(r*L))}),T=()=>{let L=new Qg.default;g.forEach(K=>{let ae=K.start.date||K.start.dateTime;L.has(ae)?L.get(ae).push(K):L.set(ae,[K])});let j=0,ee=null;for(let K of L.values()){if(K[0].start.dateTime){let ae=window.moment(K[0].start.dateTime);ee&&ae.isBefore(ee,"minutes")?j++:j=0,ee=window.moment(K[0].end.dateTime)}K.forEach((ae,xe)=>{let J=j*5,ie=(100-J)/K.length;n(7,y=[...y,{event:ae,x:J+ie*xe,y:Og(ae,r),width:ie,height:Ag(ae,r),fullDay:ae.start.date!=null}])})}},D=()=>Ke(void 0,void 0,void 0,function*(){if(!a.isValid())return;let L=yield Ve({startDate:a,include:l,exclude:c});JSON.stringify(L)!=JSON.stringify(g)&&(g=L,n(7,y=[]),T()),n(5,h=!1)}),P=(L,j)=>{j.shiftKey?window.open(L.htmlLink):new dn(L,()=>{kn(),n(0,a),n(14,_)}).open()};Yi(()=>{clearInterval(_)});let M=()=>{n(8,k+=1),k>2&&n(8,k=0),x.settings.timelineHourFormat=k,x.saveSettings()},R=(L,j)=>{let ee=window.moment(`${L}:00:00`,"H:mm:ss");switch(j){case 0:return ee.format("HH");case 1:return ee.format("hh");case 2:return ee.format("hh A")}},Q=(L,j)=>P(L.event,j);return t.$$set=L=>{"height"in L&&n(1,r=L.height),"width"in L&&n(2,o=L.width),"date"in L&&n(0,a=L.date),"include"in L&&n(12,l=L.include),"exclude"in L&&n(13,c=L.exclude),"hourRange"in L&&n(3,f=L.hourRange),"showTimeDisplay"in L&&n(4,d=L.showTimeDisplay)},t.$$.update=()=>{if(t.$$.dirty&16385){e:n(0,a),n(14,_),_&&clearInterval(_),n(5,h=!0),n(14,_=setInterval(E,5e3)),E()}},[a,r,o,f,d,h,m,y,k,P,M,R,l,c,_,Q]}var sv=class extends Gt{constructor(e){super();zt(this,e,iS,rS,Ht,{height:1,width:2,date:0,include:12,exclude:13,hourRange:3,showTimeDisplay:4},eS)}},Bs=sv;function oS(t){fn(t,"svelte-169s007",".fixedSizeButton.svelte-169s007{text-align:center;padding:10px 5%;margin:0}.titleContainer.svelte-169s007{display:flex;flex-direction:row;align-items:center;justify-content:flex-start}.navigationContainer.svelte-169s007{display:flex;flex-direction:row;align-items:center;justify-content:space-around;flex-wrap:wrap;padding-bottom:30px}")}function av(t){let e,n,r,o,a,l=t[6].format("YYYY-MM-DD")+"",c,f,d,h,m,g,y,_,x,k,E,T,D,P;return{c(){e=Y("div"),n=Y("button"),n.textContent="+",r=te(),o=Y("h3"),a=et("Google Calendar "),c=et(l),f=te(),d=Y("div"),h=Y("button"),h.textContent="<<",m=te(),g=Y("button"),g.textContent="<",y=te(),_=Y("button"),_.textContent="Start",x=te(),k=Y("button"),k.textContent=">",E=te(),T=Y("button"),T.textContent=">>",N(n,"aria-label","Create Event"),N(e,"class","titleContainer svelte-169s007"),N(h,"class","fixedSizeButton svelte-169s007"),N(h,"aria-label","Back 1 week"),N(g,"class","fixedSizeButton svelte-169s007"),N(g,"aria-label","Back 1 day"),N(_,"class","fixedSizeButton svelte-169s007"),N(_,"aria-label","Jump to start"),N(k,"class","fixedSizeButton svelte-169s007"),N(k,"aria-label","Forward 1 day"),N(T,"class","fixedSizeButton svelte-169s007"),N(T,"aria-label","Forward 1 week"),N(d,"class","navigationContainer svelte-169s007")},m(M,R){V(M,e,R),I(e,n),I(e,r),I(e,o),I(o,a),I(o,c),V(M,f,R),V(M,d,R),I(d,h),I(d,m),I(d,g),I(d,y),I(d,_),I(d,x),I(d,k),I(d,E),I(d,T),D||(P=[fe(n,"click",t[12]),fe(h,"click",t[7]),fe(g,"click",t[8]),fe(_,"click",t[9]),fe(k,"click",t[11]),fe(T,"click",t[10])],D=!0)},p(M,R){R&64&&l!==(l=M[6].format("YYYY-MM-DD")+"")&&en(c,l)},d(M){M&&q(e),M&&q(f),M&&q(d),D=!1,At(P)}}}function sS(t){let e,n,r,o,a,l,c=t[2]&&t[6]&&av(t);function f(h){t[15](h)}let d={height:t[0],width:t[1],include:t[3],exclude:t[4],hourRange:t[5]};return t[6]!==void 0&&(d.date=t[6]),o=new Bs({props:d}),tn.push(()=>Lr(o,"date",f)),{c(){e=Y("div"),c&&c.c(),n=te(),r=Y("div"),oi(o.$$.fragment),de(r,"overflow","hidden"),de(e,"padding-left","10px")},m(h,m){V(h,e,m),c&&c.m(e,null),I(e,n),I(e,r),Nr(o,r,null),l=!0},p(h,[m]){h[2]&&h[6]?c?c.p(h,m):(c=av(h),c.c(),c.m(e,n)):c&&(c.d(1),c=null);let g={};m&1&&(g.height=h[0]),m&2&&(g.width=h[1]),m&8&&(g.include=h[3]),m&16&&(g.exclude=h[4]),m&32&&(g.hourRange=h[5]),!a&&m&64&&(a=!0,g.date=h[6],Ar(()=>a=!1)),o.$set(g)},i(h){l||(Ct(o.$$.fragment,h),l=!0)},o(h){Yt(o.$$.fragment,h),l=!1},d(h){h&&q(e),c&&c.d(),ir(o)}}}function aS(t,e,n){let{height:r=void 0}=e,{width:o=void 0}=e,{startDate:a=window.moment()}=e,{navigation:l=!1}=e,{include:c}=e,{exclude:f}=e,{hourRange:d=void 0}=e,h=0,m=()=>n(14,h-=7),g=()=>n(14,h-=1),y=()=>n(14,h=0),_=()=>n(14,h+=7),x=()=>n(14,h+=1),k,E=D=>{new dn({start:{},end:{}},()=>{kn(),n(6,k),n(2,l),n(13,a),n(14,h)}).open()};function T(D){k=D,n(6,k),n(2,l),n(13,a),n(14,h)}return t.$$set=D=>{"height"in D&&n(0,r=D.height),"width"in D&&n(1,o=D.width),"startDate"in D&&n(13,a=D.startDate),"navigation"in D&&n(2,l=D.navigation),"include"in D&&n(3,c=D.include),"exclude"in D&&n(4,f=D.exclude),"hourRange"in D&&n(5,d=D.hourRange)},t.$$.update=()=>{if(t.$$.dirty&24580){e:n(6,k=l?a.clone().local().add(h,"days"):a)}},[r,o,l,c,f,d,k,m,g,y,_,x,E,a,h,T]}var lv=class extends Gt{constructor(e){super();zt(this,e,aS,sS,Ht,{height:0,width:1,startDate:13,navigation:2,include:3,exclude:4,hourRange:5},oS)}},wl=lv;function lS(t){fn(t,"svelte-1ficnkj",".fullSize.svelte-1ficnkj,.content.svelte-1ficnkj,.box.svelte-1ficnkj{width:100%;height:100%;overflow:scoll !important}")}function uS(t){let e,n,r=`${t[0]}px`,o=`${t[1]}px`;return{c(){e=Y("webview"),Ri(e.src,n=t[3])||N(e,"src",n),N(e,"allowpopups",""),de(e,"width",r,!1),de(e,"height",o,!1)},m(a,l){V(a,e,l),t[9](e)},p(a,l){l&8&&!Ri(e.src,n=a[3])&&N(e,"src",n),l&1&&r!==(r=`${a[0]}px`)&&de(e,"width",r,!1),l&2&&o!==(o=`${a[1]}px`)&&de(e,"height",o,!1)},d(a){a&&q(e),t[9](null)}}}function cS(t){let e,n,r=`${t[1]}px`;return{c(){e=Y("webview"),Ri(e.src,n=t[3])||N(e,"src",n),N(e,"allowpopups",""),de(e,"height",r,!1)},m(o,a){V(o,e,a),t[8](e)},p(o,a){a&8&&!Ri(e.src,n=o[3])&&N(e,"src",n),a&2&&r!==(r=`${o[1]}px`)&&de(e,"height",r,!1)},d(o){o&&q(e),t[8](null)}}}function fS(t){let e,n;return{c(){e=Y("webview"),Ri(e.src,n=t[3])||N(e,"src",n),N(e,"allowpopups",""),N(e,"class","fullSize svelte-1ficnkj")},m(r,o){V(r,e,o),t[7](e)},p(r,o){o&8&&!Ri(e.src,n=r[3])&&N(e,"src",n)},d(r){r&&q(e),t[7](null)}}}function dS(t){let e,n;function r(l,c){return l[0]==-1?fS:l[0]==0?cS:uS}let o=r(t,-1),a=o(t);return{c(){e=Y("div"),n=Y("div"),a.c(),N(n,"class","content svelte-1ficnkj"),N(e,"class","box svelte-1ficnkj")},m(l,c){V(l,e,c),I(e,n),a.m(n,null)},p(l,[c]){o===(o=r(l,c))&&a?a.p(l,c):(a.d(1),a=o(l),a&&(a.c(),a.m(n,null)))},i:Le,o:Le,d(l){l&&q(e),a.d()}}}function pS(t,e,n){let r=ce.getInstance(),{date:o=window.moment()}=e,{view:a=r.settings.webViewDefaultView}=e,{width:l=0}=e,{height:c=500}=e,{theme:f=r.settings.webViewDefaultColorMode}=e,d,h="";if(!o.isValid())h=`https://calendar.google.com/calendar/u/0/r/${a}/`;else{let _=o.format("yyyy/M/D");h=`https://calendar.google.com/calendar/u/0/r/${a}/${_}`}Fi(()=>{f=="auto"&&n(4,f=gl()),f=="dark"&&d.addEventListener("dom-ready",_=>{d.executeJavaScript(`
                const menu = document.querySelectorAll('[aria-label][aria-expanded]')[0]
                if(menu.getAttribute("aria-expanded") == "true"){
                    menu.click();
                }
            `),d.insertCSS("html { filter: hue-rotate(180deg)invert(100)contrast(93%) !important; }")})});function m(_){tn[_?"unshift":"push"](()=>{d=_,n(2,d)})}function g(_){tn[_?"unshift":"push"](()=>{d=_,n(2,d)})}function y(_){tn[_?"unshift":"push"](()=>{d=_,n(2,d)})}return t.$$set=_=>{"date"in _&&n(5,o=_.date),"view"in _&&n(6,a=_.view),"width"in _&&n(0,l=_.width),"height"in _&&n(1,c=_.height),"theme"in _&&n(4,f=_.theme)},[l,c,d,h,f,o,a,m,g,y]}var uv=class extends Gt{constructor(e){super();zt(this,e,pS,dS,Ht,{date:5,view:6,width:0,height:1,theme:4},lS)}},bl=uv;var ZF=ye(require("obsidian"));function Lt(){}function js(t,e){for(let n in e)t[n]=e[n];return t}function hS(t){return t&&typeof t=="object"&&typeof t.then=="function"}function cv(t){return t()}function fv(){return Object.create(null)}function ci(t){t.forEach(cv)}function ur(t){return typeof t=="function"}function ef(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function kl(t,e){return t!=t?e==e:t!==e}function mS(t){return Object.keys(t).length===0}function dv(t,e,n,r){if(t){let o=pv(t,e,n,r);return t[0](o)}}function pv(t,e,n,r){return t[1]&&r?js(n.ctx.slice(),t[1](r(e))):n.ctx}function gS(t,e,n,r){if(t[2]&&r){let o=t[2](r(n));if(e.dirty===void 0)return o;if(typeof o=="object"){let a=[],l=Math.max(e.dirty.length,o.length);for(let c=0;c<l;c+=1)a[c]=e.dirty[c]|o[c];return a}return e.dirty|o}return e.dirty}function hv(t,e,n,r,o,a,l){let c=gS(e,r,o,a);if(c){let f=pv(e,n,r,l);t.p(f,c)}}function Uo(t){return t==null?"":t}function Te(t,e){t.appendChild(e)}function Nt(t,e,n){t.insertBefore(e,n||null)}function Tt(t){t.parentNode.removeChild(t)}function El(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function Ue(t){return document.createElement(t)}function Bo(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Vi(t){return document.createTextNode(t)}function Cn(){return Vi(" ")}function xl(){return Vi("")}function Fr(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function be(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function mv(t,e){let n=Object.getOwnPropertyDescriptors(t.__proto__);for(let r in e)e[r]==null?t.removeAttribute(r):r==="style"?t.style.cssText=e[r]:r==="__value"?t.value=t[r]=e[r]:n[r]&&n[r].set?t[r]=e[r]:be(t,r,e[r])}function vS(t){return Array.from(t.childNodes)}function Hs(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function gt(t,e,n){t.classList[n?"add":"remove"](e)}var Cl;function fi(t){Cl=t}function yS(){if(!Cl)throw new Error("Function called outside component initialization");return Cl}var zs=[],gv=[],Tl=[],vv=[],_S=Promise.resolve(),tf=!1;function wS(){tf||(tf=!0,_S.then(sf))}function nf(t){Tl.push(t)}var rf=!1,of=new Set;function sf(){if(!rf){rf=!0;do{for(let t=0;t<zs.length;t+=1){let e=zs[t];fi(e),bS(e.$$)}for(fi(null),zs.length=0;gv.length;)gv.pop()();for(let t=0;t<Tl.length;t+=1){let e=Tl[t];of.has(e)||(of.add(e),e())}Tl.length=0}while(zs.length);for(;vv.length;)vv.pop()();tf=!1,rf=!1,of.clear()}}function bS(t){if(t.fragment!==null){t.update(),ci(t.before_update);let e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(nf)}}var Sl=new Set,Ki;function Zi(){Ki={r:0,c:[],p:Ki}}function Xi(){Ki.r||ci(Ki.c),Ki=Ki.p}function He(t,e){t&&t.i&&(Sl.delete(t),t.i(e))}function rt(t,e,n,r){if(t&&t.o){if(Sl.has(t))return;Sl.add(t),Ki.c.push(()=>{Sl.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}function yv(t,e){let n=e.token={};function r(o,a,l,c){if(e.token!==n)return;e.resolved=c;let f=e.ctx;l!==void 0&&(f=f.slice(),f[l]=c);let d=o&&(e.current=o)(f),h=!1;e.block&&(e.blocks?e.blocks.forEach((m,g)=>{g!==a&&m&&(Zi(),rt(m,1,1,()=>{e.blocks[g]===m&&(e.blocks[g]=null)}),Xi())}):e.block.d(1),d.c(),He(d,1),d.m(e.mount(),e.anchor),h=!0),e.block=d,e.blocks&&(e.blocks[a]=d),h&&sf()}if(hS(t)){let o=yS();if(t.then(a=>{fi(o),r(e.then,1,e.value,a),fi(null)},a=>{if(fi(o),r(e.catch,2,e.error,a),fi(null),!e.hasCatch)throw a}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}}function _v(t,e){rt(t,1,1,()=>{e.delete(t.key)})}function wv(t,e,n,r,o,a,l,c,f,d,h,m){let g=t.length,y=a.length,_=g,x={};for(;_--;)x[t[_].key]=_;let k=[],E=new Map,T=new Map;for(_=y;_--;){let R=m(o,a,_),Q=n(R),L=l.get(Q);L?r&&L.p(R,e):(L=d(Q,R),L.c()),E.set(Q,k[_]=L),Q in x&&T.set(Q,Math.abs(_-x[Q]))}let D=new Set,P=new Set;function M(R){He(R,1),R.m(c,h),l.set(R.key,R),h=R.first,y--}for(;g&&y;){let R=k[y-1],Q=t[g-1],L=R.key,j=Q.key;R===Q?(h=R.first,g--,y--):E.has(j)?!l.has(L)||D.has(L)?M(R):P.has(j)?g--:T.get(L)>T.get(j)?(P.add(L),M(R)):(D.add(j),g--):(f(Q,l),g--)}for(;g--;){let R=t[g];E.has(R.key)||f(R,l)}for(;y;)M(k[y-1]);return k}function Dl(t,e){let n={},r={},o={$$scope:1},a=t.length;for(;a--;){let l=t[a],c=e[a];if(c){for(let f in l)f in c||(r[f]=1);for(let f in c)o[f]||(n[f]=c[f],o[f]=1);t[a]=c}else for(let f in l)o[f]=1}for(let l in r)l in n||(n[l]=void 0);return n}function af(t){return typeof t=="object"&&t!==null?t:{}}function Yr(t){t&&t.c()}function cr(t,e,n,r){let{fragment:o,on_mount:a,on_destroy:l,after_update:c}=t.$$;o&&o.m(e,n),r||nf(()=>{let f=a.map(cv).filter(ur);l?l.push(...f):ci(f),t.$$.on_mount=[]}),c.forEach(nf)}function fr(t,e){let n=t.$$;n.fragment!==null&&(ci(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function kS(t,e){t.$$.dirty[0]===-1&&(zs.push(t),wS(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Qi(t,e,n,r,o,a,l=[-1]){let c=Cl;fi(t);let f=t.$$={fragment:null,ctx:null,props:a,update:Lt,not_equal:o,bound:fv(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:[]),callbacks:fv(),dirty:l,skip_bound:!1},d=!1;if(f.ctx=n?n(t,e.props||{},(h,m,...g)=>{let y=g.length?g[0]:m;return f.ctx&&o(f.ctx[h],f.ctx[h]=y)&&(!f.skip_bound&&f.bound[h]&&f.bound[h](y),d&&kS(t,h)),m}):[],f.update(),d=!0,ci(f.before_update),f.fragment=r?r(f.ctx):!1,e.target){if(e.hydrate){let h=vS(e.target);f.fragment&&f.fragment.l(h),h.forEach(Tt)}else f.fragment&&f.fragment.c();e.intro&&He(t.$$.fragment),cr(t,e.target,e.anchor,e.customElement),sf()}fi(c)}var di=class{$destroy(){fr(this,1),this.$destroy=Lt}$on(e,n){let r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{let o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(e){this.$$set&&!mS(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};function ES(t,e="day"){let n=t.clone().startOf(e).format();return`${e}-${n}`}var Ml=ES;function xS(){var t=Ue("style");t.id="svelte-1widvzq-style",t.textContent=".dot.svelte-1widvzq,.hollow.svelte-1widvzq{display:inline-block;height:6px;width:6px;margin:0 1px}.filled.svelte-1widvzq{fill:var(--color-dot)}.active.filled.svelte-1widvzq{fill:var(--text-on-accent)}.hollow.svelte-1widvzq{fill:none;stroke:var(--color-dot)}.active.hollow.svelte-1widvzq{fill:none;stroke:var(--text-on-accent)}",Te(document.head,t)}function CS(t){let e,n,r;return{c(){e=Bo("svg"),n=Bo("circle"),be(n,"cx","3"),be(n,"cy","3"),be(n,"r","2"),be(e,"class",r=""+(Uo(`hollow ${t[0]}`)+" svelte-1widvzq")),be(e,"viewBox","0 0 6 6"),be(e,"xmlns","http://www.w3.org/2000/svg"),gt(e,"active",t[2])},m(o,a){Nt(o,e,a),Te(e,n)},p(o,a){a&1&&r!==(r=""+(Uo(`hollow ${o[0]}`)+" svelte-1widvzq"))&&be(e,"class",r),a&5&&gt(e,"active",o[2])},d(o){o&&Tt(e)}}}function TS(t){let e,n,r;return{c(){e=Bo("svg"),n=Bo("circle"),be(n,"cx","3"),be(n,"cy","3"),be(n,"r","2"),be(e,"class",r=""+(Uo(`dot filled ${t[0]}`)+" svelte-1widvzq")),be(e,"viewBox","0 0 6 6"),be(e,"xmlns","http://www.w3.org/2000/svg"),gt(e,"active",t[2])},m(o,a){Nt(o,e,a),Te(e,n)},p(o,a){a&1&&r!==(r=""+(Uo(`dot filled ${o[0]}`)+" svelte-1widvzq"))&&be(e,"class",r),a&5&&gt(e,"active",o[2])},d(o){o&&Tt(e)}}}function SS(t){let e;function n(a,l){return a[1]?TS:CS}let r=n(t),o=r(t);return{c(){o.c(),e=xl()},m(a,l){o.m(a,l),Nt(a,e,l)},p(a,[l]){r===(r=n(a))&&o?o.p(a,l):(o.d(1),o=r(a),o&&(o.c(),o.m(e.parentNode,e)))},i:Lt,o:Lt,d(a){o.d(a),a&&Tt(e)}}}function DS(t,e,n){let{className:r=""}=e,{isFilled:o}=e,{isActive:a}=e;return t.$$set=l=>{"className"in l&&n(0,r=l.className),"isFilled"in l&&n(1,o=l.isFilled),"isActive"in l&&n(2,a=l.isActive)},[r,o,a]}var lf=class extends di{constructor(e){super();document.getElementById("svelte-1widvzq-style")||xS(),Qi(this,e,DS,SS,ef,{className:0,isFilled:1,isActive:2})}},MS=t=>({}),bv=t=>({metadata:null}),OS=t=>({metadata:t&1}),kv=t=>({metadata:t[3]});function AS(t){let e,n=t[2].default,r=dv(n,t,t[1],bv);return{c(){r&&r.c()},m(o,a){r&&r.m(o,a),e=!0},p(o,a){r&&r.p&&a&2&&hv(r,n,o,o[1],a,MS,bv)},i(o){e||(He(r,o),e=!0)},o(o){rt(r,o),e=!1},d(o){r&&r.d(o)}}}function LS(t){let e,n,r,o={ctx:t,current:null,token:null,hasCatch:!1,pending:IS,then:PS,catch:NS,value:3,blocks:[,,,]};return yv(n=t[0],o),{c(){e=xl(),o.block.c()},m(a,l){Nt(a,e,l),o.block.m(a,o.anchor=l),o.mount=()=>e.parentNode,o.anchor=e,r=!0},p(a,l){if(t=a,o.ctx=t,!(l&1&&n!==(n=t[0])&&yv(n,o))){let c=t.slice();c[3]=o.resolved,o.block.p(c,l)}},i(a){r||(He(o.block),r=!0)},o(a){for(let l=0;l<3;l+=1){let c=o.blocks[l];rt(c)}r=!1},d(a){a&&Tt(e),o.block.d(a),o.token=null,o=null}}}function NS(t){return{c:Lt,m:Lt,p:Lt,i:Lt,o:Lt,d:Lt}}function PS(t){let e,n=t[2].default,r=dv(n,t,t[1],kv);return{c(){r&&r.c()},m(o,a){r&&r.m(o,a),e=!0},p(o,a){r&&r.p&&a&3&&hv(r,n,o,o[1],a,OS,kv)},i(o){e||(He(r,o),e=!0)},o(o){rt(r,o),e=!1},d(o){r&&r.d(o)}}}function IS(t){return{c:Lt,m:Lt,p:Lt,i:Lt,o:Lt,d:Lt}}function RS(t){let e,n,r,o,a=[LS,AS],l=[];function c(f,d){return f[0]?0:1}return e=c(t),n=l[e]=a[e](t),{c(){n.c(),r=xl()},m(f,d){l[e].m(f,d),Nt(f,r,d),o=!0},p(f,[d]){let h=e;e=c(f),e===h?l[e].p(f,d):(Zi(),rt(l[h],1,1,()=>{l[h]=null}),Xi(),n=l[e],n?n.p(f,d):(n=l[e]=a[e](f),n.c()),He(n,1),n.m(r.parentNode,r))},i(f){o||(He(n),o=!0)},o(f){rt(n),o=!1},d(f){l[e].d(f),f&&Tt(r)}}}function FS(t,e,n){let{$$slots:r={},$$scope:o}=e,{metadata:a}=e;return t.$$set=l=>{"metadata"in l&&n(0,a=l.metadata),"$$scope"in l&&n(1,o=l.$$scope)},[a,o,r]}var uf=class extends di{constructor(e){super();Qi(this,e,FS,RS,kl,{metadata:0})}};function YS(){return navigator.appVersion.indexOf("Mac")!==-1}function Ol(t){return YS()?t.metaKey:t.ctrlKey}function GS(...t){return window.moment.weekdaysShort(!0)}function Ev(t){return t.isoWeekday()===6||t.isoWeekday()===7}function WS(t){return t[0].weekday(0)}function US(t,...e){let n=window.moment().locale(),r=[],o,a=t.clone().locale(n).date(1),l=a.weekday(),c=a.clone().subtract(l,"days");for(let f=0;f<42;f++)f%7==0&&(o={days:[],weekNum:c.week()},r.push(o)),o.days.push(c),c=c.clone().add(1,"days");return r}function BS(){var t=Ue("style");t.id="svelte-q3wqg9-style",t.textContent=".day.svelte-q3wqg9{background-color:var(--color-background-day);border-radius:4px;color:var(--color-text-day);cursor:pointer;font-size:0.8em;height:100%;padding:4px;position:relative;text-align:center;transition:background-color 0.1s ease-in, color 0.1s ease-in;vertical-align:baseline}.day.svelte-q3wqg9:hover{background-color:var(--interactive-hover)}.day.active.svelte-q3wqg9:hover{background-color:var(--interactive-accent-hover)}.adjacent-month.svelte-q3wqg9{opacity:0.25}.today.svelte-q3wqg9{color:var(--color-text-today)}.day.svelte-q3wqg9:active,.active.svelte-q3wqg9,.active.today.svelte-q3wqg9{color:var(--text-on-accent);background-color:var(--interactive-accent)}.dot-container.svelte-q3wqg9{display:flex;flex-wrap:wrap;justify-content:center;line-height:6px;min-height:6px}",Te(document.head,t)}function xv(t,e,n){let r=t.slice();return r[11]=e[n],r}function Cv(t){let e,n,r=[t[11]],o={};for(let a=0;a<r.length;a+=1)o=js(o,r[a]);return e=new lf({props:o}),{c(){Yr(e.$$.fragment)},m(a,l){cr(e,a,l),n=!0},p(a,l){let c=l&128?Dl(r,[af(a[11])]):{};e.$set(c)},i(a){n||(He(e.$$.fragment,a),n=!0)},o(a){rt(e.$$.fragment,a),n=!1},d(a){fr(e,a)}}}function jS(t){let e,n=t[0].format("D")+"",r,o,a,l,c,f,d,h=t[7].dots,m=[];for(let x=0;x<h.length;x+=1)m[x]=Cv(xv(t,h,x));let g=x=>rt(m[x],1,1,()=>{m[x]=null}),y=[{class:l=`day ${t[7].classes.join(" ")}`},t[7].dataAttributes||{}],_={};for(let x=0;x<y.length;x+=1)_=js(_,y[x]);return{c(){e=Ue("div"),r=Vi(n),o=Cn(),a=Ue("div");for(let x=0;x<m.length;x+=1)m[x].c();be(a,"class","dot-container svelte-q3wqg9"),mv(e,_),gt(e,"active",t[6]===Ml(t[0],"day")),gt(e,"adjacent-month",!t[0].isSame(t[5],"month")),gt(e,"today",t[0].isSame(t[4],"day")),gt(e,"svelte-q3wqg9",!0)},m(x,k){Nt(x,e,k),Te(e,r),Te(e,o),Te(e,a);for(let E=0;E<m.length;E+=1)m[E].m(a,null);c=!0,f||(d=[Fr(e,"click",function(){ur(t[2]&&t[8])&&(t[2]&&t[8]).apply(this,arguments)}),Fr(e,"contextmenu",function(){ur(t[3]&&t[9])&&(t[3]&&t[9]).apply(this,arguments)}),Fr(e,"pointerover",function(){ur(t[1]&&t[10])&&(t[1]&&t[10]).apply(this,arguments)})],f=!0)},p(x,k){if(t=x,(!c||k&1)&&n!==(n=t[0].format("D")+"")&&Hs(r,n),k&128){h=t[7].dots;let E;for(E=0;E<h.length;E+=1){let T=xv(t,h,E);m[E]?(m[E].p(T,k),He(m[E],1)):(m[E]=Cv(T),m[E].c(),He(m[E],1),m[E].m(a,null))}for(Zi(),E=h.length;E<m.length;E+=1)g(E);Xi()}mv(e,_=Dl(y,[(!c||k&128&&l!==(l=`day ${t[7].classes.join(" ")}`))&&{class:l},k&128&&(t[7].dataAttributes||{})])),gt(e,"active",t[6]===Ml(t[0],"day")),gt(e,"adjacent-month",!t[0].isSame(t[5],"month")),gt(e,"today",t[0].isSame(t[4],"day")),gt(e,"svelte-q3wqg9",!0)},i(x){if(!c){for(let k=0;k<h.length;k+=1)He(m[k]);c=!0}},o(x){m=m.filter(Boolean);for(let k=0;k<m.length;k+=1)rt(m[k]);c=!1},d(x){x&&Tt(e),El(m,x),f=!1,ci(d)}}}function HS(t){let e,n,r;return n=new uf({props:{metadata:t[7],$$slots:{default:[jS,({metadata:o})=>({7:o}),({metadata:o})=>o?128:0]},$$scope:{ctx:t}}}),{c(){e=Ue("td"),Yr(n.$$.fragment)},m(o,a){Nt(o,e,a),cr(n,e,null),r=!0},p(o,[a]){let l={};a&128&&(l.metadata=o[7]),a&16639&&(l.$$scope={dirty:a,ctx:o}),n.$set(l)},i(o){r||(He(n.$$.fragment,o),r=!0)},o(o){rt(n.$$.fragment,o),r=!1},d(o){o&&Tt(e),fr(n)}}}function zS(t,e,n){let{date:r}=e,{metadata:o}=e,{onHover:a}=e,{onClick:l}=e,{onContextMenu:c}=e,{today:f}=e,{displayedMonth:d=null}=e,{selectedId:h=null}=e,m=_=>l(r,Ol(_)),g=_=>c(r,_),y=_=>a(r,_.target,Ol(_));return t.$$set=_=>{"date"in _&&n(0,r=_.date),"metadata"in _&&n(7,o=_.metadata),"onHover"in _&&n(1,a=_.onHover),"onClick"in _&&n(2,l=_.onClick),"onContextMenu"in _&&n(3,c=_.onContextMenu),"today"in _&&n(4,f=_.today),"displayedMonth"in _&&n(5,d=_.displayedMonth),"selectedId"in _&&n(6,h=_.selectedId)},[r,a,l,c,f,d,h,o,m,g,y]}var Tv=class extends di{constructor(e){super();document.getElementById("svelte-q3wqg9-style")||BS(),Qi(this,e,zS,HS,kl,{date:0,metadata:7,onHover:1,onClick:2,onContextMenu:3,today:4,displayedMonth:5,selectedId:6})}};function qS(){var t=Ue("style");t.id="svelte-156w7na-style",t.textContent=".arrow.svelte-156w7na.svelte-156w7na{align-items:center;cursor:pointer;display:flex;justify-content:center;width:24px}.arrow.is-mobile.svelte-156w7na.svelte-156w7na{width:32px}.right.svelte-156w7na.svelte-156w7na{transform:rotate(180deg)}.arrow.svelte-156w7na svg.svelte-156w7na{color:var(--color-arrow);height:16px;width:16px}",Te(document.head,t)}function VS(t){let e,n,r,o,a;return{c(){e=Ue("div"),n=Bo("svg"),r=Bo("path"),be(r,"fill","currentColor"),be(r,"d","M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"),be(n,"focusable","false"),be(n,"role","img"),be(n,"xmlns","http://www.w3.org/2000/svg"),be(n,"viewBox","0 0 320 512"),be(n,"class","svelte-156w7na"),be(e,"class","arrow svelte-156w7na"),be(e,"aria-label",t[1]),gt(e,"is-mobile",t[3]),gt(e,"right",t[2]==="right")},m(l,c){Nt(l,e,c),Te(e,n),Te(n,r),o||(a=Fr(e,"click",function(){ur(t[0])&&t[0].apply(this,arguments)}),o=!0)},p(l,[c]){t=l,c&2&&be(e,"aria-label",t[1]),c&4&&gt(e,"right",t[2]==="right")},i:Lt,o:Lt,d(l){l&&Tt(e),o=!1,a()}}}function KS(t,e,n){let{onClick:r}=e,{tooltip:o}=e,{direction:a}=e,l=window.app.isMobile;return t.$$set=c=>{"onClick"in c&&n(0,r=c.onClick),"tooltip"in c&&n(1,o=c.tooltip),"direction"in c&&n(2,a=c.direction)},[r,o,a,l]}var cf=class extends di{constructor(e){super();document.getElementById("svelte-156w7na-style")||qS(),Qi(this,e,KS,VS,ef,{onClick:0,tooltip:1,direction:2})}};function ZS(){var t=Ue("style");t.id="svelte-1vwr9dd-style",t.textContent=".nav.svelte-1vwr9dd.svelte-1vwr9dd{align-items:center;display:flex;margin:0.6em 0 1em;padding:0 8px;width:100%}.nav.is-mobile.svelte-1vwr9dd.svelte-1vwr9dd{padding:0}.title.svelte-1vwr9dd.svelte-1vwr9dd{color:var(--color-text-title);font-size:1.5em;margin:0}.is-mobile.svelte-1vwr9dd .title.svelte-1vwr9dd{font-size:1.3em}.month.svelte-1vwr9dd.svelte-1vwr9dd{font-weight:500;text-transform:capitalize}.year.svelte-1vwr9dd.svelte-1vwr9dd{color:var(--interactive-accent)}.right-nav.svelte-1vwr9dd.svelte-1vwr9dd{display:flex;justify-content:center;margin-left:auto}.reset-button.svelte-1vwr9dd.svelte-1vwr9dd{cursor:pointer;border-radius:4px;color:var(--text-muted);font-size:0.7em;font-weight:600;letter-spacing:1px;margin:0 4px;padding:0px 4px;text-transform:uppercase}.is-mobile.svelte-1vwr9dd .reset-button.svelte-1vwr9dd{display:none}",Te(document.head,t)}function XS(t){let e,n,r,o=t[0].format("MMM")+"",a,l,c,f=t[0].format("YYYY")+"",d,h,m,g,y,_,x,k,E,T,D;return g=new cf({props:{direction:"left",onClick:t[3],tooltip:"Previous Month"}}),k=new cf({props:{direction:"right",onClick:t[2],tooltip:"Next Month"}}),{c(){e=Ue("div"),n=Ue("h3"),r=Ue("span"),a=Vi(o),l=Cn(),c=Ue("span"),d=Vi(f),h=Cn(),m=Ue("div"),Yr(g.$$.fragment),y=Cn(),_=Ue("div"),_.textContent=`${t[4]}`,x=Cn(),Yr(k.$$.fragment),be(r,"class","month svelte-1vwr9dd"),be(c,"class","year svelte-1vwr9dd"),be(n,"class","title svelte-1vwr9dd"),be(_,"class","reset-button svelte-1vwr9dd"),be(m,"class","right-nav svelte-1vwr9dd"),be(e,"class","nav svelte-1vwr9dd"),gt(e,"is-mobile",t[5])},m(P,M){Nt(P,e,M),Te(e,n),Te(n,r),Te(r,a),Te(n,l),Te(n,c),Te(c,d),Te(e,h),Te(e,m),cr(g,m,null),Te(m,y),Te(m,_),Te(m,x),cr(k,m,null),E=!0,T||(D=[Fr(n,"click",function(){ur(t[1])&&t[1].apply(this,arguments)}),Fr(_,"click",function(){ur(t[1])&&t[1].apply(this,arguments)})],T=!0)},p(P,[M]){t=P,(!E||M&1)&&o!==(o=t[0].format("MMM")+"")&&Hs(a,o),(!E||M&1)&&f!==(f=t[0].format("YYYY")+"")&&Hs(d,f);let R={};M&8&&(R.onClick=t[3]),g.$set(R);let Q={};M&4&&(Q.onClick=t[2]),k.$set(Q)},i(P){E||(He(g.$$.fragment,P),He(k.$$.fragment,P),E=!0)},o(P){rt(g.$$.fragment,P),rt(k.$$.fragment,P),E=!1},d(P){P&&Tt(e),fr(g),fr(k),T=!1,ci(D)}}}function QS(t,e,n){let{displayedMonth:r}=e,{today:o}=e,{resetDisplayedMonth:a}=e,{incrementDisplayedMonth:l}=e,{decrementDisplayedMonth:c}=e,f=o.calendar().split(/\d|\s/)[0],d=window.app.isMobile;return t.$$set=h=>{"displayedMonth"in h&&n(0,r=h.displayedMonth),"today"in h&&n(6,o=h.today),"resetDisplayedMonth"in h&&n(1,a=h.resetDisplayedMonth),"incrementDisplayedMonth"in h&&n(2,l=h.incrementDisplayedMonth),"decrementDisplayedMonth"in h&&n(3,c=h.decrementDisplayedMonth)},[r,a,l,c,f,d,o]}var Sv=class extends di{constructor(e){super();document.getElementById("svelte-1vwr9dd-style")||ZS(),Qi(this,e,QS,XS,ef,{displayedMonth:0,today:6,resetDisplayedMonth:1,incrementDisplayedMonth:2,decrementDisplayedMonth:3})}};function JS(){var t=Ue("style");t.id="svelte-egt0yd-style",t.textContent="td.svelte-egt0yd{border-right:1px solid var(--background-modifier-border)}.week-num.svelte-egt0yd{background-color:var(--color-background-weeknum);border-radius:4px;color:var(--color-text-weeknum);cursor:pointer;font-size:0.65em;height:100%;padding:4px;text-align:center;transition:background-color 0.1s ease-in, color 0.1s ease-in;vertical-align:baseline}.week-num.svelte-egt0yd:hover{background-color:var(--interactive-hover)}.week-num.active.svelte-egt0yd:hover{background-color:var(--interactive-accent-hover)}.active.svelte-egt0yd{color:var(--text-on-accent);background-color:var(--interactive-accent)}.dot-container.svelte-egt0yd{display:flex;flex-wrap:wrap;justify-content:center;line-height:6px;min-height:6px}",Te(document.head,t)}function Dv(t,e,n){let r=t.slice();return r[11]=e[n],r}function Mv(t){let e,n,r=[t[11]],o={};for(let a=0;a<r.length;a+=1)o=js(o,r[a]);return e=new lf({props:o}),{c(){Yr(e.$$.fragment)},m(a,l){cr(e,a,l),n=!0},p(a,l){let c=l&64?Dl(r,[af(a[11])]):{};e.$set(c)},i(a){n||(He(e.$$.fragment,a),n=!0)},o(a){rt(e.$$.fragment,a),n=!1},d(a){fr(e,a)}}}function $S(t){let e,n,r,o,a,l,c,f,d=t[6].dots,h=[];for(let g=0;g<d.length;g+=1)h[g]=Mv(Dv(t,d,g));let m=g=>rt(h[g],1,1,()=>{h[g]=null});return{c(){e=Ue("div"),n=Vi(t[0]),r=Cn(),o=Ue("div");for(let g=0;g<h.length;g+=1)h[g].c();be(o,"class","dot-container svelte-egt0yd"),be(e,"class",a=""+(Uo(`week-num ${t[6].classes.join(" ")}`)+" svelte-egt0yd")),gt(e,"active",t[5]===Ml(t[1][0],"week"))},m(g,y){Nt(g,e,y),Te(e,n),Te(e,r),Te(e,o);for(let _=0;_<h.length;_+=1)h[_].m(o,null);l=!0,c||(f=[Fr(e,"click",function(){ur(t[3]&&t[8])&&(t[3]&&t[8]).apply(this,arguments)}),Fr(e,"contextmenu",function(){ur(t[4]&&t[9])&&(t[4]&&t[9]).apply(this,arguments)}),Fr(e,"pointerover",function(){ur(t[2]&&t[10])&&(t[2]&&t[10]).apply(this,arguments)})],c=!0)},p(g,y){if(t=g,(!l||y&1)&&Hs(n,t[0]),y&64){d=t[6].dots;let _;for(_=0;_<d.length;_+=1){let x=Dv(t,d,_);h[_]?(h[_].p(x,y),He(h[_],1)):(h[_]=Mv(x),h[_].c(),He(h[_],1),h[_].m(o,null))}for(Zi(),_=d.length;_<h.length;_+=1)m(_);Xi()}(!l||y&64&&a!==(a=""+(Uo(`week-num ${t[6].classes.join(" ")}`)+" svelte-egt0yd")))&&be(e,"class",a),y&98&&gt(e,"active",t[5]===Ml(t[1][0],"week"))},i(g){if(!l){for(let y=0;y<d.length;y+=1)He(h[y]);l=!0}},o(g){h=h.filter(Boolean);for(let y=0;y<h.length;y+=1)rt(h[y]);l=!1},d(g){g&&Tt(e),El(h,g),c=!1,ci(f)}}}function eD(t){let e,n,r;return n=new uf({props:{metadata:t[6],$$slots:{default:[$S,({metadata:o})=>({6:o}),({metadata:o})=>o?64:0]},$$scope:{ctx:t}}}),{c(){e=Ue("td"),Yr(n.$$.fragment),be(e,"class","svelte-egt0yd")},m(o,a){Nt(o,e,a),cr(n,e,null),r=!0},p(o,[a]){let l={};a&64&&(l.metadata=o[6]),a&16639&&(l.$$scope={dirty:a,ctx:o}),n.$set(l)},i(o){r||(He(n.$$.fragment,o),r=!0)},o(o){rt(n.$$.fragment,o),r=!1},d(o){o&&Tt(e),fr(n)}}}function tD(t,e,n){let{weekNum:r}=e,{days:o}=e,{metadata:a}=e,{onHover:l}=e,{onClick:c}=e,{onContextMenu:f}=e,{selectedId:d=null}=e,h,m=_=>c(h,Ol(_)),g=_=>f(o[0],_),y=_=>l(h,_.target,Ol(_));return t.$$set=_=>{"weekNum"in _&&n(0,r=_.weekNum),"days"in _&&n(1,o=_.days),"metadata"in _&&n(6,a=_.metadata),"onHover"in _&&n(2,l=_.onHover),"onClick"in _&&n(3,c=_.onClick),"onContextMenu"in _&&n(4,f=_.onContextMenu),"selectedId"in _&&n(5,d=_.selectedId)},t.$$.update=()=>{t.$$.dirty&2&&n(7,h=WS(o))},[r,o,l,c,f,d,a,h,m,g,y]}var Ov=class extends di{constructor(e){super();document.getElementById("svelte-egt0yd-style")||JS(),Qi(this,e,tD,eD,kl,{weekNum:0,days:1,metadata:6,onHover:2,onClick:3,onContextMenu:4,selectedId:5})}};function Av(t){return G(this,null,function*(){let e={dots:[],classes:[],dataAttributes:{}};return(yield Promise.all(t)).reduce((r,o)=>({classes:[...r.classes,...o.classes||[]],dataAttributes:Object.assign(r.dataAttributes,o.dataAttributes),dots:[...r.dots,...o.dots||[]]}),e)})}function Lv(t,e,...n){return Av(t.map(r=>r.getDailyMetadata(e)))}function Nv(t,e,...n){return Av(t.map(r=>r.getWeeklyMetadata(e)))}function nD(){var t=Ue("style");t.id="svelte-pcimu8-style",t.textContent=".container.svelte-pcimu8{--color-background-heading:transparent;--color-background-day:transparent;--color-background-weeknum:transparent;--color-background-weekend:transparent;--color-dot:var(--text-muted);--color-arrow:var(--text-muted);--color-button:var(--text-muted);--color-text-title:var(--text-normal);--color-text-heading:var(--text-muted);--color-text-day:var(--text-normal);--color-text-today:var(--interactive-accent);--color-text-weeknum:var(--text-muted)}.container.svelte-pcimu8{padding:0 8px}.container.is-mobile.svelte-pcimu8{padding:0}th.svelte-pcimu8{text-align:center}.weekend.svelte-pcimu8{background-color:var(--color-background-weekend)}.calendar.svelte-pcimu8{border-collapse:collapse;width:100%}th.svelte-pcimu8{background-color:var(--color-background-heading);color:var(--color-text-heading);font-size:0.6em;letter-spacing:1px;padding:4px;text-transform:uppercase}",Te(document.head,t)}function Pv(t,e,n){let r=t.slice();return r[18]=e[n],r}function Iv(t,e,n){let r=t.slice();return r[21]=e[n],r}function Rv(t,e,n){let r=t.slice();return r[24]=e[n],r}function Fv(t,e,n){let r=t.slice();return r[27]=e[n],r}function Yv(t){let e;return{c(){e=Ue("col")},m(n,r){Nt(n,e,r)},d(n){n&&Tt(e)}}}function Gv(t){let e;return{c(){e=Ue("col"),be(e,"class","svelte-pcimu8"),gt(e,"weekend",Ev(t[27]))},m(n,r){Nt(n,e,r)},p(n,r){r&16384&&gt(e,"weekend",Ev(n[27]))},d(n){n&&Tt(e)}}}function Wv(t){let e;return{c(){e=Ue("th"),e.textContent="W",be(e,"class","svelte-pcimu8")},m(n,r){Nt(n,e,r)},d(n){n&&Tt(e)}}}function Uv(t){let e,n=t[24]+"",r;return{c(){e=Ue("th"),r=Vi(n),be(e,"class","svelte-pcimu8")},m(o,a){Nt(o,e,a),Te(e,r)},p(o,a){a&32768&&n!==(n=o[24]+"")&&Hs(r,n)},d(o){o&&Tt(e)}}}function Bv(t){let e,n,r=[t[18],{metadata:Nv(t[8],t[18].days[0],t[10])},{onClick:t[7]},{onContextMenu:t[5]},{onHover:t[3]},{selectedId:t[9]}],o={};for(let a=0;a<r.length;a+=1)o=js(o,r[a]);return e=new Ov({props:o}),{c(){Yr(e.$$.fragment)},m(a,l){cr(e,a,l),n=!0},p(a,l){let c=l&18344?Dl(r,[l&16384&&af(a[18]),l&17664&&{metadata:Nv(a[8],a[18].days[0],a[10])},l&128&&{onClick:a[7]},l&32&&{onContextMenu:a[5]},l&8&&{onHover:a[3]},l&512&&{selectedId:a[9]}]):{};e.$set(c)},i(a){n||(He(e.$$.fragment,a),n=!0)},o(a){rt(e.$$.fragment,a),n=!1},d(a){fr(e,a)}}}function jv(t,e){let n,r,o;return r=new Tv({props:{date:e[21],today:e[10],displayedMonth:e[0],onClick:e[6],onContextMenu:e[4],onHover:e[2],metadata:Lv(e[8],e[21],e[10]),selectedId:e[9]}}),{key:t,first:null,c(){n=xl(),Yr(r.$$.fragment),this.first=n},m(a,l){Nt(a,n,l),cr(r,a,l),o=!0},p(a,l){e=a;let c={};l&16384&&(c.date=e[21]),l&1024&&(c.today=e[10]),l&1&&(c.displayedMonth=e[0]),l&64&&(c.onClick=e[6]),l&16&&(c.onContextMenu=e[4]),l&4&&(c.onHover=e[2]),l&17664&&(c.metadata=Lv(e[8],e[21],e[10])),l&512&&(c.selectedId=e[9]),r.$set(c)},i(a){o||(He(r.$$.fragment,a),o=!0)},o(a){rt(r.$$.fragment,a),o=!1},d(a){a&&Tt(n),fr(r,a)}}}function Hv(t,e){let n,r,o=[],a=new Map,l,c,f=e[1]&&Bv(e),d=e[18].days,h=m=>m[21].format();for(let m=0;m<d.length;m+=1){let g=Iv(e,d,m),y=h(g);a.set(y,o[m]=jv(y,g))}return{key:t,first:null,c(){n=Ue("tr"),f&&f.c(),r=Cn();for(let m=0;m<o.length;m+=1)o[m].c();l=Cn(),this.first=n},m(m,g){Nt(m,n,g),f&&f.m(n,null),Te(n,r);for(let y=0;y<o.length;y+=1)o[y].m(n,null);Te(n,l),c=!0},p(m,g){e=m,e[1]?f?(f.p(e,g),g&2&&He(f,1)):(f=Bv(e),f.c(),He(f,1),f.m(n,r)):f&&(Zi(),rt(f,1,1,()=>{f=null}),Xi()),g&18261&&(d=e[18].days,Zi(),o=wv(o,g,h,1,e,d,a,n,_v,jv,l,Iv),Xi())},i(m){if(!c){He(f);for(let g=0;g<d.length;g+=1)He(o[g]);c=!0}},o(m){rt(f);for(let g=0;g<o.length;g+=1)rt(o[g]);c=!1},d(m){m&&Tt(n),f&&f.d();for(let g=0;g<o.length;g+=1)o[g].d()}}}function rD(t){let e,n,r,o,a,l,c,f,d,h,m,g,y=[],_=new Map,x;n=new Sv({props:{today:t[10],displayedMonth:t[0],incrementDisplayedMonth:t[11],decrementDisplayedMonth:t[12],resetDisplayedMonth:t[13]}});let k=t[1]&&Yv(),E=t[14][1].days,T=[];for(let L=0;L<E.length;L+=1)T[L]=Gv(Fv(t,E,L));let D=t[1]&&Wv(),P=t[15],M=[];for(let L=0;L<P.length;L+=1)M[L]=Uv(Rv(t,P,L));let R=t[14],Q=L=>L[18].weekNum;for(let L=0;L<R.length;L+=1){let j=Pv(t,R,L),ee=Q(j);_.set(ee,y[L]=Hv(ee,j))}return{c(){e=Ue("div"),Yr(n.$$.fragment),r=Cn(),o=Ue("table"),a=Ue("colgroup"),k&&k.c(),l=Cn();for(let L=0;L<T.length;L+=1)T[L].c();c=Cn(),f=Ue("thead"),d=Ue("tr"),D&&D.c(),h=Cn();for(let L=0;L<M.length;L+=1)M[L].c();m=Cn(),g=Ue("tbody");for(let L=0;L<y.length;L+=1)y[L].c();be(o,"class","calendar svelte-pcimu8"),be(e,"id","calendar-container"),be(e,"class","container svelte-pcimu8"),gt(e,"is-mobile",t[16])},m(L,j){Nt(L,e,j),cr(n,e,null),Te(e,r),Te(e,o),Te(o,a),k&&k.m(a,null),Te(a,l);for(let ee=0;ee<T.length;ee+=1)T[ee].m(a,null);Te(o,c),Te(o,f),Te(f,d),D&&D.m(d,null),Te(d,h);for(let ee=0;ee<M.length;ee+=1)M[ee].m(d,null);Te(o,m),Te(o,g);for(let ee=0;ee<y.length;ee+=1)y[ee].m(g,null);x=!0},p(L,[j]){let ee={};if(j&1024&&(ee.today=L[10]),j&1&&(ee.displayedMonth=L[0]),n.$set(ee),L[1]?k||(k=Yv(),k.c(),k.m(a,l)):k&&(k.d(1),k=null),j&16384){E=L[14][1].days;let K;for(K=0;K<E.length;K+=1){let ae=Fv(L,E,K);T[K]?T[K].p(ae,j):(T[K]=Gv(ae),T[K].c(),T[K].m(a,null))}for(;K<T.length;K+=1)T[K].d(1);T.length=E.length}if(L[1]?D||(D=Wv(),D.c(),D.m(d,h)):D&&(D.d(1),D=null),j&32768){P=L[15];let K;for(K=0;K<P.length;K+=1){let ae=Rv(L,P,K);M[K]?M[K].p(ae,j):(M[K]=Uv(ae),M[K].c(),M[K].m(d,null))}for(;K<M.length;K+=1)M[K].d(1);M.length=P.length}j&18431&&(R=L[14],Zi(),y=wv(y,j,Q,1,L,R,_,g,_v,Hv,null,Pv),Xi())},i(L){if(!x){He(n.$$.fragment,L);for(let j=0;j<R.length;j+=1)He(y[j]);x=!0}},o(L){rt(n.$$.fragment,L);for(let j=0;j<y.length;j+=1)rt(y[j]);x=!1},d(L){L&&Tt(e),fr(n),k&&k.d(),El(T,L),D&&D.d(),El(M,L);for(let j=0;j<y.length;j+=1)y[j].d()}}}function iD(t,e,n){let{localeData:r}=e,{showWeekNums:o=!1}=e,{onHoverDay:a}=e,{onHoverWeek:l}=e,{onContextMenuDay:c}=e,{onContextMenuWeek:f}=e,{onClickDay:d}=e,{onClickWeek:h}=e,{sources:m=[]}=e,{selectedId:g}=e,{today:y=window.moment()}=e,{displayedMonth:_=y}=e,x,k,E=window.app.isMobile;function T(){n(0,_=_.clone().add(1,"month"))}function D(){n(0,_=_.clone().subtract(1,"month"))}function P(){n(0,_=y.clone())}return t.$$set=M=>{"localeData"in M&&n(17,r=M.localeData),"showWeekNums"in M&&n(1,o=M.showWeekNums),"onHoverDay"in M&&n(2,a=M.onHoverDay),"onHoverWeek"in M&&n(3,l=M.onHoverWeek),"onContextMenuDay"in M&&n(4,c=M.onContextMenuDay),"onContextMenuWeek"in M&&n(5,f=M.onContextMenuWeek),"onClickDay"in M&&n(6,d=M.onClickDay),"onClickWeek"in M&&n(7,h=M.onClickWeek),"sources"in M&&n(8,m=M.sources),"selectedId"in M&&n(9,g=M.selectedId),"today"in M&&n(10,y=M.today),"displayedMonth"in M&&n(0,_=M.displayedMonth)},t.$$.update=()=>{t.$$.dirty&131073&&n(14,x=US(_,r)),t.$$.dirty&132096&&n(15,k=GS(y,r))},[_,o,a,l,c,f,d,h,m,g,y,T,D,P,x,k,E,r]}var Al=class extends di{constructor(e){super();document.getElementById("svelte-pcimu8-style")||nD(),Qi(this,e,iD,rD,kl,{localeData:17,showWeekNums:1,onHoverDay:2,onHoverWeek:3,onContextMenuDay:4,onContextMenuWeek:5,onClickDay:6,onClickWeek:7,sources:8,selectedId:9,today:10,displayedMonth:0,incrementDisplayedMonth:11,decrementDisplayedMonth:12,resetDisplayedMonth:13})}get incrementDisplayedMonth(){return this.$$.ctx[11]}get decrementDisplayedMonth(){return this.$$.ctx[12]}get resetDisplayedMonth(){return this.$$.ctx[13]}};var Pl=ye(Mr());var ry=ye(el()),Ks=ye(require("obsidian"));var zv=ye(require("obsidian"));var Ji="google-calendar-view-day",qs=class extends zv.ItemView{constructor(e,n=window.moment()){super(e);this.setDate=e=>{this.startDate=e,this.onClose(),this.onOpen()};this.startDate=n}getViewType(){return Ji}getDisplayText(){return"Timeline View"}getIcon(){return"calendar-with-checkmark"}onOpen(){return G(this,null,function*(){this.timeline=new wl({target:this.contentEl,props:{navigation:!0,startDate:this.startDate}})})}onClose(){return G(this,null,function*(){this.timeline.$destroy()})}};var Qv=ye(require("obsidian"));function oD(t){fn(t,"svelte-1f1t9un",'.scheduleContainer.svelte-1f1t9un{padding:10px}.scheduleContent.svelte-1f1t9un{display:flex;flex-direction:column;align-items:flex-start;white-space:nowrap}.dayContainer.svelte-1f1t9un{display:flex;flex-direction:row;align-items:flex-start;justify-content:flex-start;border-bottom:1px solid white;margin:2px 0px;padding:2px 0px;flex-wrap:wrap}.dateDisplay.svelte-1f1t9un{display:flex;flex-direction:row;align-items:flex-end;width:105px;min-width:105px}.dayNumber.svelte-1f1t9un{border-radius:50%;-moz-border-radius:50%;-webkit-border-radius:50%;display:inline-block;font-weight:bold;line-height:40px;text-align:center;width:40px;min-width:40px;cursor:pointer}.today.svelte-1f1t9un{color:white;background:#4285f4;text-decoration:none}.dayText.svelte-1f1t9un{font-size:15px}.dayEvents.svelte-1f1t9un{display:flex;flex-direction:column;flex:1}.dayEvent.svelte-1f1t9un{display:flex;flex:1;flex-direction:row;align-items:center;padding:5px;border-radius:10px;cursor:pointer;flex-wrap:wrap}.dayEvent.svelte-1f1t9un:hover{background-color:rgba(128, 128, 128, 0.129)}.circleTime.svelte-1f1t9un{display:flex;flex-direction:row;width:220px;min-width:220px}.recurringCircleContainer.svelte-1f1t9un,.circleContainer.svelte-1f1t9un{position:relative;display:flex;width:30px;min-width:30px;height:30px;align-items:center;justify-content:center}.recurringCircleContainer.svelte-1f1t9un::after{content:"\u21BA";position:absolute;width:30px;height:30px;text-align:center;line-height:30px;font-size:30px;color:rgb(164, 164, 164);white-space:nowrap}.circle.svelte-1f1t9un{width:10px;min-width:10px;height:10px;border-radius:50%}.timeContainer.svelte-1f1t9un{width:150px;min-width:150px}.eventTitleContainer.svelte-1f1t9un{white-space:nowrap}')}function qv(t,e,n){let r=t.slice();return r[15]=e[n][0],r[1]=e[n][1],r}function Vv(t,e,n){let r=t.slice();return r[18]=e[n],r}function sD(t){let e,n=[...t[2]],r=[];for(let o=0;o<n.length;o+=1)r[o]=Zv(qv(t,n,o));return{c(){e=Y("div");for(let o=0;o<r.length;o+=1)r[o].c();N(e,"class","scheduleContent svelte-1f1t9un")},m(o,a){V(o,e,a);for(let l=0;l<r.length;l+=1)r[l].m(e,null)},p(o,a){if(a&124){n=[...o[2]];let l;for(l=0;l<n.length;l+=1){let c=qv(o,n,l);r[l]?r[l].p(c,a):(r[l]=Zv(c),r[l].c(),r[l].m(e,null))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},d(o){o&&q(e),Ft(r,o)}}}function aD(t){let e;return{c(){e=Y("span"),e.textContent="LOADING"},m(n,r){V(n,e,r)},p:Le,d(n){n&&q(e)}}}function Kv(t){let e,n,r,o,a,l,c,f,d=t[3](t[18])+"",h,m,g,y,_=t[18].summary+"",x,k,E,T;function D(...P){return t[13](t[18],...P)}return{c(){e=Y("div"),n=Y("div"),r=Y("div"),o=Y("div"),l=te(),c=Y("div"),f=Y("span"),h=et(d),m=te(),g=Y("div"),y=Y("span"),x=et(_),k=te(),N(o,"class","circle svelte-1f1t9un"),de(o,"background",ds(t[18]),!1),N(r,"class",a=""+(Co(t[18].recurringEventId?"recurringCircleContainer":"circleContainer")+" svelte-1f1t9un")),N(c,"class","timeContainer svelte-1f1t9un"),N(n,"class","circleTime svelte-1f1t9un"),N(g,"class","eventTitleContainer svelte-1f1t9un"),N(e,"class","dayEvent svelte-1f1t9un")},m(P,M){V(P,e,M),I(e,n),I(n,r),I(r,o),I(n,l),I(n,c),I(c,f),I(f,h),I(e,m),I(e,g),I(g,y),I(y,x),I(e,k),E||(T=fe(e,"click",D),E=!0)},p(P,M){t=P},d(P){P&&q(e),E=!1,T()}}}function Zv(t){let e,n,r,o,a=t[15].slice(0,2)+"",l,c,f,d,h=t[15].slice(2)+"",m,g,y,_,x,k;function E(){return t[12](t[1])}let T=t[1],D=[];for(let P=0;P<T.length;P+=1)D[P]=Kv(Vv(t,T,P));return{c(){e=Y("div"),n=Y("div"),r=Y("div"),o=Y("span"),l=et(a),f=te(),d=Y("span"),m=et(h),g=te(),y=Y("div");for(let P=0;P<D.length;P+=1)D[P].c();_=te(),N(r,"class",c=""+(Co(t[6](t[1][0])?"dayNumber today":"dayNumber")+" svelte-1f1t9un")),N(d,"class","dayText svelte-1f1t9un"),N(n,"class","dateDisplay svelte-1f1t9un"),N(y,"class","dayEvents svelte-1f1t9un"),N(e,"class","dayContainer svelte-1f1t9un")},m(P,M){V(P,e,M),I(e,n),I(n,r),I(r,o),I(o,l),I(n,f),I(n,d),I(d,m),I(e,g),I(e,y);for(let R=0;R<D.length;R+=1)D[R].m(y,null);I(e,_),x||(k=fe(r,"click",E),x=!0)},p(P,M){if(t=P,M&28){T=t[1];let R;for(R=0;R<T.length;R+=1){let Q=Vv(t,T,R);D[R]?D[R].p(Q,M):(D[R]=Kv(Q),D[R].c(),D[R].m(y,null))}for(;R<D.length;R+=1)D[R].d(1);D.length=T.length}},d(P){P&&q(e),Ft(D,P),x=!1,k()}}}function lD(t){let e;function n(a,l){return a[0]?aD:sD}let r=n(t,-1),o=r(t);return{c(){e=Y("div"),o.c(),N(e,"class","scheduleContainer svelte-1f1t9un")},m(a,l){V(a,e,l),o.m(e,null)},p(a,[l]){r===(r=n(a,l))&&o?o.p(a,l):(o.d(1),o=r(a),o&&(o.c(),o.m(e,null)))},i:Le,o:Le,d(a){a&&q(e),o.d()}}}function uD(t,e,n){let{timeSpan:r=6}=e,{date:o=window.moment()}=e,{include:a}=e,{exclude:l}=e,c,f=new Map,d=!1,h=[],m=()=>Ke(void 0,void 0,void 0,function*(){let T=yield Ve({startDate:o,endDate:o.clone().add(r,"day"),include:a,exclude:l});JSON.stringify(T)!=JSON.stringify(h)&&(f.clear(),n(1,h=T),h.forEach(D=>{let P=D.start.date?window.moment(D.start.date).format("DD MMM, ddd"):window.moment(D.start.dateTime).format("DD MMM, ddd");f.has(P)?f.get(P).push(D):f.set(P,[D])}),n(0,d=!1))}),g=T=>{if(T.start.date)return"All day";{let D=window.moment(T.start.dateTime).format("hh:mma"),P=window.moment(T.end.dateTime).format("hh:mma");return`${D}-${P}`}},y=(T,D)=>{D.shiftKey?window.open(T.htmlLink):new dn(T,()=>{kn(),n(7,o),n(11,c)}).open()},_=T=>Ke(void 0,void 0,void 0,function*(){let D=window.moment(T.start.date||T.start.dateTime),P=yield Ve({startDate:D});new Qn(P,"details",D,!1,()=>{kn(),n(7,o),n(11,c)}).open()}),x=T=>{let D=window.moment(T.start.date||T.start.dateTime);return window.moment().local().isSame(D,"day")};Yi(()=>{clearInterval(c)});let k=T=>_(T[0]),E=(T,D)=>y(T,D);return t.$$set=T=>{"timeSpan"in T&&n(8,r=T.timeSpan),"date"in T&&n(7,o=T.date),"include"in T&&n(9,a=T.include),"exclude"in T&&n(10,l=T.exclude)},t.$$.update=()=>{if(t.$$.dirty&2176){e:n(7,o),n(11,c),c&&clearInterval(c),n(0,d=!0),n(11,c=setInterval(m,5e3)),m()}},[d,h,f,g,y,_,x,o,r,a,l,c,k,E]}var Xv=class extends Gt{constructor(e){super();zt(this,e,uD,lD,Ht,{timeSpan:8,date:7,include:9,exclude:10},oD)}},Ll=Xv;var pi="google-calendar-view-schedule",jo=class extends Qv.ItemView{constructor(e,n=window.moment()){super(e);this.setDate=e=>{this.startDate=e,this.onClose(),this.onOpen()};this.startDate=n}getViewType(){return pi}getDisplayText(){return"Schedule View"}getIcon(){return"calendar-with-checkmark"}onOpen(){return G(this,null,function*(){this.calendar=new Ll({target:this.contentEl,props:{date:this.startDate}})})}onClose(){return G(this,null,function*(){this.calendar.$destroy()})}};var ny=ye(require("obsidian"));function cD(t){fn(t,"svelte-wwuc5n",".googleWeekContainer.svelte-wwuc5n{position:relative;display:flex;flex-direction:row;overflow-x:scroll;overflow-y:hidden;height:100%}")}function Jv(t,e,n){let r=t.slice();return r[18]=e[n],r[20]=n,r}function $v(t){let e,n,r,o,a,l=t[6].format("YYYY-MM-DD")+"",c,f,d,h,m,g,y,_,x,k,E,T,D,P;return{c(){e=Y("div"),n=Y("button"),n.textContent="+",r=te(),o=Y("h3"),a=et("Google Calendar "),c=et(l),f=te(),d=Y("div"),h=Y("button"),h.textContent="<<",m=te(),g=Y("button"),g.textContent="<",y=te(),_=Y("button"),_.textContent="Today",x=te(),k=Y("button"),k.textContent=">",E=te(),T=Y("button"),T.textContent=">>",N(n,"aria-label","Create Event"),N(e,"class","titleContainer"),N(h,"class","fixedSizeButton"),N(h,"aria-label","Back 1 week"),N(g,"class","fixedSizeButton"),N(g,"aria-label","Back 1 day"),N(_,"class","fixedSizeButton"),N(_,"aria-label","Jump to today"),N(k,"class","fixedSizeButton"),N(k,"aria-label","Forward 1 day"),N(T,"class","fixedSizeButton"),N(T,"aria-label","Forward 1 week"),N(d,"class","navigationContainer")},m(M,R){V(M,e,R),I(e,n),I(e,r),I(e,o),I(o,a),I(o,c),V(M,f,R),V(M,d,R),I(d,h),I(d,m),I(d,g),I(d,y),I(d,_),I(d,x),I(d,k),I(d,E),I(d,T),D||(P=[fe(n,"click",t[12]),fe(h,"click",t[7]),fe(g,"click",t[8]),fe(_,"click",t[9]),fe(k,"click",t[11]),fe(T,"click",t[10])],D=!0)},p(M,R){R&64&&l!==(l=M[6].format("YYYY-MM-DD")+"")&&en(c,l)},d(M){M&&q(e),M&&q(f),M&&q(d),D=!1,At(P)}}}function fD(t){let e,n;return e=new Bs({props:{date:t[18],height:t[0],width:t[1],include:t[3],exclude:t[4],hourRange:t[5],showTimeDisplay:!1}}),{c(){oi(e.$$.fragment)},m(r,o){Nr(e,r,o),n=!0},p(r,o){let a={};o&64&&(a.date=r[18]),o&1&&(a.height=r[0]),o&2&&(a.width=r[1]),o&8&&(a.include=r[3]),o&16&&(a.exclude=r[4]),o&32&&(a.hourRange=r[5]),e.$set(a)},i(r){n||(Ct(e.$$.fragment,r),n=!0)},o(r){Yt(e.$$.fragment,r),n=!1},d(r){ir(e,r)}}}function dD(t){let e,n;return e=new Bs({props:{date:t[18],height:t[0],width:t[1],include:t[3],exclude:t[4],hourRange:t[5]}}),{c(){oi(e.$$.fragment)},m(r,o){Nr(e,r,o),n=!0},p(r,o){let a={};o&64&&(a.date=r[18]),o&1&&(a.height=r[0]),o&2&&(a.width=r[1]),o&8&&(a.include=r[3]),o&16&&(a.exclude=r[4]),o&32&&(a.hourRange=r[5]),e.$set(a)},i(r){n||(Ct(e.$$.fragment,r),n=!0)},o(r){Yt(e.$$.fragment,r),n=!1},d(r){ir(e,r)}}}function ey(t){let e,n,r,o,a=t[18].format("D")+"",l,c,f=[dD,fD],d=[];function h(m,g){return m[20]==0?0:1}return e=h(t,-1),n=d[e]=f[e](t),{c(){n.c(),r=te(),o=Y("span"),l=et(a),N(o,"class","dayDisplay")},m(m,g){d[e].m(m,g),V(m,r,g),V(m,o,g),I(o,l),c=!0},p(m,g){n.p(m,g),(!c||g&64)&&a!==(a=m[18].format("D")+"")&&en(l,a)},i(m){c||(Ct(n),c=!0)},o(m){Yt(n),c=!1},d(m){d[e].d(m),m&&q(r),m&&q(o)}}}function pD(t){let e,n,r,o,a=t[2]&&t[6]&&$v(t),l=t[13](t[6]),c=[];for(let d=0;d<l.length;d+=1)c[d]=ey(Jv(t,l,d));let f=d=>Yt(c[d],1,1,()=>{c[d]=null});return{c(){e=Y("div"),a&&a.c(),n=te(),r=Y("div");for(let d=0;d<c.length;d+=1)c[d].c();N(r,"class","googleWeekContainer svelte-wwuc5n"),de(r,"overflow","hidden"),de(e,"padding-left","10px")},m(d,h){V(d,e,h),a&&a.m(e,null),I(e,n),I(e,r);for(let m=0;m<c.length;m+=1)c[m].m(r,null);o=!0},p(d,[h]){if(d[2]&&d[6]?a?a.p(d,h):(a=$v(d),a.c(),a.m(e,n)):a&&(a.d(1),a=null),h&8315){l=d[13](d[6]);let m;for(m=0;m<l.length;m+=1){let g=Jv(d,l,m);c[m]?(c[m].p(g,h),Ct(c[m],1)):(c[m]=ey(g),c[m].c(),Ct(c[m],1),c[m].m(r,null))}for(So(),m=l.length;m<c.length;m+=1)f(m);Do()}},i(d){if(!o){for(let h=0;h<l.length;h+=1)Ct(c[h]);o=!0}},o(d){c=c.filter(Boolean);for(let h=0;h<c.length;h+=1)Yt(c[h]);o=!1},d(d){d&&q(e),a&&a.d(),Ft(c,d)}}}function hD(t,e,n){let r,{height:o=void 0}=e,{width:a=void 0}=e,{startDate:l=window.moment()}=e,{navigation:c=!1}=e,{include:f}=e,{exclude:d}=e,{hourRange:h=void 0}=e,{dayOffset:m=0}=e,{timespan:g=7}=e,y=0,_=()=>n(17,y-=7),x=()=>n(17,y-=1),k=()=>n(17,y=0),E=()=>n(17,y+=7),T=()=>n(17,y+=1),D=M=>{new dn({start:{},end:{}},()=>{kn(),n(6,r),n(2,c),n(14,l),n(17,y)}).open()},P=M=>{let R=[];for(let Q=0;Q<g;Q++)R=[...R,M.clone().add(Q+m,"days")];return R};return t.$$set=M=>{"height"in M&&n(0,o=M.height),"width"in M&&n(1,a=M.width),"startDate"in M&&n(14,l=M.startDate),"navigation"in M&&n(2,c=M.navigation),"include"in M&&n(3,f=M.include),"exclude"in M&&n(4,d=M.exclude),"hourRange"in M&&n(5,h=M.hourRange),"dayOffset"in M&&n(15,m=M.dayOffset),"timespan"in M&&n(16,g=M.timespan)},t.$$.update=()=>{if(t.$$.dirty&147460){e:n(6,r=c?l.clone().local().add(y,"days"):l)}},[o,a,c,f,d,h,r,_,x,k,E,T,D,P,l,m,g,y]}var ty=class extends Gt{constructor(e){super();zt(this,e,hD,pD,Ht,{height:0,width:1,startDate:14,navigation:2,include:3,exclude:4,hourRange:5,dayOffset:15,timespan:16},cD)}},Nl=ty;var hi="google-calendar-view-week",Vs=class extends ny.ItemView{constructor(e,n=window.moment()){super(e);this.setDate=e=>{this.startDate=e,this.onClose(),this.onOpen()};this.startDate=n}getViewType(){return hi}getDisplayText(){return"Week View"}getIcon(){return"calendar-with-checkmark"}onOpen(){return G(this,null,function*(){this.calendar=new Nl({target:this.contentEl,props:{navigation:!0,startDate:this.startDate}})})}onClose(){return G(this,null,function*(){this.calendar.$destroy()})}};function mD(t){let e,n,r,o=`${t[1]}px`,a=`${t[2]}px`,l,c=[yD,vD],f=[];function d(h,m){return h[3]?0:1}return n=d(t,-1),r=f[n]=c[n](t),{c(){e=Y("div"),r.c(),N(e,"class","calendarContainer"),de(e,"width",o,!1),de(e,"height",a,!1)},m(h,m){V(h,e,m),f[n].m(e,null),l=!0},p(h,m){let g=n;n=d(h,m),n===g?f[n].p(h,m):(So(),Yt(f[g],1,1,()=>{f[g]=null}),Do(),r=f[n],r?r.p(h,m):(r=f[n]=c[n](h),r.c()),Ct(r,1),r.m(e,null)),m&2&&o!==(o=`${h[1]}px`)&&de(e,"width",o,!1),m&4&&a!==(a=`${h[2]}px`)&&de(e,"height",a,!1)},i(h){l||(Ct(r),l=!0)},o(h){Yt(r),l=!1},d(h){h&&q(e),f[n].d()}}}function gD(t){let e,n,r,o,a=[wD,_D],l=[];function c(f,d){return f[3]?0:1}return n=c(t,-1),r=l[n]=a[n](t),{c(){e=Y("div"),r.c(),N(e,"class","calendarContainer")},m(f,d){V(f,e,d),l[n].m(e,null),o=!0},p(f,d){let h=n;n=c(f,d),n===h?l[n].p(f,d):(So(),Yt(l[h],1,1,()=>{l[h]=null}),Do(),r=l[n],r?r.p(f,d):(r=l[n]=a[n](f),r.c()),Ct(r,1),r.m(e,null))},i(f){o||(Ct(r),o=!0)},o(f){Yt(r),o=!1},d(f){f&&q(e),l[n].d()}}}function vD(t){let e,n,r,o,a,l;function c(m){t[18](m)}function f(m){t[19](m)}function d(m){t[20](m)}let h={showWeekNums:!1,onClickDay:t[7]};return t[4]!==void 0&&(h.sources=t[4]),t[0]!==void 0&&(h.displayedMonth=t[0]),t[5]!==void 0&&(h.today=t[5]),n=new Al({props:h}),tn.push(()=>Lr(n,"sources",c)),tn.push(()=>Lr(n,"displayedMonth",f)),tn.push(()=>Lr(n,"today",d)),{c(){e=Y("div"),oi(n.$$.fragment),de(e,"--theme-color",t[6].settings.dailyNoteDotColor)},m(m,g){V(m,e,g),Nr(n,e,null),l=!0},p(m,g){let y={};!r&&g&16&&(r=!0,y.sources=m[4],Ar(()=>r=!1)),!o&&g&1&&(o=!0,y.displayedMonth=m[0],Ar(()=>o=!1)),!a&&g&32&&(a=!0,y.today=m[5],Ar(()=>a=!1)),n.$set(y),(!l||g&64)&&de(e,"--theme-color",m[6].settings.dailyNoteDotColor)},i(m){l||(Ct(n.$$.fragment,m),l=!0)},o(m){Yt(n.$$.fragment,m),l=!1},d(m){m&&q(e),ir(n)}}}function yD(t){let e;return{c(){e=Y("p"),e.textContent="Loading..."},m(n,r){V(n,e,r)},p:Le,i:Le,o:Le,d(n){n&&q(e)}}}function _D(t){let e,n,r,o,a,l;function c(m){t[15](m)}function f(m){t[16](m)}function d(m){t[17](m)}let h={showWeekNums:t[6].settings.useWeeklyNotes,onClickDay:t[7],onClickWeek:t[8],onContextMenuDay:t[9],onContextMenuWeek:t[10]};return t[4]!==void 0&&(h.sources=t[4]),t[0]!==void 0&&(h.displayedMonth=t[0]),t[5]!==void 0&&(h.today=t[5]),n=new Al({props:h}),tn.push(()=>Lr(n,"sources",c)),tn.push(()=>Lr(n,"displayedMonth",f)),tn.push(()=>Lr(n,"today",d)),{c(){e=Y("div"),oi(n.$$.fragment),de(e,"--daily-dot-color",t[6].settings.dailyNoteDotColor)},m(m,g){V(m,e,g),Nr(n,e,null),l=!0},p(m,g){let y={};g&64&&(y.showWeekNums=m[6].settings.useWeeklyNotes),!r&&g&16&&(r=!0,y.sources=m[4],Ar(()=>r=!1)),!o&&g&1&&(o=!0,y.displayedMonth=m[0],Ar(()=>o=!1)),!a&&g&32&&(a=!0,y.today=m[5],Ar(()=>a=!1)),n.$set(y),(!l||g&64)&&de(e,"--daily-dot-color",m[6].settings.dailyNoteDotColor)},i(m){l||(Ct(n.$$.fragment,m),l=!0)},o(m){Yt(n.$$.fragment,m),l=!1},d(m){m&&q(e),ir(n)}}}function wD(t){let e;return{c(){e=Y("p"),e.textContent="Loading..."},m(n,r){V(n,e,r)},p:Le,i:Le,o:Le,d(n){n&&q(e)}}}function bD(t){let e,n,r,o,a=[gD,mD],l=[];function c(f,d){return f[1]==0||f[2]==0?0:1}return e=c(t,-1),n=l[e]=a[e](t),{c(){n.c(),r=rr()},m(f,d){l[e].m(f,d),V(f,r,d),o=!0},p(f,[d]){let h=e;e=c(f,d),e===h?l[e].p(f,d):(So(),Yt(l[h],1,1,()=>{l[h]=null}),Do(),n=l[e],n?n.p(f,d):(n=l[e]=a[e](f),n.c()),Ct(n,1),n.m(r.parentNode,r))},i(f){o||(Ct(n),o=!0)},o(f){Yt(n),o=!1},d(f){l[e].d(f),f&&q(r)}}}function kD(t,e,n){let{displayedMonth:r=window.moment()}=e,{width:o=0}=e,{height:a=0}=e,{include:l}=e,{exclude:c}=e,f=nl(),d,h,m,g=!0,y,_=window.moment(),x=ce.getInstance();function k(J){return Ke(this,void 0,void 0,function*(){n(6,x);let ie=J.clone().startOf("month").subtract(6,"days"),Z=J.clone().endOf("month").add(12,"days"),z=yield Ve({startDate:ie,endDate:Z,include:l,exclude:c});if(Pl.default.isEqual(z,m)&&Pl.default.isEqual(f,nl()))return;f=nl();let X=Pl.default.groupBy(z,tt=>{var Fe;return window.moment((Fe=tt.start.date)!==null&&Fe!==void 0?Fe:tt.start.dateTime).startOf("day").format()});m=z;let _e={getWeeklyMetadata:tt=>Ke(this,void 0,void 0,function*(){let Fe=[];return x.settings.activateDailyNoteAddon&&x.settings.useWeeklyNotes&&Os(tt)&&(Fe=[{isFilled:!0,className:"googleCalendarDailyDot",color:"default"}]),{dataAttributes:{amount:Fe.length+""},dots:Fe}}),getDailyMetadata:tt=>Ke(this,void 0,void 0,function*(){let Fe=[];x.settings.activateDailyNoteAddon&&Ii(tt)&&(Fe=[{isFilled:!0,className:"googleCalendarDailyDot",color:"default"}]);let at=X[tt.startOf("day").format()];return at?(Fe=[...Fe,...Array(at.length).fill({isFilled:!0,className:"googleCalendarDot",color:"default"})],{dataAttributes:{amount:at.length+""},dots:Fe}):{dataAttributes:{amount:Fe.length+""},dots:Fe}})};n(3,g=!1),n(4,y=null),n(4,y=[_e])})}let E=(J,ie)=>J.filter(Z=>Z.start.date?window.moment(Z.start.date).isSame(ie,"day"):window.moment(Z.start.dateTime).isSame(ie,"day")),T=(J,ie)=>{new Qn(E(m,J),"details",J,!1,()=>{kn(),n(0,r)}).open()},D=(J,ie)=>Ke(void 0,void 0,void 0,function*(){let Z=Os(J);Z||(Z=yield(0,ry.createWeeklyNote)(J)),yield app.workspace.getLeaf(!1).openFile(Z,{active:!0})}),P=(J,ie,Z)=>ie.ctrlKey?(Or({date:J,openInNewTab:!0,type:Z}),!1):ie.shiftKey?(Or({date:J,openInNewTab:!1,type:Z}),!1):ie.altKey&&Ks.Platform.isDesktop?(Nc({date:J,type:Z}),!1):!0,M=(J,ie)=>{let Z=ie==="daily"?Ii(J):Os(J),z=new Ks.Menu;return Z?(z.addItem(X=>{X.setTitle(`Open ${ie} Note`),X.setIcon("file"),X.onClick(()=>{Or({date:J,openInNewTab:!1,type:ie})})}),z.addItem(X=>{X.setTitle(`Open ${ie} Note Split Right`),X.setIcon("vertical-split"),X.onClick(()=>{Or({date:J,openInNewTab:!0,openToRight:"horizontal",type:ie})})}),z.addItem(X=>{X.setTitle(`Open ${ie} Note Split Down`),X.setIcon("horizontal-split"),X.onClick(()=>{Or({date:J,openInNewTab:!0,openToRight:"vertical",type:ie})})}),Ks.Platform.isDesktop&&z.addItem(X=>{X.setTitle(`Open ${ie} Note in new Window`),X.setIcon("fullscreen"),X.onClick(()=>{Nc({date:J,type:ie})})})):(z.addItem(X=>{X.setTitle(`Create ${ie} Note`),X.setIcon("create-new"),X.onClick(()=>{Or({date:J,openInNewTab:!1,type:ie})})}),z.addItem(X=>{X.setTitle(`Create ${ie} Note Split Right`),X.setIcon("vertical-split"),X.onClick(()=>{Or({date:J,openInNewTab:!0,openToRight:"horizontal",type:ie})})}),z.addItem(X=>{X.setTitle(`Create ${ie} Note Split Down`),X.setIcon("horizontal-split"),X.onClick(()=>{Or({date:J,openInNewTab:!0,openToRight:"vertical",type:ie})})})),ie==="daily"?(z.addSeparator(),z.addItem(X=>{X.setTitle("Open Timeline View"),X.setIcon("calendar"),X.onClick(()=>Ke(void 0,void 0,void 0,function*(){let _e=yield x.initView(Ji);_e.view instanceof qs&&_e.view.setDate(J)}))}),z.addItem(X=>{X.setTitle("Open Schedule View"),X.setIcon("bullet-list"),X.onClick(()=>Ke(void 0,void 0,void 0,function*(){let _e=yield x.initView(pi);_e.view instanceof jo&&_e.view.setDate(J)}))})):(z.addSeparator(),z.addItem(X=>{X.setTitle("Open Weekly View"),X.setIcon("calendar"),X.onClick(()=>Ke(void 0,void 0,void 0,function*(){let _e=yield x.initView(hi);_e.view instanceof Vs&&_e.view.setDate(J)}))}),z.addItem(X=>{X.setTitle("Open Schedule View"),X.setIcon("bullet-list"),X.onClick(()=>Ke(void 0,void 0,void 0,function*(){let _e=yield x.initView(pi);_e.view instanceof jo&&_e.view.setDate(J)}))})),z},R=(J,ie)=>(P(J,ie,"daily")&&M(J,"daily").showAtPosition({x:ie.clientX,y:ie.clientY}),!0),Q=(J,ie)=>(P(J,ie,"weekly")&&M(J,"weekly").showAtPosition({x:ie.clientX,y:ie.clientY}),!0);Yi(()=>{clearInterval(d),clearInterval(h)});function L(J){y=J,n(4,y)}function j(J){r=J,n(0,r)}function ee(J){_=J,n(5,_),n(13,d),n(0,r),n(14,h)}function K(J){y=J,n(4,y)}function ae(J){r=J,n(0,r)}function xe(J){_=J,n(5,_),n(13,d),n(0,r),n(14,h)}return t.$$set=J=>{"displayedMonth"in J&&n(0,r=J.displayedMonth),"width"in J&&n(1,o=J.width),"height"in J&&n(2,a=J.height),"include"in J&&n(11,l=J.include),"exclude"in J&&n(12,c=J.exclude)},t.$$.update=()=>{if(t.$$.dirty&24577){e:d&&clearInterval(d),n(13,d=setInterval(()=>k(r),1e3)),h&&clearInterval(h),n(14,h=setInterval(()=>n(5,_=window.moment()),6e4)),k(r)}},[r,o,a,g,y,_,x,T,D,R,Q,l,c,d,h,L,j,ee,K,ae,xe]}var iy=class extends Gt{constructor(e){super();zt(this,e,kD,bD,Ht,{displayedMonth:0,width:1,height:2,include:11,exclude:12})}},Il=iy;var oy=ye(require("obsidian")),$i=class extends oy.MarkdownRenderChild{constructor(e,n,r){super(n);this.a=e,this.b=r}load(){this.comp=new this.a({target:this.containerEl,props:this.b})}unload(){this.comp.$destroy()}};function sy(t,e,n){return G(this,null,function*(){let r=(0,Rl.parseYaml)(t),{height:o,width:a,date:l,navigation:c,timespan:f,exclude:d,include:h,theme:m,view:g,hourRange:y,dayOffset:_}=r,{type:x}=r;x||(x=Rr.day);let k=["YYYY-MM-DD","YYYY.MM.DD","YYYY/MM/DD","MM-DD-YYYY","MM.DD.YYYY","MM/DD/YYYY","DD-MM-YYYY","DD.MM.YYYY","DD/MM/YYYY"];if(l==null||l=="today"||l=="tomorrow"||l=="yesterday"||window.moment(l,k,!0).isValid()){let E;l==null?E=void 0:l=="today"?E=window.moment():l=="tomorrow"?E=window.moment().add(1,"day"):l=="yesterday"?E=window.moment().subtract(1,"day"):E=window.moment(l),e.style.padding="10px",x==Rr.web?Rl.Platform.isDesktopApp&&n.addChild(new $i(bl,e,{height:o,width:a,date:E,view:g,theme:m!=null?m:"auto"})):x==Rr.day?n.addChild(new $i(wl,e,{height:o,width:a,startDate:E,navigation:c,include:h,exclude:d,hourRange:y})):x==Rr.month?n.addChild(new $i(Il,e,{height:o,width:a,displayedMonth:E,include:h,exclude:d})):x==Rr.schedule?n.addChild(new $i(Ll,e,{timeSpan:f,date:E,include:h,exclude:d})):x==Rr.week&&n.addChild(new $i(Nl,e,{height:o,width:a,date:E,navigation:c,include:h,exclude:d,hourRange:y,dayOffset:_,timespan:f}))}})}var ay=ye(require("obsidian"));var Zs="google-calendar-view-month",ff=class extends ay.ItemView{constructor(e){super(e)}getViewType(){return Zs}getDisplayText(){return"Calendar Month View"}getIcon(){return"calendar-with-checkmark"}onOpen(){return G(this,null,function*(){this.calendar=new Il({target:this.contentEl,props:{}})})}onClose(){return G(this,null,function*(){this.calendar.$destroy()})}};var ly=ye(require("obsidian"));var Ho="google-calendar-view-web",df=class extends ly.ItemView{constructor(e){super(e)}getViewType(){return Ho}getDisplayText(){return"Calendar Web View"}getIcon(){return"calendar-with-checkmark"}onOpen(){return G(this,null,function*(){this.calendar=new bl({target:this.contentEl,props:{width:-1}})})}onClose(){return G(this,null,function*(){this.calendar.$destroy()})}};var uy=ye(require("obsidian")),pf=class extends uy.FuzzySuggestModal{constructor(e,n,r,o,a){super(ce.getInstance().app);this.eventList=e,this.setPlaceholder("Select an event to insert"),this.editor=n,this.start=r,this.end=o,this.word=a}getItems(){return this.eventList}getItemText(e){return`${e.summary}	`}onChooseItem(e){return G(this,null,function*(){let n=`[${e.summary}](${e.htmlLink}&cal=${e.parent.id})`;this.editor.replaceRange(n,this.start,this.end,this.word)})}};function cy(t,e){e.settings.atAnnotationEnabled!=!1&&(Xs("@today",t,e)||Xs("@tomorrow",t,e)||Xs("@yesterday",t,e)||Xs("@REGEX",t,e)||Xs("@YYYY-MM-DD",t,e))}function Xs(t,e,n){var c;let r=e.getCursor(),o=e.getCursor(),a="",l=window.moment();if(t==="@REGEX"){let f=e.getLine(r.line);if(f.length>2e3)return!1;let d=(c=f.match(/.*@([+,-])(\d+) /))!=null?c:[];if(d.length!=3||e.getCursor().ch!=d.index+d[0].length)return!1;if(o=ja(xr({},r),{ch:r.ch-d[1].length-d[2].length-1}),o.ch<0)return;a=e.getRange(o,r),d[1]=="+"?l=window.moment().add(d[2],"day"):l=window.moment().subtract(d[2],"day")}else if(t==="@YYYY-MM-DD"){if(o=ja(xr({},r),{ch:r.ch-t.length}),a=e.getRange(o,r),!a.startsWith("@")||a.length!="@YYYY-MM-DD".length)return!1;let f=["YYYY-MM-DD","YYYY/MM/DD","YYYY.MM.DD","YYYY MM DD","MM-DD-YYYY","MM/DD/YYYY","MM.DD.YYYY","MM DD YYYY","DD-MM-YYYY","DD/MM/YYYY","DD.MM.YYYY","DD MM YYYY"],d=["DD-MM-YYYY","DD/MM/YYYY","DD.MM.YYYY","DD MM YYYY","YYYY-MM-DD","YYYY/MM/DD","YYYY.MM.DD","YYYY MM DD","MM-DD-YYYY","MM/DD/YYYY","MM.DD.YYYY","MM DD YYYY"],h=window.moment(a.substring(1),n.settings.usDateFormat?f:d,!0);if(h.isValid())l=h;else return!1}else{if(o=ja(xr({},r),{ch:r.ch-t.length}),o.ch<0||e.getRange(o,r)!=t)return!1;switch(t){case"@today":l=window.moment();break;case"@tomorrow":l=window.moment().add(1,"day");break;case"@yesterday":l=window.moment().add(-1,"day");break;default:return!1}}return Ve({startDate:l}).then(f=>{new pf(f,e,o,r,a).open()}),!0}var fy=ye(Mr());function ED(t){return G(this,null,function*(){let e=/\[.*]\(https:\/\/www\.google\.com\/calendar\/event\?eid=(.*)&cal=(.*)\)/g,n,r=[];do n=e.exec(t),n&&r.push(n);while(n);return r.length?yield Promise.all(r.map(a=>G(this,null,function*(){if(a){let l=atob(a[1]).split(" ")[0];return yield or(l,a[2])}}))):[]})}function dy(t){return G(this,null,function*(){let e=t.getCursor(),n=t.getValue(),r=/{{gEvent(\d?).(.*)}} /g,o,a=[];do o=r.exec(n),o&&a.push(o);while(o);if(!a.length)return;let l=yield ED(n);!l.length||a.forEach(c=>G(this,null,function*(){let f=c[1]?parseInt(c[1]):0,d=t.getCursor();if(d.ch-=3,t.getRange(d,t.getCursor())!="}} ")return!1;let h=fy.default.get(l[f],c[2],"");h===Object(h)&&(h=JSON.stringify(h)),n=n.replace(c[0],h!=null?h:""),t.setValue(n),e.ch+=h.length-c[0].length,t.setCursor(e)}))})}var py=ye(require("obsidian"));var zo=[".anyoneCanAddSelf",".attachments",".attachments[0]",".attachments[0]fileId",".attachments[0]fileUrl",".attachments[0]iconLink",".attachments[0]mimeType",".attachments[0]title",".attendees",".attendeesOmitted",".attendees[0]",".attendees[0].additionalGuests",".attendees[0].comment",".attendees[0].displayName",".attendees[0].email",".attendees[0].id",".attendees[0].optional",".attendees[0].organizer",".attendees[0].resource",".attendees[0].responseStatus",".attendees[0].self",".colorId",".conferenceData",".conferenceData.conferenceId",".conferenceData.conferenceSolution",".conferenceData.conferenceSolution.iconUri",".conferenceData.conferenceSolution.key",".conferenceData.conferenceSolution.key.type",".conferenceData.conferenceSolution.name",".conferenceData.createRequest",".conferenceData.createRequest.conferenceSolutionKey",".conferenceData.createRequest.conferenceSolutionKey.type",".conferenceData.createRequest.requestId",".conferenceData.createRequest.status",".conferenceData.createRequest.status.statusCode",".conferenceData.entryPoints",".conferenceData.entryPoints[0]",".conferenceData.entryPoints[0].accessCode",".conferenceData.entryPoints[0].entryPointType",".conferenceData.entryPoints[0].label",".conferenceData.entryPoints[0].meetingCode",".conferenceData.entryPoints[0].passcode",".conferenceData.entryPoints[0].password",".conferenceData.entryPoints[0].pin",".conferenceData.entryPoints[0].uri",".conferenceData.notes",".conferenceData.signature",".created",".creator",".creator.displayName",".creator.email",".creator.id",".creator.self",".description",".end",".end.date",".end.dateTime",".end.timeZone",".endTimeUnspecified",".etag",".eventType",".extendedProperties",".extendedProperties.private",".extendedProperties.shared",".gadget",".gadget.display",".gadget.height",".gadget.iconLink",".gadget.link",".gadget.preferences",".gadget.title",".gadget.type",".gadget.width",".guestsCanInviteOthers",".guestsCanModify",".guestsCanSeeOtherGuests",".hangoutLink",".htmlLink",".iCalUID",".id",".kind",".location",".locked",".organizer",".organizer.displayName",".organizer.email",".organizer.id",".organizer.self",".originalStartTime",".originalStartTime.date",".originalStartTime.dateTime",".originalStartTime.timeZone",".privateCopy",".parent",".parent.kind",".parent.id",".parent.summary",".parent.description",".parent.location",".parent.timeZone",".parent.conferenceProperties",".parent.conferenceProperties.allowedConferenceSolutionTypes",".recurrence",".recurrence[0]",".recurringEventId",".reminders",".reminders.overrides",".reminders.overrides[0]",".reminders.overrides[0].method",".reminders.overrides[0].minutes",".reminders.useDefault",".sequence",".source",".source.title",".source.url",".start",".start.date",".start.dateTime",".start.timeZone",".status",".summary",".transparency",".updated",".visibility"];var hf=class extends py.EditorSuggest{constructor(e){super(e)}onTrigger(e,n){let o=n.getLine(e.line).substring(0,e.ch).match(/{{gEvent(\d)?(\S+$)/);if(o){let a="{{gEvent".length;return o[1]&&a++,{end:e,start:{ch:o.index+a,line:e.line},query:o[2]}}}getSuggestions(e){return zo.filter(n=>e.query===n.substring(0,e.query.length))}renderSuggestion(e,n){n.createEl("span",{text:e,cls:"suggestionText"})}selectSuggestion(e){if(!this.context)return;let{editor:n}=this.context;if(n.replaceRange(e,this.context.start,this.context.end),zo.filter(o=>o.startsWith(`${e}.`)).length==0){let o=n.getCursor(),a=structuredClone(o);a.ch+=2,(n.getLine(a.line).length<a.ch||n.getRange(o,a)!="}}")&&n.replaceRange("}}",o),n.setCursor(a)}}};var Dy=ye(require("obsidian"));var Qs=ye(require("obsidian")),mf=class extends Qs.Modal{constructor(e,n){super(e);this.onSubmit=n}onOpen(){let{contentEl:e}=this;e.createEl("h1",{text:"Enter a name for the template"}),new Qs.Setting(e).setName("Name").addText(n=>n.onChange(r=>{this.result=r})),new Qs.Setting(e).addButton(n=>n.setButtonText("Save").setCta().onClick(()=>{this.close(),this.onSubmit(this.result)}))}onClose(){let{contentEl:e}=this;e.empty()}};function xD(t){fn(t,"svelte-6isfqn",".optionContainer.svelte-6isfqn{display:flex;flex-direction:column}.header.svelte-6isfqn{display:grid;grid-template-columns:[first] 30% auto [last] 30%}.center.svelte-6isfqn{text-align:center}.settingsContainer.svelte-6isfqn{display:flex;flex-direction:row;flex:1 1;gap:20px}.optionItem.svelte-6isfqn{display:flex;flex-direction:row;justify-content:space-between;align-items:center}.input.svelte-6isfqn,.eventList.svelte-6isfqn,.optionList.svelte-6isfqn,.calendarList.svelte-6isfqn{width:100%;display:flex;flex-direction:column}.eventList.svelte-6isfqn,.optionList.svelte-6isfqn,.calendarList.svelte-6isfqn{padding-left:16px}button.svelte-6isfqn{align-self:center}")}function hy(t,e,n){let r=t.slice();return r[21]=e[n],r}function my(t,e,n){let r=t.slice();return r[21]=e[n],r}function gy(t,e,n){let r=t.slice();return r[26]=e[n],r[27]=e,r[28]=n,r}function vy(t,e,n){let r=t.slice();return r[29]=e[n],r[30]=e,r[31]=n,r}function yy(t,e,n){let r=t.slice();return r[32]=e[n],r}function _y(t){let e,n=t[0].settings.insertTemplates,r=[];for(let o=0;o<n.length;o+=1)r[o]=wy(yy(t,n,o));return{c(){for(let o=0;o<r.length;o+=1)r[o].c();e=rr()},m(o,a){for(let l=0;l<r.length;l+=1)r[l].m(o,a);V(o,e,a)},p(o,a){if(a[0]&1){n=o[0].settings.insertTemplates;let l;for(l=0;l<n.length;l+=1){let c=yy(o,n,l);r[l]?r[l].p(c,a):(r[l]=wy(c),r[l].c(),r[l].m(e.parentNode,e))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},d(o){Ft(r,o),o&&q(e)}}}function wy(t){let e,n=t[32].name+"",r,o;return{c(){e=Y("option"),r=et(n),e.__value=o=t[32].name,e.value=e.__value},m(a,l){V(a,e,l),I(e,r)},p(a,l){l[0]&1&&n!==(n=a[32].name+"")&&en(r,n),l[0]&1&&o!==(o=a[32].name)&&(e.__value=o,e.value=e.__value)},d(a){a&&q(e)}}}function CD(t){let e;return{c(){e=Y("span"),e.textContent="Loading..."},m(n,r){V(n,e,r)},p:Le,d(n){n&&q(e)}}}function TD(t){let e,n=t[4],r=[];for(let o=0;o<n.length;o+=1)r[o]=by(vy(t,n,o));return{c(){for(let o=0;o<r.length;o+=1)r[o].c();e=rr()},m(o,a){for(let l=0;l<r.length;l+=1)r[l].m(o,a);V(o,e,a)},p(o,a){if(a[0]&144){n=o[4];let l;for(l=0;l<n.length;l+=1){let c=vy(o,n,l);r[l]?r[l].p(c,a):(r[l]=by(c),r[l].c(),r[l].m(e.parentNode,e))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},d(o){Ft(r,o),o&&q(e)}}}function by(t){let e,n,r=t[29][0].summary+"",o,a,l,c,f,d,h,m;function g(){t[17].call(c,t[30],t[31])}return{c(){e=Y("div"),n=Y("label"),o=et(r),l=te(),c=Y("input"),d=te(),N(n,"for",a=t[29][0].id),N(c,"type","checkbox"),N(c,"id",f=t[29][0].id),N(e,"class","optionItem svelte-6isfqn")},m(y,_){V(y,e,_),I(e,n),I(n,o),I(e,l),I(e,c),c.checked=t[29][1],I(e,d),h||(m=[fe(c,"change",g),fe(c,"change",t[7])],h=!0)},p(y,_){t=y,_[0]&16&&r!==(r=t[29][0].summary+"")&&en(o,r),_[0]&16&&a!==(a=t[29][0].id)&&N(n,"for",a),_[0]&16&&f!==(f=t[29][0].id)&&N(c,"id",f),_[0]&16&&(c.checked=t[29][1])},d(y){y&&q(e),h=!1,At(m)}}}function SD(t){let e;return{c(){e=Y("span"),e.textContent="Loading..."},m(n,r){V(n,e,r)},p:Le,d(n){n&&q(e)}}}function DD(t){let e,n=t[3],r=[];for(let o=0;o<n.length;o+=1)r[o]=ky(gy(t,n,o));return{c(){for(let o=0;o<r.length;o+=1)r[o].c();e=rr()},m(o,a){for(let l=0;l<r.length;l+=1)r[l].m(o,a);V(o,e,a)},p(o,a){if(a[0]&8){n=o[3];let l;for(l=0;l<n.length;l+=1){let c=gy(o,n,l);r[l]?r[l].p(c,a):(r[l]=ky(c),r[l].c(),r[l].m(e.parentNode,e))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},d(o){Ft(r,o),o&&q(e)}}}function ky(t){let e,n,r=t[26][0].summary+"",o,a,l,c,f,d,h,m;function g(){t[18].call(c,t[27],t[28])}return{c(){e=Y("div"),n=Y("label"),o=et(r),l=te(),c=Y("input"),d=te(),N(n,"for",a=t[26][0].id),N(c,"type","checkbox"),N(c,"id",f=t[26][0].id),N(e,"class","optionItem svelte-6isfqn")},m(y,_){V(y,e,_),I(e,n),I(n,o),I(e,l),I(e,c),c.checked=t[26][1],I(e,d),h||(m=fe(c,"change",g),h=!0)},p(y,_){t=y,_[0]&8&&r!==(r=t[26][0].summary+"")&&en(o,r),_[0]&8&&a!==(a=t[26][0].id)&&N(n,"for",a),_[0]&8&&f!==(f=t[26][0].id)&&N(c,"id",f),_[0]&8&&(c.checked=t[26][1])},d(y){y&&q(e),h=!1,m()}}}function Ey(t){let e,n,r,o,a,l,c,f=zo,d=[];for(let g=0;g<f.length;g+=1)d[g]=xy(my(t,f,g));let h=t[5],m=[];for(let g=0;g<h.length;g+=1)m[g]=Cy(hy(t,h,g));return{c(){e=Y("h4"),e.textContent="Table structure",n=te(),r=Y("select");for(let g=0;g<d.length;g+=1)d[g].c();o=te(),a=Y("div");for(let g=0;g<m.length;g+=1)m[g].c();N(r,"name","tableOptions"),N(r,"class","dropdown"),N(a,"class","optionList svelte-6isfqn")},m(g,y){V(g,e,y),V(g,n,y),V(g,r,y);for(let _=0;_<d.length;_+=1)d[_].m(r,null);V(g,o,y),V(g,a,y);for(let _=0;_<m.length;_+=1)m[_].m(a,null);l||(c=fe(r,"change",t[8]),l=!0)},p(g,y){if(y&0){f=zo;let _;for(_=0;_<f.length;_+=1){let x=my(g,f,_);d[_]?d[_].p(x,y):(d[_]=xy(x),d[_].c(),d[_].m(r,null))}for(;_<d.length;_+=1)d[_].d(1);d.length=f.length}if(y[0]&544){h=g[5];let _;for(_=0;_<h.length;_+=1){let x=hy(g,h,_);m[_]?m[_].p(x,y):(m[_]=Cy(x),m[_].c(),m[_].m(a,null))}for(;_<m.length;_+=1)m[_].d(1);m.length=h.length}},d(g){g&&q(e),g&&q(n),g&&q(r),Ft(d,g),g&&q(o),g&&q(a),Ft(m,g),l=!1,c()}}}function xy(t){let e,n=t[21]+"",r,o;return{c(){e=Y("option"),r=et(n),e.__value=o=t[21],e.value=e.__value},m(a,l){V(a,e,l),I(e,r)},p:Le,d(a){a&&q(e)}}}function Cy(t){let e,n,r=t[21]+"",o,a,l,c,f,d,h;function m(){return t[19](t[21])}return{c(){e=Y("div"),n=Y("span"),o=et(r),a=te(),l=Y("input"),f=te(),N(l,"type","checkbox"),N(l,"id",c=t[21]),l.checked=!0,N(e,"class","optionItem svelte-6isfqn")},m(g,y){V(g,e,y),I(e,n),I(n,o),I(e,a),I(e,l),I(e,f),d||(h=fe(l,"click",m),d=!0)},p(g,y){t=g,y[0]&32&&r!==(r=t[21]+"")&&en(o,r),y[0]&32&&c!==(c=t[21])&&N(l,"id",c)},d(g){g&&q(e),d=!1,h()}}}function MD(t){let e,n,r,o,a,l,c,f,d,h,m,g,y,_,x,k,E,T,D,P,M,R,Q,L,j,ee,K,ae,xe,J,ie,Z,z,X,_e,tt,Fe,at,ze=t[0].settings.insertTemplates.length&&_y(t);function rn(Be,Xe){return Be[4]?TD:CD}let Zt=rn(t,[-1,-1]),lt=Zt(t);function pn(Be,Xe){return Be[3]?DD:SD}let on=pn(t,[-1,-1]),_t=on(t),ft=t[2]=="table"&&Ey(t);return{c(){e=Y("div"),n=Y("div"),r=Y("select"),o=Y("option"),o.textContent="None",ze&&ze.c(),a=te(),l=Y("h1"),l.textContent="Insert Options",c=te(),f=Y("button"),f.textContent="Save as template",d=te(),h=Y("hr"),m=te(),g=Y("div"),y=Y("div"),_=Y("label"),_.textContent="Insert type",x=te(),k=Y("select"),E=Y("option"),E.textContent="Bullet",D=Y("option"),D.textContent="Table",P=te(),M=Y("div"),R=Y("label"),R.textContent="Insert date",Q=te(),L=Y("input"),ee=te(),K=Y("h4"),K.textContent="Calendars",ae=te(),xe=Y("div"),lt.c(),J=te(),ie=Y("h4"),ie.textContent="Events",Z=te(),z=Y("div"),_t.c(),X=te(),ft&&ft.c(),_e=te(),tt=Y("button"),tt.textContent="Insert",o.__value="None",o.value=o.__value,N(r,"class","dropdown left"),t[1]===void 0&&To(()=>t[15].call(r)),N(l,"class","center svelte-6isfqn"),N(f,"class","right svelte-6isfqn"),N(n,"class","header svelte-6isfqn"),N(_,"for","insertType"),E.selected=T=!0,E.__value="bullet",E.value=E.__value,D.__value="table",D.value=D.__value,N(k,"class","dropdown"),t[2]===void 0&&To(()=>t[16].call(k)),N(y,"class","input svelte-6isfqn"),N(R,"for","date"),N(L,"type","date"),N(L,"name","date"),N(L,"id","date"),L.value=j=window.moment().format("YYYY-MM-DD"),N(M,"class","input svelte-6isfqn"),N(g,"class","settingsContainer svelte-6isfqn"),N(xe,"class","calendarList svelte-6isfqn"),N(z,"class","eventList svelte-6isfqn"),N(tt,"class","svelte-6isfqn"),N(e,"class","optionContainer svelte-6isfqn")},m(Be,Xe){V(Be,e,Xe),I(e,n),I(n,r),I(r,o),ze&&ze.m(r,null),As(r,t[1]),I(n,a),I(n,l),I(n,c),I(n,f),I(e,d),I(e,h),I(e,m),I(e,g),I(g,y),I(y,_),I(y,x),I(y,k),I(k,E),I(k,D),As(k,t[2]),I(g,P),I(g,M),I(M,R),I(M,Q),I(M,L),I(e,ee),I(e,K),I(e,ae),I(e,xe),lt.m(xe,null),I(e,J),I(e,ie),I(e,Z),I(e,z),_t.m(z,null),I(e,X),ft&&ft.m(e,null),I(e,_e),I(e,tt),Fe||(at=[fe(r,"change",t[15]),fe(r,"change",t[12]),fe(f,"click",t[11]),fe(k,"change",t[16]),fe(L,"change",t[10]),fe(tt,"click",t[6])],Fe=!0)},p(Be,Xe){Be[0].settings.insertTemplates.length?ze?ze.p(Be,Xe):(ze=_y(Be),ze.c(),ze.m(r,null)):ze&&(ze.d(1),ze=null),Xe[0]&3&&As(r,Be[1]),Xe[0]&4&&As(k,Be[2]),Zt===(Zt=rn(Be,Xe))&&lt?lt.p(Be,Xe):(lt.d(1),lt=Zt(Be),lt&&(lt.c(),lt.m(xe,null))),on===(on=pn(Be,Xe))&&_t?_t.p(Be,Xe):(_t.d(1),_t=on(Be),_t&&(_t.c(),_t.m(z,null))),Be[2]=="table"?ft?ft.p(Be,Xe):(ft=Ey(Be),ft.c(),ft.m(e,_e)):ft&&(ft.d(1),ft=null)},i:Le,o:Le,d(Be){Be&&q(e),ze&&ze.d(),lt.d(),_t.d(),ft&&ft.d(),Fe=!1,At(at)}}}function OD(t,e,n){let{onSubmit:r}=e,{insertEventsModal:o}=e,a=ce.getInstance(),l,c,f,d,h=[".summary",".description"];Fi(()=>Ke(void 0,void 0,void 0,function*(){let L=yield kt();n(4,d=L.map(ee=>[ee,!0]));let j=yield Ve();n(3,f=j.map(ee=>[ee,!0]))}));let m=()=>{let L=f.filter(j=>j[1]).map(j=>j[0]);r(c,L,h,o)},g=L=>{f.forEach(j=>{j[0].parent.id==L.target.id&&(j[1]=L.target.checked)}),n(3,f)},y=L=>{let j=L.target.value;j=="on"&&(j=L.target.id),h.contains(j)?h.remove(j):h.push(j),n(5,h)},_=L=>{h.contains(L)&&h.remove(L),n(5,h)},x=L=>Ke(void 0,void 0,void 0,function*(){let j=yield kt();n(4,d=j.map(K=>[K,!0]));let ee=yield Ve({startDate:window.moment(L.target.value).local()});n(3,f=ee.map(K=>[K,!0])),n(3,f)}),k=()=>d.filter(L=>L[1]).map(L=>L[0].id),E=()=>{new mf(app,L=>{let j={name:L,insertType:c,tableOptions:h,calendarList:k()};n(0,a.settings.insertTemplates=[...a.settings.insertTemplates,j],a),a.saveSettings(),Ee("Added template")}).open()},T=L=>{let j=L.target.value;if(j=="None")return;let K=a.settings.insertTemplates.find(ae=>ae.name==j);!K||(n(2,c=K.insertType),n(5,h=K.tableOptions),d.forEach(ae=>ae[1]=K.calendarList.contains(ae[0].id)),f.forEach(ae=>ae[1]=K.calendarList.contains(ae[0].parent.id)),n(4,d),n(3,f))};function D(){l=Fc(this),n(1,l),n(0,a)}function P(){c=Fc(this),n(2,c)}function M(L,j){L[j][1]=this.checked,n(4,d)}function R(L,j){L[j][1]=this.checked,n(3,f)}let Q=L=>_(L);return t.$$set=L=>{"onSubmit"in L&&n(13,r=L.onSubmit),"insertEventsModal"in L&&n(14,o=L.insertEventsModal)},[a,l,c,f,d,h,m,g,y,_,x,E,T,r,o,D,P,M,R,Q]}var Ty=class extends Gt{constructor(e){super();zt(this,e,OD,MD,Ht,{onSubmit:13,insertEventsModal:14},xD,[-1,-1])}},Sy=Ty;var My=ye(Mr()),gf=class extends Dy.Modal{constructor(e){super(ce.getInstance().app);this.editor=e}onOpen(){return G(this,null,function*(){let{contentEl:e}=this;new Sy({target:e,props:{onSubmit:this.onSubmit,insertEventsModal:this}})})}onClose(){let{contentEl:e}=this;e.empty()}onSubmit(e,n,r,o){let a="",l="",c="";e=="bullet"?(n.forEach(f=>{c+=`
- ${`[${f.summary}](${f.htmlLink}&cal=${f.parent.id})`}`}),o.editor.replaceRange(c,o.editor.getCursor())):e=="table"&&(r.forEach(f=>{f=f.split(".").join(" ").toLocaleUpperCase(),a+=`| ${f} `,l+="| --- "}),a+=`|
`,l+=`|
`,n.forEach(f=>{r.forEach(d=>{let h=My.default.get(f,d.substring(1),"");d==".summary"&&(h=`[${h}](${f.htmlLink}&cal=${f.parent.id})`),d.startsWith(".start")&&!d.contains("timeZone")&&(h=(f.start.date?window.moment(f.start.date):window.moment(f.start.dateTime)).format("YYYY-MM-DD HH:mm")),d.startsWith(".end")&&!d.contains("timeZone")&&(h=(f.start.date?window.moment(f.end.date):window.moment(f.end.dateTime)).format("YYYY-MM-DD HH:mm")),c+=`| ${h} `}),c+=`|
`}),o.editor.replaceRange(a+l+c,o.editor.getCursor())),o.close()}};var vf=class{constructor(){}make(){return{getCalendars:()=>kt(),getEvent:(e,n)=>or(e,n),getEvents:e=>Ve(e),createEvent:e=>Lo(e),deleteEvent:(e,n=!1)=>Oo(e,n),updateEvent:(e,n=!1)=>Ao(e,n)}}};var wf=ye(require("obsidian"));var Js=ye(Mr());function Oy(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}var qo=Oy();function AD(t){qo=t}var Ay=/[&<>"']/,LD=new RegExp(Ay.source,"g"),Ly=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,ND=new RegExp(Ly.source,"g"),PD={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ny=t=>PD[t];function Ut(t,e){if(e){if(Ay.test(t))return t.replace(LD,Ny)}else if(Ly.test(t))return t.replace(ND,Ny);return t}var ID=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function Py(t){return t.replace(ID,(e,n)=>(n=n.toLowerCase(),n==="colon"?":":n.charAt(0)==="#"?n.charAt(1)==="x"?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1)):""))}var RD=/(^|[^\[])\^/g;function Ze(t,e){t=typeof t=="string"?t:t.source,e=e||"";let n={replace:(r,o)=>(o=o.source||o,o=o.replace(RD,"$1"),t=t.replace(r,o),n),getRegex:()=>new RegExp(t,e)};return n}var FD=/[^\w:]/g,YD=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function Iy(t,e,n){if(t){let r;try{r=decodeURIComponent(Py(n)).replace(FD,"").toLowerCase()}catch(o){return null}if(r.indexOf("javascript:")===0||r.indexOf("vbscript:")===0||r.indexOf("data:")===0)return null}e&&!YD.test(n)&&(n=BD(e,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(r){return null}return n}var Fl={},GD=/^[^:]+:\/*[^/]*$/,WD=/^([^:]+:)[\s\S]*$/,UD=/^([^:]+:\/*[^/]*)[\s\S]*$/;function BD(t,e){Fl[" "+t]||(GD.test(t)?Fl[" "+t]=t+"/":Fl[" "+t]=Gl(t,"/",!0)),t=Fl[" "+t];let n=t.indexOf(":")===-1;return e.substring(0,2)==="//"?n?e:t.replace(WD,"$1")+e:e.charAt(0)==="/"?n?e:t.replace(UD,"$1")+e:t+e}var Yl={exec:function(){}};function Jn(t){let e=1,n,r;for(;e<arguments.length;e++){n=arguments[e];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}function Ry(t,e){let n=t.replace(/\|/g,(a,l,c)=>{let f=!1,d=l;for(;--d>=0&&c[d]==="\\";)f=!f;return f?"|":" |"}),r=n.split(/ \|/),o=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;o<r.length;o++)r[o]=r[o].trim().replace(/\\\|/g,"|");return r}function Gl(t,e,n){let r=t.length;if(r===0)return"";let o=0;for(;o<r;){let a=t.charAt(r-o-1);if(a===e&&!n)o++;else if(a!==e&&n)o++;else break}return t.slice(0,r-o)}function jD(t,e){if(t.indexOf(e[1])===-1)return-1;let n=t.length,r=0,o=0;for(;o<n;o++)if(t[o]==="\\")o++;else if(t[o]===e[0])r++;else if(t[o]===e[1]&&(r--,r<0))return o;return-1}function Fy(t){t&&t.sanitize&&!t.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function Yy(t,e){if(e<1)return"";let n="";for(;e>1;)e&1&&(n+=t),e>>=1,t+=t;return n+t}function Gy(t,e,n,r){let o=e.href,a=e.title?Ut(e.title):null,l=t[1].replace(/\\([\[\]])/g,"$1");if(t[0].charAt(0)!=="!"){r.state.inLink=!0;let c={type:"link",raw:n,href:o,title:a,text:l,tokens:r.inlineTokens(l)};return r.state.inLink=!1,c}return{type:"image",raw:n,href:o,title:a,text:Ut(l)}}function HD(t,e){let n=t.match(/^(\s+)(?:```)/);if(n===null)return e;let r=n[1];return e.split(`
`).map(o=>{let a=o.match(/^\s+/);if(a===null)return o;let[l]=a;return l.length>=r.length?o.slice(r.length):o}).join(`
`)}var Wl=class{constructor(e){this.options=e||qo}space(e){let n=this.rules.block.newline.exec(e);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(e){let n=this.rules.block.code.exec(e);if(n){let r=n[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?r:Gl(r,`
`)}}}fences(e){let n=this.rules.block.fences.exec(e);if(n){let r=n[0],o=HD(r,n[3]||"");return{type:"code",raw:r,lang:n[2]?n[2].trim().replace(this.rules.inline._escapes,"$1"):n[2],text:o}}}heading(e){let n=this.rules.block.heading.exec(e);if(n){let r=n[2].trim();if(/#$/.test(r)){let o=Gl(r,"#");(this.options.pedantic||!o||/ $/.test(o))&&(r=o.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){let n=this.rules.block.hr.exec(e);if(n)return{type:"hr",raw:n[0]}}blockquote(e){let n=this.rules.block.blockquote.exec(e);if(n){let r=n[0].replace(/^ *>[ \t]?/gm,""),o=this.lexer.state.top;this.lexer.state.top=!0;let a=this.lexer.blockTokens(r);return this.lexer.state.top=o,{type:"blockquote",raw:n[0],tokens:a,text:r}}}list(e){let n=this.rules.block.list.exec(e);if(n){let r,o,a,l,c,f,d,h,m,g,y,_,x=n[1].trim(),k=x.length>1,E={type:"list",raw:"",ordered:k,start:k?+x.slice(0,-1):"",loose:!1,items:[]};x=k?`\\d{1,9}\\${x.slice(-1)}`:`\\${x}`,this.options.pedantic&&(x=k?x:"[*+-]");let T=new RegExp(`^( {0,3}${x})((?:[	 ][^\\n]*)?(?:\\n|$))`);for(;e&&(_=!1,!(!(n=T.exec(e))||this.rules.block.hr.test(e)));){if(r=n[0],e=e.substring(r.length),h=n[2].split(`
`,1)[0],m=e.split(`
`,1)[0],this.options.pedantic?(l=2,y=h.trimLeft()):(l=n[2].search(/[^ ]/),l=l>4?1:l,y=h.slice(l),l+=n[1].length),f=!1,!h&&/^ *$/.test(m)&&(r+=m+`
`,e=e.substring(m.length+1),_=!0),!_){let P=new RegExp(`^ {0,${Math.min(3,l-1)}}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))`),M=new RegExp(`^ {0,${Math.min(3,l-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),R=new RegExp(`^ {0,${Math.min(3,l-1)}}(?:\`\`\`|~~~)`),Q=new RegExp(`^ {0,${Math.min(3,l-1)}}#`);for(;e&&(g=e.split(`
`,1)[0],h=g,this.options.pedantic&&(h=h.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(R.test(h)||Q.test(h)||P.test(h)||M.test(e)));){if(h.search(/[^ ]/)>=l||!h.trim())y+=`
`+h.slice(l);else if(!f)y+=`
`+h;else break;!f&&!h.trim()&&(f=!0),r+=g+`
`,e=e.substring(g.length+1)}}E.loose||(d?E.loose=!0:/\n *\n *$/.test(r)&&(d=!0)),this.options.gfm&&(o=/^\[[ xX]\] /.exec(y),o&&(a=o[0]!=="[ ] ",y=y.replace(/^\[[ xX]\] +/,""))),E.items.push({type:"list_item",raw:r,task:!!o,checked:a,loose:!1,text:y}),E.raw+=r}E.items[E.items.length-1].raw=r.trimRight(),E.items[E.items.length-1].text=y.trimRight(),E.raw=E.raw.trimRight();let D=E.items.length;for(c=0;c<D;c++)if(this.lexer.state.top=!1,E.items[c].tokens=this.lexer.blockTokens(E.items[c].text,[]),!E.loose){let P=E.items[c].tokens.filter(R=>R.type==="space"),M=P.length>0&&P.some(R=>/\n.*\n/.test(R.raw));E.loose=M}if(E.loose)for(c=0;c<D;c++)E.items[c].loose=!0;return E}}html(e){let n=this.rules.block.html.exec(e);if(n){let r={type:"html",raw:n[0],pre:!this.options.sanitizer&&(n[1]==="pre"||n[1]==="script"||n[1]==="style"),text:n[0]};if(this.options.sanitize){let o=this.options.sanitizer?this.options.sanitizer(n[0]):Ut(n[0]);r.type="paragraph",r.text=o,r.tokens=this.lexer.inline(o)}return r}}def(e){let n=this.rules.block.def.exec(e);if(n){let r=n[1].toLowerCase().replace(/\s+/g," "),o=n[2]?n[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",a=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline._escapes,"$1"):n[3];return{type:"def",tag:r,raw:n[0],href:o,title:a}}}table(e){let n=this.rules.block.table.exec(e);if(n){let r={type:"table",header:Ry(n[1]).map(o=>({text:o})),align:n[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:n[3]&&n[3].trim()?n[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(r.header.length===r.align.length){r.raw=n[0];let o=r.align.length,a,l,c,f;for(a=0;a<o;a++)/^ *-+: *$/.test(r.align[a])?r.align[a]="right":/^ *:-+: *$/.test(r.align[a])?r.align[a]="center":/^ *:-+ *$/.test(r.align[a])?r.align[a]="left":r.align[a]=null;for(o=r.rows.length,a=0;a<o;a++)r.rows[a]=Ry(r.rows[a],r.header.length).map(d=>({text:d}));for(o=r.header.length,l=0;l<o;l++)r.header[l].tokens=this.lexer.inline(r.header[l].text);for(o=r.rows.length,l=0;l<o;l++)for(f=r.rows[l],c=0;c<f.length;c++)f[c].tokens=this.lexer.inline(f[c].text);return r}}}lheading(e){let n=this.rules.block.lheading.exec(e);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(e){let n=this.rules.block.paragraph.exec(e);if(n){let r=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:r,tokens:this.lexer.inline(r)}}}text(e){let n=this.rules.block.text.exec(e);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(e){let n=this.rules.inline.escape.exec(e);if(n)return{type:"escape",raw:n[0],text:Ut(n[1])}}tag(e){let n=this.rules.inline.tag.exec(e);if(n)return!this.lexer.state.inLink&&/^<a /i.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):Ut(n[0]):n[0]}}link(e){let n=this.rules.inline.link.exec(e);if(n){let r=n[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;let l=Gl(r.slice(0,-1),"\\");if((r.length-l.length)%2==0)return}else{let l=jD(n[2],"()");if(l>-1){let f=(n[0].indexOf("!")===0?5:4)+n[1].length+l;n[2]=n[2].substring(0,l),n[0]=n[0].substring(0,f).trim(),n[3]=""}}let o=n[2],a="";if(this.options.pedantic){let l=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(o);l&&(o=l[1],a=l[3])}else a=n[3]?n[3].slice(1,-1):"";return o=o.trim(),/^</.test(o)&&(this.options.pedantic&&!/>$/.test(r)?o=o.slice(1):o=o.slice(1,-1)),Gy(n,{href:o&&o.replace(this.rules.inline._escapes,"$1"),title:a&&a.replace(this.rules.inline._escapes,"$1")},n[0],this.lexer)}}reflink(e,n){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){let o=(r[2]||r[1]).replace(/\s+/g," ");if(o=n[o.toLowerCase()],!o){let a=r[0].charAt(0);return{type:"text",raw:a,text:a}}return Gy(r,o,r[0],this.lexer)}}emStrong(e,n,r=""){let o=this.rules.inline.emStrong.lDelim.exec(e);if(!o||o[3]&&r.match(/[\p{L}\p{N}]/u))return;let a=o[1]||o[2]||"";if(!a||a&&(r===""||this.rules.inline.punctuation.exec(r))){let l=o[0].length-1,c,f,d=l,h=0,m=o[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(m.lastIndex=0,n=n.slice(-1*e.length+l);(o=m.exec(n))!=null;){if(c=o[1]||o[2]||o[3]||o[4]||o[5]||o[6],!c)continue;if(f=c.length,o[3]||o[4]){d+=f;continue}else if((o[5]||o[6])&&l%3&&!((l+f)%3)){h+=f;continue}if(d-=f,d>0)continue;f=Math.min(f,f+d+h);let g=e.slice(0,l+o.index+(o[0].length-c.length)+f);if(Math.min(l,f)%2){let _=g.slice(1,-1);return{type:"em",raw:g,text:_,tokens:this.lexer.inlineTokens(_)}}let y=g.slice(2,-2);return{type:"strong",raw:g,text:y,tokens:this.lexer.inlineTokens(y)}}}}codespan(e){let n=this.rules.inline.code.exec(e);if(n){let r=n[2].replace(/\n/g," "),o=/[^ ]/.test(r),a=/^ /.test(r)&&/ $/.test(r);return o&&a&&(r=r.substring(1,r.length-1)),r=Ut(r,!0),{type:"codespan",raw:n[0],text:r}}}br(e){let n=this.rules.inline.br.exec(e);if(n)return{type:"br",raw:n[0]}}del(e){let n=this.rules.inline.del.exec(e);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(e,n){let r=this.rules.inline.autolink.exec(e);if(r){let o,a;return r[2]==="@"?(o=Ut(this.options.mangle?n(r[1]):r[1]),a="mailto:"+o):(o=Ut(r[1]),a=o),{type:"link",raw:r[0],text:o,href:a,tokens:[{type:"text",raw:o,text:o}]}}}url(e,n){let r;if(r=this.rules.inline.url.exec(e)){let o,a;if(r[2]==="@")o=Ut(this.options.mangle?n(r[0]):r[0]),a="mailto:"+o;else{let l;do l=r[0],r[0]=this.rules.inline._backpedal.exec(r[0])[0];while(l!==r[0]);o=Ut(r[0]),r[1]==="www."?a="http://"+r[0]:a=r[0]}return{type:"link",raw:r[0],text:o,href:a,tokens:[{type:"text",raw:o,text:o}]}}}inlineText(e,n){let r=this.rules.inline.text.exec(e);if(r){let o;return this.lexer.state.inRawBlock?o=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):Ut(r[0]):r[0]:o=Ut(this.options.smartypants?n(r[0]):r[0]),{type:"text",raw:r[0],text:o}}}},le={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:Yl,lheading:/^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};le._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;le._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;le.def=Ze(le.def).replace("label",le._label).replace("title",le._title).getRegex();le.bullet=/(?:[*+-]|\d{1,9}[.)])/;le.listItemStart=Ze(/^( *)(bull) */).replace("bull",le.bullet).getRegex();le.list=Ze(le.list).replace(/bull/g,le.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+le.def.source+")").getRegex();le._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";le._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;le.html=Ze(le.html,"i").replace("comment",le._comment).replace("tag",le._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();le.paragraph=Ze(le._paragraph).replace("hr",le.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",le._tag).getRegex();le.blockquote=Ze(le.blockquote).replace("paragraph",le.paragraph).getRegex();le.normal=Jn({},le);le.gfm=Jn({},le.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"});le.gfm.table=Ze(le.gfm.table).replace("hr",le.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",le._tag).getRegex();le.gfm.paragraph=Ze(le._paragraph).replace("hr",le.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",le.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",le._tag).getRegex();le.pedantic=Jn({},le.normal,{html:Ze(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",le._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Yl,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Ze(le.normal._paragraph).replace("hr",le.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",le.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var re={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Yl,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,rDelimUnd:/^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Yl,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};re._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";re.punctuation=Ze(re.punctuation).replace(/punctuation/g,re._punctuation).getRegex();re.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;re.escapedEmSt=/(?:^|[^\\])(?:\\\\)*\\[*_]/g;re._comment=Ze(le._comment).replace("(?:-->|$)","-->").getRegex();re.emStrong.lDelim=Ze(re.emStrong.lDelim).replace(/punct/g,re._punctuation).getRegex();re.emStrong.rDelimAst=Ze(re.emStrong.rDelimAst,"g").replace(/punct/g,re._punctuation).getRegex();re.emStrong.rDelimUnd=Ze(re.emStrong.rDelimUnd,"g").replace(/punct/g,re._punctuation).getRegex();re._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;re._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;re._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;re.autolink=Ze(re.autolink).replace("scheme",re._scheme).replace("email",re._email).getRegex();re._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;re.tag=Ze(re.tag).replace("comment",re._comment).replace("attribute",re._attribute).getRegex();re._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;re._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;re._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;re.link=Ze(re.link).replace("label",re._label).replace("href",re._href).replace("title",re._title).getRegex();re.reflink=Ze(re.reflink).replace("label",re._label).replace("ref",le._label).getRegex();re.nolink=Ze(re.nolink).replace("ref",le._label).getRegex();re.reflinkSearch=Ze(re.reflinkSearch,"g").replace("reflink",re.reflink).replace("nolink",re.nolink).getRegex();re.normal=Jn({},re);re.pedantic=Jn({},re.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:Ze(/^!?\[(label)\]\((.*?)\)/).replace("label",re._label).getRegex(),reflink:Ze(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",re._label).getRegex()});re.gfm=Jn({},re.normal,{escape:Ze(re.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/});re.gfm.url=Ze(re.gfm.url,"i").replace("email",re.gfm._extended_email).getRegex();re.breaks=Jn({},re.gfm,{br:Ze(re.br).replace("{2,}","*").getRegex(),text:Ze(re.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function zD(t){return t.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026")}function Wy(t){let e="",n,r,o=t.length;for(n=0;n<o;n++)r=t.charCodeAt(n),Math.random()>.5&&(r="x"+r.toString(16)),e+="&#"+r+";";return e}var dr=class{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||qo,this.options.tokenizer=this.options.tokenizer||new Wl,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let n={block:le.normal,inline:re.normal};this.options.pedantic?(n.block=le.pedantic,n.inline=re.pedantic):this.options.gfm&&(n.block=le.gfm,this.options.breaks?n.inline=re.breaks:n.inline=re.gfm),this.tokenizer.rules=n}static get rules(){return{block:le,inline:re}}static lex(e,n){return new dr(n).lex(e)}static lexInline(e,n){return new dr(n).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);let n;for(;n=this.inlineQueue.shift();)this.inlineTokens(n.src,n.tokens);return this.tokens}blockTokens(e,n=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(c,f,d)=>f+"    ".repeat(d.length));let r,o,a,l;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(c=>(r=c.call({lexer:this},e,n))?(e=e.substring(r.raw.length),n.push(r),!0):!1))){if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length),r.raw.length===1&&n.length>0?n[n.length-1].raw+=`
`:n.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length),o=n[n.length-1],o&&(o.type==="paragraph"||o.type==="text")?(o.raw+=`
`+r.raw,o.text+=`
`+r.text,this.inlineQueue[this.inlineQueue.length-1].src=o.text):n.push(r);continue}if(r=this.tokenizer.fences(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.heading(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.hr(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.blockquote(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.list(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.html(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.def(e)){e=e.substring(r.raw.length),o=n[n.length-1],o&&(o.type==="paragraph"||o.type==="text")?(o.raw+=`
`+r.raw,o.text+=`
`+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=o.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});continue}if(r=this.tokenizer.table(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.lheading(e)){e=e.substring(r.raw.length),n.push(r);continue}if(a=e,this.options.extensions&&this.options.extensions.startBlock){let c=1/0,f=e.slice(1),d;this.options.extensions.startBlock.forEach(function(h){d=h.call({lexer:this},f),typeof d=="number"&&d>=0&&(c=Math.min(c,d))}),c<1/0&&c>=0&&(a=e.substring(0,c+1))}if(this.state.top&&(r=this.tokenizer.paragraph(a))){o=n[n.length-1],l&&o.type==="paragraph"?(o.raw+=`
`+r.raw,o.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=o.text):n.push(r),l=a.length!==e.length,e=e.substring(r.raw.length);continue}if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length),o=n[n.length-1],o&&o.type==="text"?(o.raw+=`
`+r.raw,o.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=o.text):n.push(r);continue}if(e){let c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){let r,o,a,l=e,c,f,d;if(this.tokens.links){let h=Object.keys(this.tokens.links);if(h.length>0)for(;(c=this.tokenizer.rules.inline.reflinkSearch.exec(l))!=null;)h.includes(c[0].slice(c[0].lastIndexOf("[")+1,-1))&&(l=l.slice(0,c.index)+"["+Yy("a",c[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(c=this.tokenizer.rules.inline.blockSkip.exec(l))!=null;)l=l.slice(0,c.index)+"["+Yy("a",c[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(c=this.tokenizer.rules.inline.escapedEmSt.exec(l))!=null;)l=l.slice(0,c.index+c[0].length-2)+"++"+l.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex),this.tokenizer.rules.inline.escapedEmSt.lastIndex--;for(;e;)if(f||(d=""),f=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(h=>(r=h.call({lexer:this},e,n))?(e=e.substring(r.raw.length),n.push(r),!0):!1))){if(r=this.tokenizer.escape(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.tag(e)){e=e.substring(r.raw.length),o=n[n.length-1],o&&r.type==="text"&&o.type==="text"?(o.raw+=r.raw,o.text+=r.text):n.push(r);continue}if(r=this.tokenizer.link(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(r.raw.length),o=n[n.length-1],o&&r.type==="text"&&o.type==="text"?(o.raw+=r.raw,o.text+=r.text):n.push(r);continue}if(r=this.tokenizer.emStrong(e,l,d)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.codespan(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.br(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.del(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.autolink(e,Wy)){e=e.substring(r.raw.length),n.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(e,Wy))){e=e.substring(r.raw.length),n.push(r);continue}if(a=e,this.options.extensions&&this.options.extensions.startInline){let h=1/0,m=e.slice(1),g;this.options.extensions.startInline.forEach(function(y){g=y.call({lexer:this},m),typeof g=="number"&&g>=0&&(h=Math.min(h,g))}),h<1/0&&h>=0&&(a=e.substring(0,h+1))}if(r=this.tokenizer.inlineText(a,zD)){e=e.substring(r.raw.length),r.raw.slice(-1)!=="_"&&(d=r.raw.slice(-1)),f=!0,o=n[n.length-1],o&&o.type==="text"?(o.raw+=r.raw,o.text+=r.text):n.push(r);continue}if(e){let h="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(h);break}else throw new Error(h)}}return n}},Ul=class{constructor(e){this.options=e||qo}code(e,n,r){let o=(n||"").match(/\S*/)[0];if(this.options.highlight){let a=this.options.highlight(e,o);a!=null&&a!==e&&(r=!0,e=a)}return e=e.replace(/\n$/,"")+`
`,o?'<pre><code class="'+this.options.langPrefix+Ut(o)+'">'+(r?e:Ut(e,!0))+`</code></pre>
`:"<pre><code>"+(r?e:Ut(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e){return e}heading(e,n,r,o){if(this.options.headerIds){let a=this.options.headerPrefix+o.slug(r);return`<h${n} id="${a}">${e}</h${n}>
`}return`<h${n}>${e}</h${n}>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(e,n,r){let o=n?"ol":"ul",a=n&&r!==1?' start="'+r+'"':"";return"<"+o+a+`>
`+e+"</"+o+`>
`}listitem(e){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return`<p>${e}</p>
`}table(e,n){return n&&(n=`<tbody>${n}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+n+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,n){let r=n.header?"th":"td";return(n.align?`<${r} align="${n.align}">`:`<${r}>`)+e+`</${r}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return`<del>${e}</del>`}link(e,n,r){if(e=Iy(this.options.sanitize,this.options.baseUrl,e),e===null)return r;let o='<a href="'+e+'"';return n&&(o+=' title="'+n+'"'),o+=">"+r+"</a>",o}image(e,n,r){if(e=Iy(this.options.sanitize,this.options.baseUrl,e),e===null)return r;let o=`<img src="${e}" alt="${r}"`;return n&&(o+=` title="${n}"`),o+=this.options.xhtml?"/>":">",o}text(e){return e}},yf=class{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,n,r){return""+r}image(e,n,r){return""+r}br(){return""}},_f=class{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,n){let r=e,o=0;if(this.seen.hasOwnProperty(r)){o=this.seen[e];do o++,r=e+"-"+o;while(this.seen.hasOwnProperty(r))}return n||(this.seen[e]=o,this.seen[r]=0),r}slug(e,n={}){let r=this.serialize(e);return this.getNextSafeSlug(r,n.dryrun)}},$n=class{constructor(e){this.options=e||qo,this.options.renderer=this.options.renderer||new Ul,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new yf,this.slugger=new _f}static parse(e,n){return new $n(n).parse(e)}static parseInline(e,n){return new $n(n).parseInline(e)}parse(e,n=!0){let r="",o,a,l,c,f,d,h,m,g,y,_,x,k,E,T,D,P,M,R,Q=e.length;for(o=0;o<Q;o++){if(y=e[o],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[y.type]&&(R=this.options.extensions.renderers[y.type].call({parser:this},y),R!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(y.type))){r+=R||"";continue}switch(y.type){case"space":continue;case"hr":{r+=this.renderer.hr();continue}case"heading":{r+=this.renderer.heading(this.parseInline(y.tokens),y.depth,Py(this.parseInline(y.tokens,this.textRenderer)),this.slugger);continue}case"code":{r+=this.renderer.code(y.text,y.lang,y.escaped);continue}case"table":{for(m="",h="",c=y.header.length,a=0;a<c;a++)h+=this.renderer.tablecell(this.parseInline(y.header[a].tokens),{header:!0,align:y.align[a]});for(m+=this.renderer.tablerow(h),g="",c=y.rows.length,a=0;a<c;a++){for(d=y.rows[a],h="",f=d.length,l=0;l<f;l++)h+=this.renderer.tablecell(this.parseInline(d[l].tokens),{header:!1,align:y.align[l]});g+=this.renderer.tablerow(h)}r+=this.renderer.table(m,g);continue}case"blockquote":{g=this.parse(y.tokens),r+=this.renderer.blockquote(g);continue}case"list":{for(_=y.ordered,x=y.start,k=y.loose,c=y.items.length,g="",a=0;a<c;a++)T=y.items[a],D=T.checked,P=T.task,E="",T.task&&(M=this.renderer.checkbox(D),k?T.tokens.length>0&&T.tokens[0].type==="paragraph"?(T.tokens[0].text=M+" "+T.tokens[0].text,T.tokens[0].tokens&&T.tokens[0].tokens.length>0&&T.tokens[0].tokens[0].type==="text"&&(T.tokens[0].tokens[0].text=M+" "+T.tokens[0].tokens[0].text)):T.tokens.unshift({type:"text",text:M}):E+=M),E+=this.parse(T.tokens,k),g+=this.renderer.listitem(E,P,D);r+=this.renderer.list(g,_,x);continue}case"html":{r+=this.renderer.html(y.text);continue}case"paragraph":{r+=this.renderer.paragraph(this.parseInline(y.tokens));continue}case"text":{for(g=y.tokens?this.parseInline(y.tokens):y.text;o+1<Q&&e[o+1].type==="text";)y=e[++o],g+=`
`+(y.tokens?this.parseInline(y.tokens):y.text);r+=n?this.renderer.paragraph(g):g;continue}default:{let L='Token with "'+y.type+'" type was not found.';if(this.options.silent){console.error(L);return}else throw new Error(L)}}}return r}parseInline(e,n){n=n||this.renderer;let r="",o,a,l,c=e.length;for(o=0;o<c;o++){if(a=e[o],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[a.type]&&(l=this.options.extensions.renderers[a.type].call({parser:this},a),l!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type))){r+=l||"";continue}switch(a.type){case"escape":{r+=n.text(a.text);break}case"html":{r+=n.html(a.text);break}case"link":{r+=n.link(a.href,a.title,this.parseInline(a.tokens,n));break}case"image":{r+=n.image(a.href,a.title,a.text);break}case"strong":{r+=n.strong(this.parseInline(a.tokens,n));break}case"em":{r+=n.em(this.parseInline(a.tokens,n));break}case"codespan":{r+=n.codespan(a.text);break}case"br":{r+=n.br();break}case"del":{r+=n.del(this.parseInline(a.tokens,n));break}case"text":{r+=n.text(a.text);break}default:{let f='Token with "'+a.type+'" type was not found.';if(this.options.silent){console.error(f);return}else throw new Error(f)}}}return r}};function pe(t,e,n){if(typeof t=="undefined"||t===null)throw new Error("marked(): input parameter is undefined or null");if(typeof t!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");if(typeof e=="function"&&(n=e,e=null),e=Jn({},pe.defaults,e||{}),Fy(e),n){let o=e.highlight,a;try{a=dr.lex(t,e)}catch(f){return n(f)}let l=function(f){let d;if(!f)try{e.walkTokens&&pe.walkTokens(a,e.walkTokens),d=$n.parse(a,e)}catch(h){f=h}return e.highlight=o,f?n(f):n(null,d)};if(!o||o.length<3||(delete e.highlight,!a.length))return l();let c=0;pe.walkTokens(a,function(f){f.type==="code"&&(c++,setTimeout(()=>{o(f.text,f.lang,function(d,h){if(d)return l(d);h!=null&&h!==f.text&&(f.text=h,f.escaped=!0),c--,c===0&&l()})},0))}),c===0&&l();return}function r(o){if(o.message+=`
Please report this to https://github.com/markedjs/marked.`,e.silent)return"<p>An error occurred:</p><pre>"+Ut(o.message+"",!0)+"</pre>";throw o}try{let o=dr.lex(t,e);if(e.walkTokens){if(e.async)return Promise.all(pe.walkTokens(o,e.walkTokens)).then(()=>$n.parse(o,e)).catch(r);pe.walkTokens(o,e.walkTokens)}return $n.parse(o,e)}catch(o){r(o)}}pe.options=pe.setOptions=function(t){return Jn(pe.defaults,t),AD(pe.defaults),pe};pe.getDefaults=Oy;pe.defaults=qo;pe.use=function(...t){let e=pe.defaults.extensions||{renderers:{},childTokens:{}};t.forEach(n=>{let r=Jn({},n);if(r.async=pe.defaults.async||r.async,n.extensions&&(n.extensions.forEach(o=>{if(!o.name)throw new Error("extension name required");if(o.renderer){let a=e.renderers[o.name];a?e.renderers[o.name]=function(...l){let c=o.renderer.apply(this,l);return c===!1&&(c=a.apply(this,l)),c}:e.renderers[o.name]=o.renderer}if(o.tokenizer){if(!o.level||o.level!=="block"&&o.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");e[o.level]?e[o.level].unshift(o.tokenizer):e[o.level]=[o.tokenizer],o.start&&(o.level==="block"?e.startBlock?e.startBlock.push(o.start):e.startBlock=[o.start]:o.level==="inline"&&(e.startInline?e.startInline.push(o.start):e.startInline=[o.start]))}o.childTokens&&(e.childTokens[o.name]=o.childTokens)}),r.extensions=e),n.renderer){let o=pe.defaults.renderer||new Ul;for(let a in n.renderer){let l=o[a];o[a]=(...c)=>{let f=n.renderer[a].apply(o,c);return f===!1&&(f=l.apply(o,c)),f}}r.renderer=o}if(n.tokenizer){let o=pe.defaults.tokenizer||new Wl;for(let a in n.tokenizer){let l=o[a];o[a]=(...c)=>{let f=n.tokenizer[a].apply(o,c);return f===!1&&(f=l.apply(o,c)),f}}r.tokenizer=o}if(n.walkTokens){let o=pe.defaults.walkTokens;r.walkTokens=function(a){let l=[];return l.push(n.walkTokens.call(this,a)),o&&(l=l.concat(o.call(this,a))),l}}pe.setOptions(r)})};pe.walkTokens=function(t,e){let n=[];for(let r of t)switch(n=n.concat(e.call(pe,r)),r.type){case"table":{for(let o of r.header)n=n.concat(pe.walkTokens(o.tokens,e));for(let o of r.rows)for(let a of o)n=n.concat(pe.walkTokens(a.tokens,e));break}case"list":{n=n.concat(pe.walkTokens(r.items,e));break}default:pe.defaults.extensions&&pe.defaults.extensions.childTokens&&pe.defaults.extensions.childTokens[r.type]?pe.defaults.extensions.childTokens[r.type].forEach(function(o){n=n.concat(pe.walkTokens(r[o],e))}):r.tokens&&(n=n.concat(pe.walkTokens(r.tokens,e)))}return n};pe.parseInline=function(t,e){if(typeof t=="undefined"||t===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof t!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");e=Jn({},pe.defaults,e||{}),Fy(e);try{let n=dr.lexInline(t,e);return e.walkTokens&&pe.walkTokens(n,e.walkTokens),$n.parseInline(n,e)}catch(n){if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,e.silent)return"<p>An error occurred:</p><pre>"+Ut(n.message+"",!0)+"</pre>";throw n}};pe.Parser=$n;pe.parser=$n.parse;pe.Renderer=Ul;pe.TextRenderer=yf;pe.Lexer=dr;pe.lexer=dr.lex;pe.Tokenizer=Wl;pe.Slugger=_f;pe.parse=pe;var R3=pe.options,F3=pe.setOptions,Y3=pe.use,G3=pe.walkTokens,W3=pe.parseInline;var U3=$n.parse,B3=dr.lex;var Uy=(t,e,n)=>{if(t<0&&(t=e.length+t),!(t>=e.length&&t>=0))return t+1<e.length?n.substring(e[t].position.start.offset,e[t+1].position.start.offset-1):n.substring(e[t].position.start.offset,n.length)},By=t=>G(void 0,null,function*(){var m,g,y,_,x,k;let e=ce.getInstance(),n=yield app.vault.adapter.read((0,wf.normalizePath)(t.file.path)),r=(g=Js.default.cloneDeep((m=app==null?void 0:app.metadataCache)==null?void 0:m.getFileCache(t.file).frontmatter))!=null?g:{},o=/\[([^[]*)::([^[]*)\]/gm,a,l=[];do a=o.exec(n),l.push(a);while(a);if(l.forEach(E=>{E&&Js.default.set(r,E[1].trim(),E[2].trim())}),!r){Ee("No frontmatter found in note",!0);return}let c=qD(r);for(let[E,T]of Object.entries(c)){let D=Js.default.get(r,E,null);D&&Js.default.set(r,T,D)}let f=yield kt(),d=r.position;delete r.position;let h=f.find(E=>{var T,D;return E.id==((T=r.calendar)!=null?T:e.settings.defaultCalendar)||E.summary==((D=r.calendar)!=null?D:e.settings.defaultCalendar)});if(!h){Ee("Event not created. Calendar not defined. Set a default calendar in the settings or set the field calendar");return}if(r.parent=h,r.summary||(r.summary=t.file.basename),r.description){if(typeof r.description=="string"){if(((y=r.description)==null?void 0:y.toLowerCase())=="header"&&(r.description="",((_=app==null?void 0:app.metadataCache)==null?void 0:_.getFileCache(t.file).headings).forEach(T=>{r.description+=`<h${T.level}>${T.heading}</h${T.level}>`})),((x=r.description)==null?void 0:x.toLowerCase())=="file"){let E=pe.parse(n.substring(d.end.offset));r.description=E}}else if(typeof r.description=="object"){let E=(k=app==null?void 0:app.metadataCache)==null?void 0:k.getFileCache(t.file).headings,T=r.description.map(P=>{if(typeof P=="number"){let M=Uy(P,E,n);return M||-1}else if(typeof P=="object"){if(P.length!=2)return-1;let[M,R]=P;if(M<0&&(M=E.length+M),R<0&&(R=E.length+R),M>=E.length||R>=E.length||M<0||R<0||M>R)return-1;let Q="";for(let L=M;L<=R;L++){let j=Uy(L,E,n);if(!j)return-1;Q+=j+`
`}return Q}});if(T.contains(-1)){Ee("Event not created.A Header in the header list is out of range",!0);return}let D=pe.parse(T.join(`
`));r.description=D}}if(!r.start&&!r.startTime&&(r.start={date:window.moment()}),!r.end&&!r.endTime&&(r.end=r.start),r.start.date?(r.start.date=window.moment(r.start.date).format("YYYY-MM-DD"),r.end.date=window.moment(r.end.date).format("YYYY-MM-DD")):(r.start.dateTime=window.moment(r.start.dateTime).format(),r.end.dateTime=window.moment(r.end.dateTime).format()),r.recurrence)try{let E=Mg.fromText(r.recurrence),T=new Hi;T.rrule(E),r.recurrence=T.valueOf()}catch(E){Ee("Event not created. Error in recurrence text.",!0);return}return r}),qD=t=>{var n;let e=new Map;if(typeof t.mapping=="string"){t.mapping.endsWith(".md")||(t.mapping+=".md");let r=(0,wf.normalizePath)(t.mapping),o=app.vault.getAbstractFileByPath(r);if(!o)return Ee(`Mapping Error, file "${r}" not found.`),e;if(t=(n=app==null?void 0:app.metadataCache)==null?void 0:n.getFileCache(o).frontmatter,!t)return Ee(`Mapping Error, file "${r}" does not contain frontmatter.`),e}return t.mapping?t.mapping:e};var jy=ye(require("obsidian"));var Hy=t=>G(void 0,null,function*(){var f,d;if(jy.Platform.isMobile)return;let e=ce.getInstance(),{remote:n}=require("electron"),{file:r}=Yo(t,e),o=r?"Open Note":"Create Note",a=(f=t.summary)!=null?f:"Event started",l=(d=t.description)!=null?d:"",c;process.platform==="win32"?c=new n.Notification({toastXml:`
            <toast 
                content="Open Note"
                arguments="obsidian://googleOpenNote?event=${t.id}::${t.parent.id}"
                activationType="protocol"
            >
                <visual>
                    <binding template="ToastGeneric">
                        <text>Google event now</text>
                        <text>Title: ${a}</text>
                        <text>Description: ${l}</text>
                    </binding>
                </visual>

                <actions>
                    <action
                        content="${o}"
                        arguments="obsidian://googleOpenNote?event=${t.id}::${t.parent.id}"
                        activationType="protocol"/>

                    <action activationType="background" content="Dismiss" arguments="dismiss"/>
                </actions>
            </toast>`}):process.platform==="darwin"&&(c=new n.Notification({title:a,body:l,actions:[{type:"button",text:o},{type:"button",text:"Dismiss"}]}),c.on("action",(h,m)=>{m===0&&window.open(`obsidian://googleOpenNote?event=${t.id}::${t.parent.id}`)})),c.show()});var zy=ye(require("obsidian"));var VD=(...e)=>G(void 0,[...e],function*(t={}){return(yield Ve(t)).map(o=>{var f;if(!((f=o.description)==null?void 0:f.includes("~obsidianTask~")))return null;let a=o.description.replace(/<br>/g,`
`).replace(/<\/?[^>]+(>|$)/g,""),l=(0,zy.parseYaml)(a);return{event:o,current:l.current||0,steps:l.steps||0,goal:l.goal||0,done:l.done||!1}}).filter(o=>o!==null)}),qy=()=>G(void 0,null,function*(){return yield VD()});var KD={googleClientId:"",googleClientSecret:"",googleRefreshToken:"",useCustomClient:!0,googleOAuthServer:"https://obsidian-google-calendar.vercel.app",refreshInterval:10,useNotification:!1,showNotice:!0,autoCreateEventNotes:!0,autoCreateEventKeepOpen:!1,importStartOffset:1,importEndOffset:1,optionalNotePrefix:"",eventNoteNameFormat:"{{prefix}}{{event-title}}",defaultCalendar:"",calendarBlackList:[],insertTemplates:[],webViewDefaultColorMode:gl(),webViewDefaultView:"day",useDefaultTemplate:!1,defaultTemplate:"",defaultFolder:app.vault.config.newFileFolderPath,activateDailyNoteAddon:!1,dailyNoteDotColor:"#6aa1d8",useWeeklyNotes:!1,debugMode:!1,timelineHourFormat:0,atAnnotationEnabled:!0,usDateFormat:!0},ce=class extends Gr.Plugin{constructor(){super(...arguments);this.events=[];this.initView=e=>G(this,null,function*(){this.app.workspace.getLeavesOfType(e).length===0&&(Gr.Platform.isMobile||e===Ho||e===hi?yield this.app.workspace.getLeaf(!0).setViewState({type:e}):yield this.app.workspace.getRightLeaf(!1).setViewState({type:e}));let n=this.app.workspace.getLeavesOfType(e).first();return this.app.workspace.revealLeaf(n),n});this.onLayoutReady=()=>{var r;xo(this),ii(this);let e=(r=this.app.internalPlugins)==null?void 0:r.plugins.templates;e&&e.enabled&&(this.coreTemplatePlugin=e);let n=this.app.plugins.plugins["templater-obsidian"];n&&n._loaded&&(this.templaterPlugin=n),Jc(this)}}static getInstance(){return ce.instance}onload(){return G(this,null,function*(){if(ce.instance=this,this.api=new vf().make(),yield this.loadSettings(),this.app.workspace.onLayoutReady(this.onLayoutReady),this.events.push(this.app.vault.on("create",()=>{xo(this),ii(this)})),this.events.push(this.app.vault.on("delete",()=>{xo(this),ii(this)})),this.events.push(this.app.vault.on("rename",()=>{xo(this),ii(this)})),this.events.forEach(e=>{this.registerEvent(e)}),this.settings.useNotification){let e=window.setInterval(()=>G(this,null,function*(){let n=yield Ve(),r=window.moment();n.filter(a=>a.start.date?!1:window.moment(a.start.dateTime).isSame(r,"minute")).forEach(a=>{Hy(a)})}),1e3*60);this.registerInterval(e)}this.registerMarkdownCodeBlockProcessor("gEvent",(e,n,r)=>sy(e,n,r)),this.registerEditorSuggest(new hf(this.app)),this.registerView(Ji,e=>new qs(e)),this.registerView(hi,e=>new Vs(e)),this.registerView(Zs,e=>new ff(e)),this.registerView(Ho,e=>new df(e)),this.registerView(pi,e=>new jo(e)),this.registerEvent(this.app.workspace.on("editor-change",e=>{cy(e,this),dy(e)})),this.addCommand({id:"open-google-calendar-timline-view",name:"Open Google Calendar timeline view",callback:()=>this.initView(Ji)}),this.addCommand({id:"open-google-calendar-week-view",name:"Open Google Calendar week view",callback:()=>this.initView(hi)}),this.addCommand({id:"open-google-calendar-month-view",name:"Open Google Calendar month view",callback:()=>this.initView(Zs)}),this.addCommand({id:"open-google-calendar-web-view",name:"Open Google Calendar web view",callback:()=>this.initView(Ho)}),this.addCommand({id:"open-google-calendar-schedule-view",name:"Open Google Calendar schedule view",callback:()=>this.initView(pi)}),this.addCommand({id:"list-google-calendars",name:"List Google Calendars",checkCallback:e=>{let n=We();if(e)return n;!n||kt().then(r=>{new yl(r).open()})}}),this.addCommand({id:"create-google-calendar-event",name:"Create Google Calendar Event",checkCallback:e=>{let n=We();if(e)return n;!n||new dn({start:{},end:{}},()=>{kn()}).open()}}),this.addCommand({id:"list-google-calendars",name:"List Google Calendars",checkCallback:e=>{let n=We();if(e)return n;!n||kt().then(r=>{new yl(r).open()})}}),this.addCommand({id:"list-google-events",name:"List Google Events",checkCallback:e=>{let n=We();if(e)return n;!n||Ve().then(r=>{new Qn(r,"details").open()})}}),this.addCommand({id:"google-calendar-trigger-auto-import",name:"Google Calendar Trigger Auto Import",checkCallback:e=>{let n=We();if(e)return n;!n||Jc(this)}}),this.addCommand({id:"google-calendar-create-event-note",name:"Create Event Note",checkCallback:e=>{let n=We();if(e)return n;!n||Ve().then(r=>{new Qn(r,"createNote").open()})}}),this.addCommand({id:"google-calendar-get-todays-tasks",name:"Get todays google calendar tasks",checkCallback:e=>{let n=We();if(e)return n;!n||qy().then(r=>{console.log(r)})}}),this.addCommand({id:"google-calendar-create-event-note-current-event",name:"Create Event Note for current event",checkCallback:e=>{let n=We();if(e)return n;!n||Ve().then(r=>{let o=r.filter(a=>{if(a.start.date)return!1;let l=window.moment(a.start.dateTime),c=window.moment(a.end.dateTime),f=window.moment();return!(f.isBefore(l)||f.isAfter(c))});o.length==0&&(o=r.filter(a=>{if(a.start.date)return!1;let l=window.moment(a.start.dateTime).subtract(1,"hour"),c=window.moment(a.end.dateTime),f=window.moment();return!(f.isBefore(l)||f.isAfter(c))})),o.length==0&&(o=r.filter(a=>!!a.start.date)),o.length==1?this.settings.useDefaultTemplate&&this.settings.defaultFolder&&this.settings.defaultFolder?ar(o[0],this.settings.defaultFolder,this.settings.defaultTemplate):new lr(o[0],()=>{}).open():new Qn(o,"createNote").open()})}}),this.addCommand({id:"insert-google-event-codeblock",name:"Insert Google Event CodeBlock",editorCallback:e=>{e.replaceRange("```gEvent\ndate: "+window.moment().format("YYYY-MM-DD")+"\ntype: day\n```",e.getCursor())}}),this.addCommand({id:"insert-google-event-template",name:"Insert Google Event Template",editorCallback:e=>{e.replaceRange("{{gEvent.}}",e.getCursor());let n=e.getCursor();n.ch+="{{gEvent.".length,e.setCursor(n)}}),this.addCommand({id:"insert-google-events",name:"Insert Google events",editorCheckCallback:(e,n)=>{let r=We();if(e)return r;!r||new gf(n).open()}}),this.addCommand({id:"create-google-calendar-event-from-frontmatter ",name:"Create Google Calendar Event from frontmatter",editorCheckCallback:(e,n,r)=>{let o=We();if(e)return o;!o||!r.file||By(r).then(a=>{!a||Lo(a)})}}),this.addCommand({id:"copy-google-calendar-refresh-token",name:"Copy Google Calendar Refresh Token to Clipboard",callback:()=>{let e=$r();if(e==null||e==""){new Gr.Notice("No Refresh Token. Please Login.");return}navigator.clipboard.writeText(e),new Gr.Notice("Token copied")}}),this.settingsTab=new Pc(this.app,this),this.addSettingTab(this.settingsTab),this.registerObsidianProtocolHandler("googleLogin",e=>G(this,null,function*(){Gr.Platform.isDesktop||(ei(e.at),Cr(e.rt),ti(+new Date+36e5),new Gr.Notice("Login successful!"),this.settingsTab.display())})),this.registerObsidianProtocolHandler("googleOpenNote",e=>G(this,null,function*(){if(!e.event)return;let[n,r]=e.event.split("::"),o=yield or(n,r),{file:a}=Yo(o,this);a?app.workspace.getLeaf(!0).openFile(a):this.settings.useDefaultTemplate&&this.settings.defaultFolder&&this.settings.defaultFolder?ar(o,this.settings.defaultFolder,this.settings.defaultTemplate):new lr(o,l=>a=l).open()}))})}onunload(){this.app.workspace.detachLeavesOfType(Ji),this.app.workspace.detachLeavesOfType(hi),this.app.workspace.detachLeavesOfType(Zs),this.app.workspace.detachLeavesOfType(Ho),this.app.workspace.detachLeavesOfType(pi);for(let e in this.events)this.app.vault.offref(e);this.events=[]}loadSettings(){return G(this,null,function*(){this.settings=Object.assign({},KD,yield this.loadData())})}saveSettings(){return G(this,null,function*(){yield this.saveData(this.settings)})}};
/*!
 * rrule.js - Library for working with recurrence rules for calendar dates.
 * https://github.com/jakubroztocil/rrule
 *
 * Copyright 2010, Jakub Roztocil and Lars Schoning
 * Licenced under the BSD licence.
 * https://github.com/jakubroztocil/rrule/blob/master/LICENCE
 *
 * Based on:
 * python-dateutil - Extensions to the standard Python datetime module.
 * Copyright (c) 2003-2011 - Gustavo Niemeyer <gustavo@niemeyer.net>
 * Copyright (c) 2012 - Tomi Pieviläinen <tomi.pievilainen@iki.fi>
 * https://github.com/jakubroztocil/rrule/blob/master/LICENCE
 *
 */
/*!
* rrule.js - Library for working with recurrence rules for calendar dates.
* https://github.com/jakubroztocil/rrule
*
* Copyright 2010, Jakub Roztocil and Lars Schoning
* Licenced under the BSD licence.
* https://github.com/jakubroztocil/rrule/blob/master/LICENCE
*
*/
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
